!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.rdfstore=e()}}(function(){var define,module,exports;return function e(t,r,n){function i(a,s){if(!r[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);throw Error("Cannot find module '"+a+"'")}var u=r[a]={exports:{}};t[a][0].call(u.exports,function(e){var r=t[a][1][e];return i(r?r:e)},u,u.exports,e,t,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(){},{}],2:[function(e,t,r){function n(e,t,r){if(!(this instanceof n))return new n(e,t,r);var i=typeof e;if("base64"===t&&"string"===i)for(e=j(e);e.length%4!==0;)e+="=";var o;if("number"===i)o=L(e);else if("string"===i)o=n.byteLength(e,t);else{if("object"!==i)throw Error("First argument needs to be a number, array or string.");o=L(e.length)}var a;n._useTypedArrays?a=n._augment(new Uint8Array(o)):(a=this,a.length=o,a._isBuffer=!0);var s;if(n._useTypedArrays&&"number"==typeof e.byteLength)a._set(e);else if(C(e))for(s=0;o>s;s++)a[s]=n.isBuffer(e)?e.readUInt8(s):e[s];else if("string"===i)a.write(e,0,t);else if("number"===i&&!n._useTypedArrays&&!r)for(s=0;o>s;s++)a[s]=0;return a}function i(e,t,r,i){r=+r||0;var o=e.length-r;i?(i=+i,i>o&&(i=o)):i=o;var a=t.length;q(a%2===0,"Invalid hex string"),i>a/2&&(i=a/2);for(var s=0;i>s;s++){var l=parseInt(t.substr(2*s,2),16);q(!isNaN(l),"Invalid hex string"),e[r+s]=l}return n._charsWritten=2*s,s}function o(e,t,r,i){var o=n._charsWritten=P(R(t),e,r,i);return o}function a(e,t,r,i){var o=n._charsWritten=P(A(t),e,r,i);return o}function s(e,t,r,n){return a(e,t,r,n)}function l(e,t,r,i){var o=n._charsWritten=P(D(t),e,r,i);return o}function u(e,t,r,i){var o=n._charsWritten=P(F(t),e,r,i);return o}function c(e,t,r){return V.fromByteArray(0===t&&r===e.length?e:e.slice(t,r))}function p(e,t,r){var n="",i="";r=Math.min(e.length,r);for(var o=t;r>o;o++)e[o]>127?i+="%"+e[o].toString(16):(n+=U(i)+String.fromCharCode(e[o]),i="");return n+U(i)}function f(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;r>i;i++)n+=String.fromCharCode(e[i]);return n}function d(e,t,r){return f(e,t,r)}function h(e,t,r){var n=e.length;(!t||0>t)&&(t=0),(!r||0>r||r>n)&&(r=n);for(var i="",o=t;r>o;o++)i+=O(e[o]);return i}function v(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function g(e,t,r,n){n||(q("boolean"==typeof r,"missing or invalid endian"),q(void 0!==t&&null!==t,"missing offset"),q(t+1<e.length,"Trying to read beyond buffer length"));var i=e.length;if(i>t){var o;return r?(o=e[t],i>t+1&&(o|=e[t+1]<<8)):(o=e[t]<<8,i>t+1&&(o|=e[t+1])),o}}function y(e,t,r,n){n||(q("boolean"==typeof r,"missing or invalid endian"),q(void 0!==t&&null!==t,"missing offset"),q(t+3<e.length,"Trying to read beyond buffer length"));var i=e.length;if(i>t){var o;return r?(i>t+2&&(o=e[t+2]<<16),i>t+1&&(o|=e[t+1]<<8),o|=e[t],i>t+3&&(o+=e[t+3]<<24>>>0)):(i>t+1&&(o=e[t+1]<<16),i>t+2&&(o|=e[t+2]<<8),i>t+3&&(o|=e[t+3]),o+=e[t]<<24>>>0),o}}function b(e,t,r,n){n||(q("boolean"==typeof r,"missing or invalid endian"),q(void 0!==t&&null!==t,"missing offset"),q(t+1<e.length,"Trying to read beyond buffer length"));var i=e.length;if(i>t){var o=g(e,t,r,!0),a=32768&o;return a?-1*(65535-o+1):o}}function m(e,t,r,n){n||(q("boolean"==typeof r,"missing or invalid endian"),q(void 0!==t&&null!==t,"missing offset"),q(t+3<e.length,"Trying to read beyond buffer length"));var i=e.length;if(i>t){var o=y(e,t,r,!0),a=2147483648&o;return a?-1*(4294967295-o+1):o}}function x(e,t,r,n){return n||(q("boolean"==typeof r,"missing or invalid endian"),q(t+3<e.length,"Trying to read beyond buffer length")),z.read(e,t,r,23,4)}function k(e,t,r,n){return n||(q("boolean"==typeof r,"missing or invalid endian"),q(t+7<e.length,"Trying to read beyond buffer length")),z.read(e,t,r,52,8)}function $(e,t,r,n,i){i||(q(void 0!==t&&null!==t,"missing value"),q("boolean"==typeof n,"missing or invalid endian"),q(void 0!==r&&null!==r,"missing offset"),q(r+1<e.length,"trying to write beyond buffer length"),B(t,65535));var o=e.length;if(o>r)for(var a=0,s=Math.min(o-r,2);s>a;a++)e[r+a]=(t&255<<8*(n?a:1-a))>>>8*(n?a:1-a)}function w(e,t,r,n,i){i||(q(void 0!==t&&null!==t,"missing value"),q("boolean"==typeof n,"missing or invalid endian"),q(void 0!==r&&null!==r,"missing offset"),q(r+3<e.length,"trying to write beyond buffer length"),B(t,4294967295));var o=e.length;if(o>r)for(var a=0,s=Math.min(o-r,4);s>a;a++)e[r+a]=t>>>8*(n?a:3-a)&255}function _(e,t,r,n,i){i||(q(void 0!==t&&null!==t,"missing value"),q("boolean"==typeof n,"missing or invalid endian"),q(void 0!==r&&null!==r,"missing offset"),q(r+1<e.length,"Trying to write beyond buffer length"),M(t,32767,-32768));var o=e.length;o>r&&(0>t?$(e,65535+t+1,r,n,i):$(e,t,r,n,i))}function E(e,t,r,n,i){i||(q(void 0!==t&&null!==t,"missing value"),q("boolean"==typeof n,"missing or invalid endian"),q(void 0!==r&&null!==r,"missing offset"),q(r+3<e.length,"Trying to write beyond buffer length"),M(t,2147483647,-2147483648));var o=e.length;o>r&&(0>t?w(e,4294967295+t+1,r,n,i):w(e,t,r,n,i))}function I(e,t,r,n,i){i||(q(void 0!==t&&null!==t,"missing value"),q("boolean"==typeof n,"missing or invalid endian"),q(void 0!==r&&null!==r,"missing offset"),q(r+3<e.length,"Trying to write beyond buffer length"),G(t,3.4028234663852886e38,-3.4028234663852886e38));var o=e.length;o>r&&z.write(e,t,r,n,23,4)}function T(e,t,r,n,i){i||(q(void 0!==t&&null!==t,"missing value"),q("boolean"==typeof n,"missing or invalid endian"),q(void 0!==r&&null!==r,"missing offset"),q(r+7<e.length,"Trying to write beyond buffer length"),G(t,1.7976931348623157e308,-1.7976931348623157e308));var o=e.length;o>r&&z.write(e,t,r,n,52,8)}function j(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function S(e,t,r){return"number"!=typeof e?r:(e=~~e,t>e?0>e?(e+=t,0>e?0:e):e:t)}function L(e){return e=~~Math.ceil(+e),0>e?0:e}function N(e){return(Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)})(e)}function C(e){return N(e)||n.isBuffer(e)||e&&"object"==typeof e&&"number"==typeof e.length}function O(e){return 16>e?"0"+e.toString(16):e.toString(16)}function R(e){for(var t=[],r=0;r<e.length;r++){var n=e.charCodeAt(r);if(127<n){var i=r;55296>n||n>57343||r++;for(var o=encodeURIComponent(e.slice(i,r+1)).substr(1).split("%"),a=0;a<o.length;a++)t.push(parseInt(o[a],16))}else t.push(e.charCodeAt(r))}return t}function A(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t}function F(e){for(var t,r,n,i=[],o=0;o<e.length;o++)t=e.charCodeAt(o),r=t>>8,n=t%256,i.push(n),i.push(r);return i}function D(e){return V.toByteArray(e)}function P(e,t,r,n){for(var i=0;n>i&&(i+r<t.length&&i<e.length);i++)t[i+r]=e[i];return i}function U(e){try{return decodeURIComponent(e)}catch(t){return String.fromCharCode(65533)}}function B(e,t){q("number"==typeof e,"cannot write a non-number as a number"),q(e>=0,"specified a negative value for writing an unsigned value"),q(t>=e,"value is larger than maximum value for type"),q(Math.floor(e)===e,"value has a fractional component")}function M(e,t,r){q("number"==typeof e,"cannot write a non-number as a number"),q(t>=e,"value larger than maximum allowed value"),q(e>=r,"value smaller than minimum allowed value"),q(Math.floor(e)===e,"value has a fractional component")}function G(e,t,r){q("number"==typeof e,"cannot write a non-number as a number"),q(t>=e,"value larger than maximum allowed value"),q(e>=r,"value smaller than minimum allowed value")}function q(e,t){if(!e)throw Error(t||"Failed assertion")}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var V=e("base64-js"),z=e("ieee754");r.Buffer=n,r.SlowBuffer=n,r.INSPECT_MAX_BYTES=50,n.poolSize=8192,n._useTypedArrays=function(){try{var e=new ArrayBuffer(0),t=new Uint8Array(e);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray}catch(r){return!1}}(),n.isEncoding=function(e){switch((e+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.isBuffer=function(e){return!(null===e||void 0===e||!e._isBuffer)},n.byteLength=function(e,t){var r;switch(e+="",t||"utf8"){case"hex":r=e.length/2;break;case"utf8":case"utf-8":r=R(e).length;break;case"ascii":case"binary":case"raw":r=e.length;break;case"base64":r=D(e).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=2*e.length;break;default:throw Error("Unknown encoding")}return r},n.concat=function(e,t){if(q(N(e),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===e.length)return new n(0);if(1===e.length)return e[0];var r;if("number"!=typeof t)for(t=0,r=0;r<e.length;r++)t+=e[r].length;var i=new n(t),o=0;for(r=0;r<e.length;r++){var a=e[r];a.copy(i,o),o+=a.length}return i},n.prototype.write=function(e,t,r,n){if(isFinite(t))isFinite(r)||(n=r,r=void 0);else{var c=n;n=t,t=r,r=c}t=+t||0;var p=this.length-t;r?(r=+r,r>p&&(r=p)):r=p,n=((n||"utf8")+"").toLowerCase();var f;switch(n){case"hex":f=i(this,e,t,r);break;case"utf8":case"utf-8":f=o(this,e,t,r);break;case"ascii":f=a(this,e,t,r);break;case"binary":f=s(this,e,t,r);break;case"base64":f=l(this,e,t,r);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":f=u(this,e,t,r);break;default:throw Error("Unknown encoding")}return f},n.prototype.toString=function(e,t,r){var n=this;if(e=((e||"utf8")+"").toLowerCase(),t=+t||0,r=void 0!==r?+r:r=n.length,r===t)return"";var i;switch(e){case"hex":i=h(n,t,r);break;case"utf8":case"utf-8":i=p(n,t,r);break;case"ascii":i=f(n,t,r);break;case"binary":i=d(n,t,r);break;case"base64":i=c(n,t,r);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":i=v(n,t,r);break;default:throw Error("Unknown encoding")}return i},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},n.prototype.copy=function(e,t,r,i){var o=this;if(r||(r=0),i||0===i||(i=this.length),t||(t=0),i!==r&&0!==e.length&&0!==o.length){q(i>=r,"sourceEnd < sourceStart"),q(t>=0&&t<e.length,"targetStart out of bounds"),q(r>=0&&r<o.length,"sourceStart out of bounds"),q(i>=0&&i<=o.length,"sourceEnd out of bounds"),i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);var a=i-r;if(100>a||!n._useTypedArrays)for(var s=0;a>s;s++)e[s+t]=this[s+r];else e._set(this.subarray(r,r+a),t)}},n.prototype.slice=function(e,t){var r=this.length;if(e=S(e,r,0),t=S(t,r,r),n._useTypedArrays)return n._augment(this.subarray(e,t));for(var i=t-e,o=new n(i,void 0,!0),a=0;i>a;a++)o[a]=this[a+e];return o},n.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},n.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},n.prototype.readUInt8=function(e,t){return t||(q(void 0!==e&&null!==e,"missing offset"),q(e<this.length,"Trying to read beyond buffer length")),e<this.length?this[e]:void 0},n.prototype.readUInt16LE=function(e,t){return g(this,e,!0,t)},n.prototype.readUInt16BE=function(e,t){return g(this,e,!1,t)},n.prototype.readUInt32LE=function(e,t){return y(this,e,!0,t)},n.prototype.readUInt32BE=function(e,t){return y(this,e,!1,t)},n.prototype.readInt8=function(e,t){if(t||(q(void 0!==e&&null!==e,"missing offset"),q(e<this.length,"Trying to read beyond buffer length")),e<this.length){var r=128&this[e];return r?-1*(255-this[e]+1):this[e]}},n.prototype.readInt16LE=function(e,t){return b(this,e,!0,t)},n.prototype.readInt16BE=function(e,t){return b(this,e,!1,t)},n.prototype.readInt32LE=function(e,t){return m(this,e,!0,t)},n.prototype.readInt32BE=function(e,t){return m(this,e,!1,t)},n.prototype.readFloatLE=function(e,t){return x(this,e,!0,t)},n.prototype.readFloatBE=function(e,t){return x(this,e,!1,t)},n.prototype.readDoubleLE=function(e,t){return k(this,e,!0,t)},n.prototype.readDoubleBE=function(e,t){return k(this,e,!1,t)},n.prototype.writeUInt8=function(e,t,r){r||(q(void 0!==e&&null!==e,"missing value"),q(void 0!==t&&null!==t,"missing offset"),q(t<this.length,"trying to write beyond buffer length"),B(e,255)),t<this.length&&(this[t]=e)},n.prototype.writeUInt16LE=function(e,t,r){$(this,e,t,!0,r)},n.prototype.writeUInt16BE=function(e,t,r){$(this,e,t,!1,r)},n.prototype.writeUInt32LE=function(e,t,r){w(this,e,t,!0,r)},n.prototype.writeUInt32BE=function(e,t,r){w(this,e,t,!1,r)},n.prototype.writeInt8=function(e,t,r){r||(q(void 0!==e&&null!==e,"missing value"),q(void 0!==t&&null!==t,"missing offset"),q(t<this.length,"Trying to write beyond buffer length"),M(e,127,-128)),t<this.length&&(0>e?this.writeUInt8(255+e+1,t,r):this.writeUInt8(e,t,r))},n.prototype.writeInt16LE=function(e,t,r){_(this,e,t,!0,r)},n.prototype.writeInt16BE=function(e,t,r){_(this,e,t,!1,r)},n.prototype.writeInt32LE=function(e,t,r){E(this,e,t,!0,r)},n.prototype.writeInt32BE=function(e,t,r){E(this,e,t,!1,r)},n.prototype.writeFloatLE=function(e,t,r){I(this,e,t,!0,r)},n.prototype.writeFloatBE=function(e,t,r){I(this,e,t,!1,r)},n.prototype.writeDoubleLE=function(e,t,r){T(this,e,t,!0,r)},n.prototype.writeDoubleBE=function(e,t,r){T(this,e,t,!1,r)},n.prototype.fill=function(e,t,r){if(e||(e=0),t||(t=0),r||(r=this.length),"string"==typeof e&&(e=e.charCodeAt(0)),q("number"==typeof e&&!isNaN(e),"value is not a number"),q(r>=t,"end < start"),r!==t&&0!==this.length){q(t>=0&&t<this.length,"start out of bounds"),q(r>=0&&r<=this.length,"end out of bounds");for(var n=t;r>n;n++)this[n]=e}},n.prototype.inspect=function(){for(var e=[],t=this.length,n=0;t>n;n++)if(e[n]=O(this[n]),n===r.INSPECT_MAX_BYTES){e[n+1]="...";break}return"<Buffer "+e.join(" ")+">"},n.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(n._useTypedArrays)return new n(this).buffer;for(var e=new Uint8Array(this.length),t=0,r=e.length;r>t;t+=1)e[t]=this[t];return e.buffer}throw Error("Buffer.toArrayBuffer not supported in this browser")};var J=n.prototype;n._augment=function(e){return e._isBuffer=!0,e._get=e.get,e._set=e.set,e.get=J.get,e.set=J.set,e.write=J.write,e.toString=J.toString,e.toLocaleString=J.toString,e.toJSON=J.toJSON,e.copy=J.copy,e.slice=J.slice,e.readUInt8=J.readUInt8,e.readUInt16LE=J.readUInt16LE,e.readUInt16BE=J.readUInt16BE,e.readUInt32LE=J.readUInt32LE,e.readUInt32BE=J.readUInt32BE,e.readInt8=J.readInt8,e.readInt16LE=J.readInt16LE,e.readInt16BE=J.readInt16BE,e.readInt32LE=J.readInt32LE,e.readInt32BE=J.readInt32BE,e.readFloatLE=J.readFloatLE,e.readFloatBE=J.readFloatBE,e.readDoubleLE=J.readDoubleLE,e.readDoubleBE=J.readDoubleBE,e.writeUInt8=J.writeUInt8,e.writeUInt16LE=J.writeUInt16LE,e.writeUInt16BE=J.writeUInt16BE,e.writeUInt32LE=J.writeUInt32LE,e.writeUInt32BE=J.writeUInt32BE,e.writeInt8=J.writeInt8,e.writeInt16LE=J.writeInt16LE,e.writeInt16BE=J.writeInt16BE,e.writeInt32LE=J.writeInt32LE,e.writeInt32BE=J.writeInt32BE,e.writeFloatLE=J.writeFloatLE,e.writeFloatBE=J.writeFloatBE,e.writeDoubleLE=J.writeDoubleLE,e.writeDoubleBE=J.writeDoubleBE,e.fill=J.fill,e.inspect=J.inspect,e.toArrayBuffer=J.toArrayBuffer,e}},{"base64-js":3,ieee754:4}],3:[function(e,t,r){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===a||t===p?62:t===s||t===f?63:l>t?-1:l+10>t?t-l+26+26:c+26>t?t-c:u+26>t?t-u+26:void 0}function r(e){function r(e){u[p++]=e}var n,i,a,s,l,u;if(e.length%4>0)throw Error("Invalid string. Length must be a multiple of 4");var c=e.length;l="="===e.charAt(c-2)?2:"="===e.charAt(c-1)?1:0,u=new o(3*e.length/4-l),a=l>0?e.length-4:e.length;var p=0;for(n=0,i=0;a>n;n+=4,i+=3)s=t(e.charAt(n))<<18|t(e.charAt(n+1))<<12|t(e.charAt(n+2))<<6|t(e.charAt(n+3)),r((16711680&s)>>16),r((65280&s)>>8),r(255&s);return 2===l?(s=t(e.charAt(n))<<2|t(e.charAt(n+1))>>4,r(255&s)):1===l&&(s=t(e.charAt(n))<<10|t(e.charAt(n+1))<<4|t(e.charAt(n+2))>>2,r(s>>8&255),r(255&s)),u}function i(e){function t(e){return n.charAt(e)}function r(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var i,o,a,s=e.length%3,l="";for(i=0,a=e.length-s;a>i;i+=3)o=(e[i]<<16)+(e[i+1]<<8)+e[i+2],l+=r(o);switch(s){case 1:o=e[e.length-1],l+=t(o>>2),l+=t(o<<4&63),l+="==";break;case 2:o=(e[e.length-2]<<8)+e[e.length-1],l+=t(o>>10),l+=t(o>>4&63),l+=t(o<<2&63),l+="="}return l}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="+".charCodeAt(0),s="/".charCodeAt(0),l="0".charCodeAt(0),u="a".charCodeAt(0),c="A".charCodeAt(0),p="-".charCodeAt(0),f="_".charCodeAt(0);e.toByteArray=r,e.fromByteArray=i}(void 0===r?this.base64js={}:r)},{}],4:[function(e,t,r){r.read=function(e,t,r,n,i){var o,a,s=8*i-n-1,l=(1<<s)-1,u=l>>1,c=-7,p=r?i-1:0,f=r?-1:1,d=e[t+p];for(p+=f,o=d&(1<<-c)-1,d>>=-c,c+=s;c>0;o=256*o+e[t+p],p+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=256*a+e[t+p],p+=f,c-=8);if(0===o)o=1-u;else{if(o===l)return a?0/0:1/0*(d?-1:1);a+=Math.pow(2,n),o-=u}return(d?-1:1)*a*Math.pow(2,o-n)},r.write=function(e,t,r,n,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,p=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,h=n?1:-1,v=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||1/0===t?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),t+=1>a+p?f*Math.pow(2,1-p):f/l,2>t*l||(a++,l/=2),c>a+p?1>a+p?(s=t*Math.pow(2,p-1)*Math.pow(2,i),a=0):(s=(t*l-1)*Math.pow(2,i),a+=p):(s=0,a=c));i>=8;e[r+d]=255&s,d+=h,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[r+d]=255&a,d+=h,a/=256,u-=8);e[r+d-h]|=128*v}},{}],5:[function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function i(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,i,s,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(r=this._events[e],a(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,s=Array(i-1),l=1;i>l;l++)s[l-1]=arguments[l];r.apply(this,s)}else if(o(r)){for(i=arguments.length,s=Array(i-1),l=1;i>l;l++)s[l-1]=arguments[l];for(u=r.slice(),i=u.length,l=0;i>l;l++)u[l].apply(this,s)}return!0},r.prototype.addListener=function(e,t){var i;if(!n(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned){var i;i=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function r(){this.removeListener(e,r),i||(i=!0,t.apply(this,arguments))}if(!n(t))throw TypeError("listener must be a function");var i=!1;return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var r,i,a,s;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],a=r.length,i=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(r)){for(s=a;s-->0;)if(r[s]===t||r[s].listener&&r[s].listener===t){i=s;break}if(0>i)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],n(r))this.removeListener(e,r);else for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.listenerCount=function(e,t){var r;return r=e._events&&e._events[t]?n(e._events[t])?1:e._events[t].length:0}},{}],6:[function(e,t){var r=t.exports,n=(e("events").EventEmitter,e("./lib/request")),i=e("url");r.request=function(e,t){"string"==typeof e&&(e=i.parse(e)),e||(e={}),e.host||e.port||(e.port=parseInt(window.location.port,10)),!e.host&&e.hostname&&(e.host=e.hostname),e.scheme||(e.scheme=window.location.protocol.split(":")[0]),e.host||(e.host=window.location.hostname||window.location.host),/:/.test(e.host)&&(e.port||(e.port=e.host.split(":")[1]),e.host=e.host.split(":")[0]),e.port||(e.port="https"==e.scheme?443:80);var r=new n(new o,e);return t&&r.on("response",t),r},r.get=function(e,t){e.method="GET";var n=r.request(e,t);return n.end(),n},r.Agent=function(){},r.Agent.defaultMaxSockets=4;var o=function(){if("undefined"==typeof window)throw Error("no window object present");if(window.XMLHttpRequest)return window.XMLHttpRequest;if(window.ActiveXObject){for(var e=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"],t=0;t<e.length;t++)try{var r=new window.ActiveXObject(e[t]);return function(){if(r){var n=r;return r=null,n}return new window.ActiveXObject(e[t])}}catch(n){}throw Error("ajax not supported in this browser")}throw Error("ajax not supported in this browser")}();r.STATUS_CODES={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{"./lib/request":7,events:5,url:28}],7:[function(e,t){var r=e("stream"),n=e("./response"),i=e("Base64"),o=e("inherits"),a=t.exports=function(e,t){var r=this;r.writable=!0,r.xhr=e,r.body=[],r.uri=(t.scheme||"http")+"://"+t.host+(t.port?":"+t.port:"")+(t.path||"/"),void 0===t.withCredentials&&(t.withCredentials=!0);try{e.withCredentials=t.withCredentials}catch(o){}if(e.open(t.method||"GET",r.uri,!0),r._headers={},t.headers)for(var a=s(t.headers),l=0;l<a.length;l++){var u=a[l];if(r.isSafeRequestHeader(u)){var c=t.headers[u];r.setHeader(u,c)}}t.auth&&this.setHeader("Authorization","Basic "+i.btoa(t.auth));var p=new n;p.on("close",function(){r.emit("close")}),p.on("ready",function(){r.emit("response",p)}),e.onreadystatechange=function(){e.__aborted||p.handle(e)}};o(a,r),a.prototype.setHeader=function(e,t){this._headers[e.toLowerCase()]=t},a.prototype.getHeader=function(e){return this._headers[e.toLowerCase()]},a.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},a.prototype.write=function(e){this.body.push(e)},a.prototype.destroy=function(){this.xhr.__aborted=!0,this.xhr.abort(),this.emit("close")},a.prototype.end=function(e){void 0!==e&&this.body.push(e);for(var t=s(this._headers),r=0;r<t.length;r++){var n=t[r],i=this._headers[n];if(l(i))for(var o=0;o<i.length;o++)this.xhr.setRequestHeader(n,i[o]);else this.xhr.setRequestHeader(n,i)}if(0===this.body.length)this.xhr.send("");else if("string"==typeof this.body[0])this.xhr.send(this.body.join(""));else if(l(this.body[0])){for(var a=[],r=0;r<this.body.length;r++)a.push.apply(a,this.body[r]);this.xhr.send(a)}else if(/Array/.test(Object.prototype.toString.call(this.body[0]))){for(var u=0,r=0;r<this.body.length;r++)u+=this.body[r].length;for(var a=new this.body[0].constructor(u),c=0,r=0;r<this.body.length;r++)for(var p=this.body[r],o=0;o<p.length;o++)a[c++]=p[o];this.xhr.send(a)}else{for(var a="",r=0;r<this.body.length;r++)a+=""+this.body[r];this.xhr.send(a)}},a.unsafeHeaders=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"],a.prototype.isSafeRequestHeader=function(e){return e?-1===u(a.unsafeHeaders,e.toLowerCase()):!1};var s=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t},l=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},u=function(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0;r<e.length;r++)if(e[r]===t)return r;return-1}},{"./response":8,Base64:9,inherits:11,stream:19}],8:[function(e,t){function r(e){for(var t=e.getAllResponseHeaders().split(/\r?\n/),r={},n=0;n<t.length;n++){var i=t[n];if(""!==i){var o=i.match(/^([^:]+):\s*(.*)/);if(o){var a=o[1].toLowerCase(),l=o[2];void 0!==r[a]?s(r[a])?r[a].push(l):r[a]=[r[a],l]:r[a]=l}else r[i]=!0}}return r}var n=e("stream"),i=e("util"),o=t.exports=function(){this.offset=0,this.readable=!0};i.inherits(o,n);var a={streaming:!0,status2:!0};o.prototype.getResponse=function(e){var t=(e.responseType+"").toLowerCase();return"blob"===t?e.responseBlob||e.response:"arraybuffer"===t?e.response:e.responseText},o.prototype.getHeader=function(e){return this.headers[e.toLowerCase()]},o.prototype.handle=function(e){if(2===e.readyState&&a.status2){try{this.statusCode=e.status,this.headers=r(e)}catch(t){a.status2=!1}a.status2&&this.emit("ready")}else if(a.streaming&&3===e.readyState){try{this.statusCode||(this.statusCode=e.status,this.headers=r(e),this.emit("ready"))}catch(t){}try{this._emitData(e)}catch(t){a.streaming=!1}}else 4===e.readyState&&(this.statusCode||(this.statusCode=e.status,this.emit("ready")),this._emitData(e),e.error?this.emit("error",this.getResponse(e)):this.emit("end"),this.emit("close"))},o.prototype._emitData=function(e){var t=this.getResponse(e);return(""+t).match(/ArrayBuffer/)?(this.emit("data",new Uint8Array(t,this.offset)),void(this.offset=t.byteLength)):void(t.length>this.offset&&(this.emit("data",t.slice(this.offset)),this.offset=t.length))};var s=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{stream:19,util:30}],9:[function(e,t,r){!function(){function e(e){this.message=e}var t=void 0!==r?r:this,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.prototype=Error(),e.prototype.name="InvalidCharacterError",t.btoa||(t.btoa=function(t){for(var r,i,o=0,a=n,s="";t.charAt(0|o)||(a="=",o%1);s+=a.charAt(63&r>>8-o%1*8)){if(i=t.charCodeAt(o+=.75),i>255)throw new e("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");r=r<<8|i}return s}),t.atob||(t.atob=function(t){if(t=t.replace(/=+$/,""),t.length%4==1)throw new e("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,i,o=0,a=0,s="";i=t.charAt(a++);~i&&(r=o%4?64*r+i:i,o++%4)?s+=String.fromCharCode(255&r>>(-2*o&6)):0)i=n.indexOf(i);return s})}()},{}],10:[function(e,t){var r=e("http"),n=t.exports;for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i]);n.request=function(e,t){return e||(e={}),e.scheme="https",r.request.call(this,e,t)}},{http:6}],11:[function(e,t){t.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],12:[function(e,t,r){(function(e){function t(e,t){for(var r=0,n=e.length-1;n>=0;n--){var i=e[n];"."===i?e.splice(n,1):".."===i?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function n(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(e){return i.exec(e).slice(1)};r.resolve=function(){for(var r="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=0>o?e.cwd():arguments[o];if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(r=a+"/"+r,i="/"===a.charAt(0))}return r=t(n(r.split("/"),function(e){return!!e}),!i).join("/"),(i?"/":"")+r||"."},r.normalize=function(e){var i=r.isAbsolute(e),o="/"===a(e,-1);return e=t(n(e.split("/"),function(e){return!!e}),!i).join("/"),e||i||(e="."),e&&o&&(e+="/"),(i?"/":"")+e},r.isAbsolute=function(e){return"/"===e.charAt(0)},r.join=function(){var e=Array.prototype.slice.call(arguments,0);return r.normalize(n(e,function(e){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},r.relative=function(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=r.resolve(e).substr(1),t=r.resolve(t).substr(1);for(var i=n(e.split("/")),o=n(t.split("/")),a=Math.min(i.length,o.length),s=a,l=0;a>l;l++)if(i[l]!==o[l]){s=l;break}for(var u=[],l=s;l<i.length;l++)u.push("..");return u=u.concat(o.slice(s)),u.join("/")},r.sep="/",r.delimiter=":",r.dirname=function(e){var t=o(e),r=t[0],n=t[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},r.basename=function(e,t){var r=o(e)[2];return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},r.extname=function(e){return o(e)[3]};var a="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return 0>t&&(t=e.length+t),e.substr(t,r)}}).call(this,e("1YiZ5S"))},{"1YiZ5S":13}],13:[function(e,t){function r(){}var n=t.exports={};n.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var r=[];return window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),r.length>0)){var n=r.shift();n()}},!0),function(e){r.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.on=r,n.addListener=r,n.once=r,n.off=r,n.removeListener=r,n.removeAllListeners=r,n.emit=r,n.binding=function(){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(){throw Error("process.chdir is not supported")}},{}],14:[function(e,t,r){(function(e){!function(n){function i(e){throw RangeError(O[e])}function o(e,t){for(var r=e.length;r--;)e[r]=t(e[r]);return e}function a(e,t){return o(e.split(C),t).join(".")}function s(e){for(var t,r,n=[],i=0,o=e.length;o>i;)t=e.charCodeAt(i++),55296>t||t>56319||i>=o?n.push(t):(r=e.charCodeAt(i++),56320==(64512&r)?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--));return n}function l(e){return o(e,function(e){var t="";return e>65535&&(e-=65536,t+=F(e>>>10&1023|55296),e=56320|1023&e),t+=F(e)}).join("")}function u(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:$}function c(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function p(e,t,r){var n=0;for(e=r?A(e/I):e>>1,e+=A(e/t);e>R*_>>1;n+=$)e=A(e/R);return A(n+(R+1)*e/(e+E))}function f(e){var t,r,n,o,a,s,c,f,d,h,v=[],g=e.length,y=0,b=j,m=T;for(r=e.lastIndexOf(S),0>r&&(r=0),n=0;r>n;++n)e.charCodeAt(n)<128||i("not-basic"),v.push(e.charCodeAt(n));for(o=r>0?r+1:0;g>o;){for(a=y,s=1,c=$;g>o||i("invalid-input"),f=u(e.charCodeAt(o++)),(f>=$||f>A((k-y)/s))&&i("overflow"),y+=f*s,d=c>m?m+_>c?c-m:_:w,d<=f;c+=$)h=$-d,s>A(k/h)&&i("overflow"),s*=h;t=v.length+1,m=p(y-a,t,0==a),A(y/t)>k-b&&i("overflow"),b+=A(y/t),y%=t,v.splice(y++,0,b)}return l(v)}function d(e){var t,r,n,o,a,l,u,f,d,h,v,g,y,b,m,x=[];for(e=s(e),g=e.length,t=j,r=0,a=T,l=0;g>l;++l)v=e[l],128>v&&x.push(F(v));for(n=o=x.length,o&&x.push(S);g>n;){for(u=k,l=0;g>l;++l)v=e[l],v>=t&&u>v&&(u=v);for(y=n+1,u-t>A((k-r)/y)&&i("overflow"),r+=(u-t)*y,t=u,l=0;g>l;++l)if(v=e[l],t>v&&++r>k&&i("overflow"),v==t){for(f=r,d=$;h=d>a?a+_>d?d-a:_:w,h<=f;d+=$)m=f-h,b=$-h,x.push(F(c(h+m%b,0))),f=A(m/b);x.push(F(c(f,0))),a=p(r,y,n==o),r=0,++n}++r,++t}return x.join("")}function h(e){return a(e,function(e){return L.test(e)?f(e.slice(4).toLowerCase()):e})}function v(e){return a(e,function(e){return N.test(e)?"xn--"+d(e):e})}var g="object"==typeof r&&r,y="object"==typeof t&&t&&t.exports==g&&t,b="object"==typeof e&&e;(b.global===b||b.window===b)&&(n=b);var m,x,k=2147483647,$=36,w=1,_=26,E=38,I=700,T=72,j=128,S="-",L=/^xn--/,N=/[^ -~]/,C=/\x2E|\u3002|\uFF0E|\uFF61/g,O={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=$-w,A=Math.floor,F=String.fromCharCode;if(m={version:"1.2.4",ucs2:{decode:s,encode:l},decode:f,encode:d,toASCII:v,toUnicode:h},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return m});else if(g&&!g.nodeType)if(y)y.exports=m;else for(x in m)m.hasOwnProperty(x)&&(g[x]=m[x]);else n.punycode=m}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],15:[function(e,t){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,i,o){t=t||"&",i=i||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var l=1e3;o&&"number"==typeof o.maxKeys&&(l=o.maxKeys);var u=e.length;l>0&&u>l&&(u=l);for(var c=0;u>c;++c){var p,f,d,h,v=e[c].replace(s,"%20"),g=v.indexOf(i);0>g?(p=v,f=""):(p=v.substr(0,g),f=v.substr(g+1)),d=decodeURIComponent(p),h=decodeURIComponent(f),r(a,d)?n(a[d])?a[d].push(h):a[d]=[a[d],h]:a[d]=h}return a};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],16:[function(e,t){"use strict";function r(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,a,s){return t=t||"&",a=a||"=",null===e&&(e=void 0),"object"==typeof e?r(o(e),function(r){var o=encodeURIComponent(n(r))+a;return i(e[r])?e[r].map(function(e){return o+encodeURIComponent(n(e))}).join(t):o+encodeURIComponent(n(e[r]))}).join(t):s?encodeURIComponent(n(s))+a+encodeURIComponent(n(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},{}],17:[function(e,t,r){"use strict";r.decode=r.parse=e("./decode"),r.encode=r.stringify=e("./encode")},{"./decode":15,"./encode":16}],18:[function(e,t){function r(e){return this instanceof r?(a.call(this,e),s.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",n)):new r(e)}function n(){if(!this.allowHalfOpen&&!this._writableState.ended){var e=this;o(function(){e.end()})}}t.exports=r;var i=e("inherits"),o=e("process/browser.js").nextTick,a=e("./readable.js"),s=e("./writable.js");i(r,a),r.prototype.write=s.prototype.write,r.prototype.end=s.prototype.end,r.prototype._write=s.prototype._write},{"./readable.js":22,"./writable.js":24,inherits:11,"process/browser.js":20}],19:[function(e,t){function r(){n.call(this)}t.exports=r;var n=e("events").EventEmitter,i=e("inherits");i(r,n),r.Readable=e("./readable.js"),r.Writable=e("./writable.js"),r.Duplex=e("./duplex.js"),r.Transform=e("./transform.js"),r.PassThrough=e("./passthrough.js"),r.Stream=r,r.prototype.pipe=function(e,t){function r(t){e.writable&&!1===e.write(t)&&u.pause&&u.pause()}function i(){u.readable&&u.resume&&u.resume()}function o(){c||(c=!0,e.end())}function a(){c||(c=!0,"function"==typeof e.destroy&&e.destroy())}function s(e){if(l(),0===n.listenerCount(this,"error"))throw e}function l(){u.removeListener("data",r),e.removeListener("drain",i),u.removeListener("end",o),u.removeListener("close",a),u.removeListener("error",s),e.removeListener("error",s),u.removeListener("end",l),u.removeListener("close",l),e.removeListener("close",l)}var u=this;u.on("data",r),e.on("drain",i),e._isStdio||t&&t.end===!1||(u.on("end",o),u.on("close",a));var c=!1;return u.on("error",s),e.on("error",s),u.on("end",l),u.on("close",l),e.on("close",l),e.emit("pipe",u),e}},{"./duplex.js":18,"./passthrough.js":21,"./readable.js":22,"./transform.js":23,"./writable.js":24,events:5,inherits:11}],20:[function(e,t){var r=t.exports={};r.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var r=[];return window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),r.length>0)){var n=r.shift();n()}},!0),function(e){r.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.binding=function(){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw Error("process.chdir is not supported")}},{}],21:[function(e,t){function r(e){return this instanceof r?void n.call(this,e):new r(e)}t.exports=r;var n=e("./transform.js"),i=e("inherits");i(r,n),r.prototype._transform=function(e,t,r){r(null,e)}},{"./transform.js":23,inherits:11}],22:[function(e,t){(function(r){function n(t){t=t||{};var r=t.highWaterMark;this.highWaterMark=r||0===r?r:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!t.objectMode,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(w||(w=e("string_decoder").StringDecoder),this.decoder=new w(t.encoding),this.encoding=t.encoding)}function i(e){return this instanceof i?(this._readableState=new n(e,this),this.readable=!0,void E.call(this)):new i(e)
}function o(e,t,r,n,i){var o=u(t,r);if(o)e.emit("error",o);else if(null===r||void 0===r)t.reading=!1,t.ended||c(e,t);else if(t.objectMode||r&&r.length>0)if(t.ended&&!i){var s=Error("stream.push() after EOF");e.emit("error",s)}else if(t.endEmitted&&i){var s=Error("stream.unshift() after end event");e.emit("error",s)}else!t.decoder||i||n||(r=t.decoder.write(r)),t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):(t.reading=!1,t.buffer.push(r)),t.needReadable&&p(e),d(e,t);else i||(t.reading=!1);return a(t)}function a(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function s(e){if(e<S){e--;for(var t=1;32>t;t<<=1)e|=e>>t;e++}else e=S;return e}function l(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:isNaN(e)||null===e?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:e>0?(e>t.highWaterMark&&(t.highWaterMark=s(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e):0}function u(e,t){var r=null;return I.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||r||(r=new TypeError("Invalid non-string/buffer chunk")),r}function c(e,t){if(t.decoder&&!t.ended){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.length>0?p(e):x(e)}function p(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,t.sync?T(function(){f(e)}):f(e))}function f(e){e.emit("readable")}function d(e,t){t.readingMore||(t.readingMore=!0,T(function(){h(e,t)}))}function h(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function v(e){return function(){var t=e._readableState;t.awaitDrain--,0===t.awaitDrain&&g(e)}}function g(e){function t(e){var t=e.write(r);!1===t&&n.awaitDrain++}var r,n=e._readableState;for(n.awaitDrain=0;n.pipesCount&&null!==(r=e.read());)if(1===n.pipesCount?t(n.pipes,0,null):k(n.pipes,t),e.emit("data",r),n.awaitDrain>0)return;return 0===n.pipesCount?(n.flowing=!1,void(_.listenerCount(e,"data")>0&&b(e))):void(n.ranOut=!0)}function y(){this._readableState.ranOut&&(this._readableState.ranOut=!1,g(this))}function b(e,t){var r=e._readableState;if(r.flowing)throw Error("Cannot switch to old mode now.");var n=t||!1,i=!1;e.readable=!0,e.pipe=E.prototype.pipe,e.on=e.addListener=E.prototype.on,e.on("readable",function(){i=!0;for(var t;!n&&null!==(t=e.read());)e.emit("data",t);null===t&&(i=!1,e._readableState.needReadable=!0)}),e.pause=function(){n=!0,this.emit("pause")},e.resume=function(){n=!1,i?T(function(){e.emit("readable")}):this.read(0),this.emit("resume")},e.emit("readable")}function m(e,t){var r,n=t.buffer,i=t.length,o=!!t.decoder,a=!!t.objectMode;if(0===n.length)return null;if(0===i)r=null;else if(a)r=n.shift();else if(e&&e<i)if(e<n[0].length){var s=n[0];r=s.slice(0,e),n[0]=s.slice(e)}else if(e===n[0].length)r=n.shift();else{r=o?"":new I(e);for(var l=0,u=0,c=n.length;c>u&&e>l;u++){var s=n[0],p=Math.min(e-l,s.length);o?r+=s.slice(0,p):s.copy(r,l,0,p),p<s.length?n[0]=s.slice(p):n.shift(),l+=p}}else r=o?n.join(""):I.concat(n,i),n.length=0;return r}function x(e){var t=e._readableState;if(t.length>0)throw Error("endReadable called on non-empty stream");!t.endEmitted&&t.calledRead&&(t.ended=!0,T(function(){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function k(e,t){for(var r=0,n=e.length;n>r;r++)t(e[r],r)}function $(e,t){for(var r=0,n=e.length;n>r;r++)if(e[r]===t)return r;return-1}t.exports=i,i.ReadableState=n;var w,_=e("events").EventEmitter,E=e("./index.js"),I=e("buffer").Buffer,T=e("process/browser.js").nextTick,j=e("inherits");j(i,E),i.prototype.push=function(e,t){var r=this._readableState;return"string"!=typeof e||r.objectMode||(t=t||r.defaultEncoding,t!==r.encoding&&(e=new I(e,t),t="")),o(this,r,e,t,!1)},i.prototype.unshift=function(e){var t=this._readableState;return o(this,t,e,"",!0)},i.prototype.setEncoding=function(t){w||(w=e("string_decoder").StringDecoder),this._readableState.decoder=new w(t),this._readableState.encoding=t};var S=8388608;i.prototype.read=function(e){var t=this._readableState;t.calledRead=!0;var r=e;if(("number"!=typeof e||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return p(this),null;if(e=l(e,t),0===e&&t.ended)return 0===t.length&&x(this),null;var n=t.needReadable;t.length-e>t.highWaterMark||(n=!0),(t.ended||t.reading)&&(n=!1),n&&(t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),n&&!t.reading&&(e=l(r,t));var i;return i=e>0?m(e,t):null,null===i&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),t.ended&&!t.endEmitted&&0===t.length&&x(this),i},i.prototype._read=function(){this.emit("error",Error("not implemented"))},i.prototype.pipe=function(e,t){function n(e){e===c&&o()}function i(){e.end()}function o(){e.removeListener("close",s),e.removeListener("finish",l),e.removeListener("drain",h),e.removeListener("error",a),e.removeListener("unpipe",n),c.removeListener("end",i),c.removeListener("end",o),(!e._writableState||e._writableState.needDrain)&&h()}function a(t){u(),0===b&&0===_.listenerCount(e,"error")&&e.emit("error",t)}function s(){e.removeListener("finish",l),u()}function l(){e.removeListener("close",s),u()}function u(){c.unpipe(e)}var c=this,p=this._readableState;switch(p.pipesCount){case 0:p.pipes=e;break;case 1:p.pipes=[p.pipes,e];break;default:p.pipes.push(e)}p.pipesCount+=1;var f=(!t||t.end!==!1)&&e!==r.stdout&&e!==r.stderr,d=f?i:o;p.endEmitted?T(d):c.once("end",d),e.on("unpipe",n);var h=v(c);e.on("drain",h);var b=_.listenerCount(e,"error");return e.once("error",a),e.once("close",s),e.once("finish",l),e.emit("pipe",c),p.flowing||(this.on("readable",y),p.flowing=!0,T(function(){g(c)})),e},i.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,this.removeListener("readable",y),t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,this.removeListener("readable",y),t.flowing=!1;for(var i=0;n>i;i++)r[i].emit("unpipe",this);return this}var i=$(t.pipes,e);return-1===i?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},i.prototype.on=function(e,t){var r=E.prototype.on.call(this,e,t);if("data"!==e||this._readableState.flowing||b(this),"readable"===e&&this.readable){var n=this._readableState;n.readableListening||(n.readableListening=!0,n.emittedReadable=!1,n.needReadable=!0,n.reading?n.length&&p(this,n):this.read(0))}return r},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){b(this),this.read(0),this.emit("resume")},i.prototype.pause=function(){b(this,!0),this.emit("pause")},i.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;e.on("end",function(){if(t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),e.on("data",function(i){if(t.decoder&&(i=t.decoder.write(i)),i&&(t.objectMode||i.length)){var o=n.push(i);o||(r=!0,e.pause())}});for(var i in e)"function"==typeof e[i]&&void 0===this[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return k(o,function(t){e.on(t,function(e){return n.emit.apply(n,t,e)})}),n._read=function(){r&&(r=!1,e.resume())},n},i._fromList=m}).call(this,e("1YiZ5S"))},{"./index.js":19,"1YiZ5S":13,buffer:2,events:5,inherits:11,"process/browser.js":20,string_decoder:25}],23:[function(e,t){function r(e,t){this.afterTransform=function(e,r){return n(t,e,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function n(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!==r&&void 0!==r&&e.push(r),i&&i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function i(e){if(!(this instanceof i))return new i(e);a.call(this,e);var t=(this._transformState=new r(e,this),this);this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(e){o(t,e)}):o(t)})}function o(e,t){if(t)return e.emit("error",t);var r=e._writableState,n=(e._readableState,e._transformState);if(r.length)throw Error("calling transform done when ws.length != 0");if(n.transforming)throw Error("calling transform done when still transforming");return e.push(null)}t.exports=i;var a=e("./duplex.js"),s=e("inherits");s(i,a),i.prototype.push=function(e,t){return this._transformState.needTransform=!1,a.prototype.push.call(this,e,t)},i.prototype._transform=function(){throw Error("not implemented")},i.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},i.prototype._read=function(){var e=this._transformState;e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0}},{"./duplex.js":18,inherits:11}],24:[function(e,t){function r(e,t,r){this.chunk=e,this.encoding=t,this.callback=r}function n(e,t){e=e||{};var r=e.highWaterMark;this.highWaterMark=r||0===r?r:16384,this.objectMode=!!e.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var n=e.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){f(t,e)},this.writecb=null,this.writelen=0,this.buffer=[]}function i(e){return this instanceof i||this instanceof $.Duplex?(this._writableState=new n(e,this),this.writable=!0,void $.call(this)):new i(e)}function o(e,t,r){var n=Error("write after end");e.emit("error",n),w(function(){r(n)})}function a(e,t,r,n){var i=!0;if(!_.isBuffer(r)&&"string"!=typeof r&&null!==r&&void 0!==r&&!t.objectMode){var o=new TypeError("Invalid non-string/buffer chunk");e.emit("error",o),w(function(){n(o)}),i=!1}return i}function s(e,t,r){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=new _(t,r)),t}function l(e,t,n,i,o){n=s(t,n,i);var a=t.objectMode?1:n.length;t.length+=a;var l=t.length<t.highWaterMark;return t.needDrain=!l,t.writing?t.buffer.push(new r(n,i,o)):u(e,t,a,n,i,o),l}function u(e,t,r,n,i,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,e._write(n,i,t.onwrite),t.sync=!1}function c(e,t,r,n,i){r?w(function(){i(n)}):i(n),e.emit("error",n)}function p(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function f(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(p(r),t)c(e,r,n,t,i);else{var o=g(e,r);o||r.bufferProcessing||!r.buffer.length||v(e,r),n?w(function(){d(e,r,o,i)}):d(e,r,o,i)}}function d(e,t,r,n){r||h(e,t),n(),r&&y(e,t)}function h(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function v(e,t){t.bufferProcessing=!0;for(var r=0;r<t.buffer.length;r++){var n=t.buffer[r],i=n.chunk,o=n.encoding,a=n.callback,s=t.objectMode?1:i.length;if(u(e,t,s,i,o,a),t.writing){r++;break}}t.bufferProcessing=!1,r<t.buffer.length?t.buffer=t.buffer.slice(r):t.buffer.length=0}function g(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function y(e,t){var r=g(e,t);return r&&(t.finished=!0,e.emit("finish")),r}function b(e,t,r){t.ending=!0,y(e,t),r&&(t.finished?w(r):e.once("finish",r)),t.ended=!0}t.exports=i,i.WritableState=n;var m="undefined"!=typeof Uint8Array?function(e){return e instanceof Uint8Array}:function(e){return e&&e.constructor&&"Uint8Array"===e.constructor.name},x="undefined"!=typeof ArrayBuffer?function(e){return e instanceof ArrayBuffer}:function(e){return e&&e.constructor&&"ArrayBuffer"===e.constructor.name},k=e("inherits"),$=e("./index.js"),w=e("process/browser.js").nextTick,_=e("buffer").Buffer;k(i,$),i.prototype.pipe=function(){this.emit("error",Error("Cannot pipe. Not readable."))},i.prototype.write=function(e,t,r){var n=this._writableState,i=!1;return"function"==typeof t&&(r=t,t=null),!_.isBuffer(e)&&m(e)&&(e=new _(e)),x(e)&&"undefined"!=typeof Uint8Array&&(e=new _(new Uint8Array(e))),_.isBuffer(e)?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=function(){}),n.ended?o(this,n,r):a(this,n,e,r)&&(i=l(this,n,e,t,r)),i},i.prototype._write=function(e,t,r){r(Error("not implemented"))},i.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),void 0!==e&&null!==e&&this.write(e,t),n.ending||n.finished||b(this,n,r)}},{"./index.js":19,buffer:2,inherits:11,"process/browser.js":20}],25:[function(e,t,r){function n(e){if(e&&!s.isEncoding(e))throw Error("Unknown encoding: "+e)}function i(e){return e.toString(this.encoding)}function o(e){var t=this.charReceived=e.length%2;return this.charLength=t?2:0,t}function a(e){var t=this.charReceived=e.length%3;return this.charLength=t?3:0,t}var s=e("buffer").Buffer,l=r.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),n(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=a;break;default:return void(this.write=i)}this.charBuffer=new s(6),this.charReceived=0,this.charLength=0};l.prototype.write=function(e){for(var t="",r=0;this.charLength;){var n=e.length<this.charLength-this.charReceived?e.length:this.charLength-this.charReceived;if(e.copy(this.charBuffer,this.charReceived,r,n),this.charReceived+=n-r,r=n,this.charReceived<this.charLength)return"";t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var i=t.charCodeAt(t.length-1);if(55296>i||i>56319){if(this.charReceived=this.charLength=0,n==e.length)return t;e=e.slice(n,e.length);break}this.charLength+=this.surrogateSize,t=""}var o=this.detectIncompleteChar(e),a=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-o,a),this.charReceived=o,a-=o),t+=e.toString(this.encoding,0,a);var a=t.length-1,i=t.charCodeAt(a);if(i>=55296&&56319>=i){var s=this.surrogateSize;return this.charLength+=s,this.charReceived+=s,this.charBuffer.copy(this.charBuffer,s,0,s),this.charBuffer.write(t.charAt(t.length-1),this.encoding),t.substring(0,a)}return t},l.prototype.detectIncompleteChar=function(e){for(var t=e.length<3?e.length:3;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(2>=t&&r>>4==14){this.charLength=3;break}if(3>=t&&r>>3==30){this.charLength=4;break}}return t},l.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;t+=n.slice(0,r).toString(i)}return t}},{buffer:2}],26:[function(e,t,r){"undefined"!=typeof setTimeout&&(r.setTimeout=function(){return setTimeout.apply(window,arguments)}),"undefined"!=typeof clearTimeout&&(r.clearTimeout=function(){clearTimeout.apply(window,arguments)}),"undefined"!=typeof setInterval&&(r.setInterval=function(){return setInterval.apply(window,arguments)}),"undefined"!=typeof clearInterval&&(r.clearInterval=function(){clearInterval.apply(window,arguments)}),r.enroll=function(e,t){e._timeoutID=setTimeout(e._onTimeout,t)},r.unenroll=function(e){clearTimeout(e._timeoutID)},r.active=function(){},r.setImmediate=e("process/browser.js").nextTick},{"process/browser.js":27}],27:[function(e,t){t.exports=e(20)},{}],28:[function(e,t,r){function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t,r){if(e&&u(e)&&e instanceof n)return e;var i=new n;return i.parse(e,t,r),i}function o(e){return l(e)&&(e=i(e)),e instanceof n?e.format():n.prototype.format.call(e)}function a(e,t){return i(e,!1,!0).resolve(t)}function s(e,t){return e?i(e,!1,!0).resolveObject(t):t}function l(e){return"string"==typeof e}function u(e){return"object"==typeof e&&null!==e}function c(e){return null===e}function p(e){return null==e}var f=e("punycode");r.parse=i,r.resolve=a,r.resolveObject=s,r.format=o,r.Url=n;var d=/^([a-z0-9.+-]+:)/i,h=/:[0-9]*$/,v=["<",">",'"',"`"," ","\r","\n","	"],g=["{","}","|","\\","^","`"].concat(v),y=["'"].concat(g),b=["%","/","?",";","#"].concat(y),m=["/","?","#"],x=255,k=/^[a-z0-9A-Z_-]{0,63}$/,$=/^([a-z0-9A-Z_-]{0,63})(.*)$/,w={javascript:!0,"javascript:":!0},_={javascript:!0,"javascript:":!0},E={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},I=e("querystring");n.prototype.parse=function(e,t,r){if(!l(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e;n=n.trim();var i=d.exec(n);if(i){i=i[0];var o=i.toLowerCase();this.protocol=o,n=n.substr(i.length)}if(r||i||n.match(/^\/\/[^@\/]+@[^@\/]+/)){var a="//"===n.substr(0,2);!a||i&&_[i]||(n=n.substr(2),this.slashes=!0)}if(!_[i]&&(a||i&&!E[i])){for(var s=-1,u=0;u<m.length;u++){var c=n.indexOf(m[u]);-1===c||-1!==s&&c>=s||(s=c)}var p,h;h=-1===s?n.lastIndexOf("@"):n.lastIndexOf("@",s),-1!==h&&(p=n.slice(0,h),n=n.slice(h+1),this.auth=decodeURIComponent(p)),s=-1;for(var u=0;u<b.length;u++){var c=n.indexOf(b[u]);-1===c||-1!==s&&c>=s||(s=c)}-1===s&&(s=n.length),this.host=n.slice(0,s),n=n.slice(s),this.parseHost(),this.hostname=this.hostname||"";var v="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!v)for(var g=this.hostname.split(/\./),u=0,T=g.length;T>u;u++){var j=g[u];if(j&&!j.match(k)){for(var S="",L=0,N=j.length;N>L;L++)S+=j.charCodeAt(L)>127?"x":j[L];if(!S.match(k)){var C=g.slice(0,u),O=g.slice(u+1),R=j.match($);R&&(C.push(R[1]),O.unshift(R[2])),O.length&&(n="/"+O.join(".")+n),this.hostname=C.join(".");break}}}if(this.hostname=this.hostname.length>x?"":this.hostname.toLowerCase(),!v){for(var A=this.hostname.split("."),F=[],u=0;u<A.length;++u){var D=A[u];F.push(D.match(/[^A-Za-z0-9_-]/)?"xn--"+f.encode(D):D)}this.hostname=F.join(".")}var P=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+P,this.href+=this.host,v&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==n[0]&&(n="/"+n))}if(!w[o])for(var u=0,T=y.length;T>u;u++){var B=y[u],M=encodeURIComponent(B);M===B&&(M=escape(B)),n=n.split(B).join(M)}var G=n.indexOf("#");-1!==G&&(this.hash=n.substr(G),n=n.slice(0,G));var q=n.indexOf("?");if(-1!==q?(this.search=n.substr(q),this.query=n.substr(q+1),t&&(this.query=I.parse(this.query)),n=n.slice(0,q)):t&&(this.search="",this.query={}),n&&(this.pathname=n),E[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var P=this.pathname||"",D=this.search||"";this.path=P+D}return this.href=this.format(),this},n.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&u(this.query)&&Object.keys(this.query).length&&(o=I.stringify(this.query));var a=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||E[t])&&i!==!1?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),a=a.replace("#","%23"),t+i+r+a+n},n.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},n.prototype.resolveObject=function(e){if(l(e)){var t=new n;t.parse(e,!1,!0),e=t}var r=new n;if(Object.keys(this).forEach(function(e){r[e]=this[e]},this),r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol)return Object.keys(e).forEach(function(t){"protocol"!==t&&(r[t]=e[t])}),E[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r;if(e.protocol&&e.protocol!==r.protocol){if(!E[e.protocol])return Object.keys(e).forEach(function(t){r[t]=e[t]}),r.href=r.format(),r;if(r.protocol=e.protocol,e.host||_[e.protocol])r.pathname=e.pathname;else{for(var i=(e.pathname||"").split("/");i.length&&!(e.host=i.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==i[0]&&i.unshift(""),i.length<2&&i.unshift(""),r.pathname=i.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var o=r.pathname||"",a=r.search||"";r.path=o+a}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var s=r.pathname&&"/"===r.pathname.charAt(0),u=e.host||e.pathname&&"/"===e.pathname.charAt(0),f=u||s||r.host&&e.pathname,d=f,h=r.pathname&&r.pathname.split("/")||[],i=e.pathname&&e.pathname.split("/")||[],v=r.protocol&&!E[r.protocol];if(v&&(r.hostname="",r.port=null,r.host&&(""===h[0]?h[0]=r.host:h.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===i[0]?i[0]=e.host:i.unshift(e.host)),e.host=null),f=f&&(""===i[0]||""===h[0])),u)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,h=i;else if(i.length)h||(h=[]),h.pop(),h=h.concat(i),r.search=e.search,r.query=e.query;else if(!p(e.search)){if(v){r.hostname=r.host=h.shift();var g=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;g&&(r.auth=g.shift(),r.host=r.hostname=g.shift())}return r.search=e.search,r.query=e.query,c(r.pathname)&&c(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!h.length)return r.pathname=null,r.path=r.search?"/"+r.search:null,r.href=r.format(),r;for(var y=h.slice(-1)[0],b=(r.host||e.host)&&("."===y||".."===y)||""===y,m=0,x=h.length;x>=0;x--)y=h[x],"."==y?h.splice(x,1):".."===y?(h.splice(x,1),m++):m&&(h.splice(x,1),m--);if(!f&&!d)for(;m--;m)h.unshift("..");!f||""===h[0]||h[0]&&"/"===h[0].charAt(0)||h.unshift(""),b&&"/"!==h.join("/").substr(-1)&&h.push("");var k=""===h[0]||h[0]&&"/"===h[0].charAt(0);if(v){r.hostname=r.host=k?"":h.length?h.shift():"";var g=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;g&&(r.auth=g.shift(),r.host=r.hostname=g.shift())}return f=f||r.host&&h.length,f&&!k&&h.unshift(""),h.length?r.pathname=h.join("/"):(r.pathname=null,r.path=null),c(r.pathname)&&c(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var e=this.host,t=h.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{punycode:14,querystring:17}],29:[function(e,t){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],30:[function(e,t,r){(function(t,n){function i(e,t){var n={seen:[],stylize:a};return arguments.length<3||(n.depth=arguments[2]),arguments.length<4||(n.colors=arguments[3]),v(t)?n.showHidden=t:t&&r._extend(n,t),k(n.showHidden)&&(n.showHidden=!1),k(n.depth)&&(n.depth=2),k(n.colors)&&(n.colors=!1),k(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),l(n,e,n.depth)}function o(e,t){var r=i.styles[t];return r?"["+i.colors[r][0]+"m"+e+"["+i.colors[r][1]+"m":e}function a(e){return e}function s(e){var t={};return e.forEach(function(e){t[e]=!0}),t}function l(e,t,n){if(e.customInspect&&t&&I(t.inspect)&&t.inspect!==r.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(n,e);return m(i)||(i=l(e,i,n)),i}var o=u(e,t);if(o)return o;var a=Object.keys(t),v=s(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),E(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return c(t);if(0===a.length){if(I(t)){var g=t.name?": "+t.name:"";return e.stylize("[Function"+g+"]","special")}if($(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(_(t))return e.stylize(Date.prototype.toString.call(t),"date");if(E(t))return c(t)}var y="",b=!1,x=["{","}"];if(h(t)&&(b=!0,x=["[","]"]),I(t)){var k=t.name?": "+t.name:"";y=" [Function"+k+"]"}if($(t)&&(y=" "+RegExp.prototype.toString.call(t)),_(t)&&(y=" "+Date.prototype.toUTCString.call(t)),E(t)&&(y=" "+c(t)),0===a.length&&(!b||0==t.length))return x[0]+y+x[1];if(0>n)return $(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var w;return w=b?p(e,t,n,v,a):a.map(function(r){return f(e,t,n,v,r,b)}),e.seen.pop(),d(w,y,x)}function u(e,t){if(k(t))return e.stylize("undefined","undefined");if(m(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return b(t)?e.stylize(""+t,"number"):v(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,r,n,i){for(var o=[],a=0,s=t.length;s>a;++a)o.push(N(t,a+"")?f(e,t,r,n,a+"",!0):"");return i.forEach(function(i){i.match(/^\d+$/)||o.push(f(e,t,r,n,i,!0))}),o}function f(e,t,r,n,i,o){var a,s,u;if(u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},u.get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),N(n,i)||(a="["+i+"]"),s||(e.seen.indexOf(u.value)<0?(s=g(r)?l(e,u.value,null):l(e,u.value,r-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),k(a)){if(o&&i.match(/^\d+$/))return s;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function d(e,t,r){var n=0,i=e.reduce(function(e,t){return n++,t.indexOf("\n")<0||n++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function h(e){return Array.isArray(e)}function v(e){return"boolean"==typeof e}function g(e){return null===e}function y(e){return null==e}function b(e){return"number"==typeof e}function m(e){return"string"==typeof e}function x(e){return"symbol"==typeof e}function k(e){return void 0===e}function $(e){return w(e)&&"[object RegExp]"===j(e)}function w(e){return"object"==typeof e&&null!==e}function _(e){return w(e)&&"[object Date]"===j(e)}function E(e){return w(e)&&("[object Error]"===j(e)||e instanceof Error)}function I(e){return"function"==typeof e}function T(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function j(e){return Object.prototype.toString.call(e)}function S(e){return 10>e?"0"+e.toString(10):e.toString(10)}function L(){var e=new Date,t=[S(e.getHours()),S(e.getMinutes()),S(e.getSeconds())].join(":");return[e.getDate(),A[e.getMonth()],t].join(" ")}function N(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var C=/%[sdj%]/g;r.format=function(e){if(!m(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(i(arguments[r]));return t.join(" ")}for(var r=1,n=arguments,o=n.length,a=(e+"").replace(C,function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return n[r++]+"";case"%d":return+n[r++];case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return e}}),s=n[r];o>r;s=n[++r])a+=g(s)||!w(s)?" "+s:" "+i(s);return a},r.deprecate=function(e,i){function o(){if(!a){if(t.throwDeprecation)throw Error(i);t.traceDeprecation?console.trace(i):console.error(i),a=!0}return e.apply(this,arguments)}if(k(n.process))return function(){return r.deprecate(e,i).apply(this,arguments)};if(t.noDeprecation===!0)return e;var a=!1;return o};var O,R={};r.debuglog=function(e){if(k(O)&&(O=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!R[e])if(RegExp("\\b"+e+"\\b","i").test(O)){var n=t.pid;R[e]=function(){var t=r.format.apply(r,arguments);console.error("%s %d: %s",e,n,t)}}else R[e]=function(){};return R[e]},r.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=h,r.isBoolean=v,r.isNull=g,r.isNullOrUndefined=y,r.isNumber=b,r.isString=m,r.isSymbol=x,r.isUndefined=k,r.isRegExp=$,r.isObject=w,r.isDate=_,r.isError=E,r.isFunction=I,r.isPrimitive=T,r.isBuffer=e("./support/isBuffer");var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];r.log=function(){console.log("%s - %s",L(),r.format.apply(r,arguments))},r.inherits=e("inherits"),r._extend=function(e,t){if(!t||!w(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}}).call(this,e("1YiZ5S"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":29,"1YiZ5S":13,inherits:11}],31:[function(){},{}],32:[function(e,t){(function(r,n,i){!function(){var o=void 0!==r&&r.versions&&r.versions.node,a=!o&&("undefined"!=typeof window||"undefined"!=typeof self);a&&void 0===n&&("undefined"!=typeof window?n=window:"undefined"!=typeof self?n=self:"undefined"!=typeof $&&(n=$));var s=function(t){function s(){}function l(e){for(var t=[],r=Object.keys(e).sort(),n=0;n<r.length;++n){var i=r[n],o=e[i];q(o)||(o=[o]);for(var a=0;a<o.length;++a){var s=o[a];if(!z(s))throw new Ot("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:e});t.push({"@value":s,"@language":i.toLowerCase()})}}return t}function u(e,t){if(q(t))for(var r=0;r<t.length;++r)t[r]=u(e,t[r]);else if(et(t))t["@list"]=u(e,t["@list"]);else if(M(t)){tt(t)&&(t["@id"]=e.getName(t["@id"]));for(var n=Object.keys(t).sort(),i=0;i<n.length;++i){var o=n[i];"@id"!==o&&(t[o]=u(e,t[o]))}}return t}function c(e,r,n){if(null===n||void 0===n)return null;var i=F(e,r,{vocab:!0});if("@id"===i)return F(e,n,{base:!0});if("@type"===i)return F(e,n,{vocab:!0,base:!0});var o=t.getContextValue(e,r,"@type");if("@id"===o||"@graph"===i&&z(n))return{"@id":F(e,n,{base:!0})};if("@vocab"===o)return{"@id":F(e,n,{vocab:!0,base:!0})};if(B(i))return n;var a={};if(null!==o)a["@type"]=o;else if(z(n)){var s=t.getContextValue(e,r,"@language");null!==s&&(a["@language"]=s)}return-1===["boolean","number","string"].indexOf(typeof n)&&(n=""+n),a["@value"]=n,a}function p(e,t,r){for(var n=[],i=Object.keys(e).sort(),o=0;o<i.length;++o)for(var a=i[o],s=e[a],l=Object.keys(s).sort(),u=0;u<l.length;++u){var c=l[u],p=s[c];if("@type"===c)c=It;else if(B(c))continue;for(var h=0;h<p.length;++h){var v=p[h],g={};if(g.type=0===a.indexOf("_:")?"blank node":"IRI",g.value=a,rt(a)){var y={};if(y.type=0===c.indexOf("_:")?"blank node":"IRI",y.value=c,rt(c)&&("blank node"!==y.type||r.produceGeneralizedRdf))if(et(v))f(v["@list"],t,g,y,n);else{var b=d(v);b&&n.push({subject:g,predicate:y,object:b})}}}}return n}function f(e,t,r,n,i){for(var o={type:"IRI",value:wt},a={type:"IRI",value:_t},s={type:"IRI",value:Et},l=0;l<e.length;++l){var u=e[l],c={type:"blank node",value:t.getName()};i.push({subject:r,predicate:n,object:c}),r=c,n=o;var p=d(u);p&&i.push({subject:r,predicate:n,object:p}),n=a}i.push({subject:r,predicate:n,object:s})}function d(e){var t={};if(Y(e)){t.type="literal";var r=e["@value"],n=e["@type"]||null;H(r)?(t.value=""+r,t.datatype=n||yt):K(r)||n===bt?(K(r)||(r=parseFloat(r)),t.value=r.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),t.datatype=n||bt):J(r)?(t.value=r.toFixed(0),t.datatype=n||mt):"@language"in e?(t.value=r,t.datatype=n||Lt,t.language=e["@language"]):(t.value=r,t.datatype=n||xt)}else{var i=M(e)?e["@id"]:e;t.type=0===i.indexOf("_:")?"blank node":"IRI",t.value=i
}return"IRI"!==t.type||rt(t.value)?t:null}function h(e,t){if("IRI"===e.type||"blank node"===e.type)return{"@id":e.value};var r={"@value":e.value};if(e.language)r["@language"]=e.language;else{var n=e.datatype;if(n||(n=xt),t){if(n===yt)"true"===r["@value"]?r["@value"]=!0:"false"===r["@value"]&&(r["@value"]=!1);else if(X(r["@value"]))if(n===mt){var i=parseInt(r["@value"],10);i.toFixed(0)===r["@value"]&&(r["@value"]=i)}else n===bt&&(r["@value"]=parseFloat(r["@value"]));-1===[yt,mt,bt,xt].indexOf(n)&&(r["@type"]=n)}else n!==xt&&(r["@type"]=n)}return r}function v(e,t){for(var r=["subject","predicate","object"],n=0;n<r.length;++n){var i=r[n];if(e[i].type!==t[i].type||e[i].value!==t[i].value)return!1}return e.object.language!==t.object.language?!1:e.object.datatype!==t.object.datatype?!1:!0}function g(e,t){if("hash"in t[e])return t[e].hash;for(var r=t[e].quads,n=[],i=0;i<r.length;++i)n.push(lt(r[i],r[i].name?r[i].name.value:null,e));n.sort();var o=t[e].hash=Ft.hash(n);return o}function y(e,r,n,i,o){function a(o){if(o===p.length)return l=Object.keys(c).sort(),s(0);var u=p[o],f=b(u.subject,e),d=null;if(null!==f?d="p":(f=b(u.object,e),null!==f&&(d="r")),null!==f){var h;h=n.isNamed(f)?n.getName(f):i.isNamed(f)?i.getName(f):g(f,r);var v=Ft.create();v.update(d),v.update(u.predicate.value),v.update(h);var y=v.digest();y in c?c[y].push(f):c[y]=[f]}t.setImmediate(function(){a(o+1)})}function s(e){function a(){function l(e){if(e===b.length)return c(!1);var t=b[e];y(t,r,n,v,function(r,n){return r?o(r):(g+=v.getName(t)+"<"+n.hash+">",v=n.pathNamer,null!==f&&g.length>=f.length&&g>f?c(!0):void l(e+1))})}function c(r){r||null!==f&&g>=f||(f=g,d=v),h.hasNext()?t.setImmediate(function(){a()}):(u.update(f),i=d,s(e+1))}var p=h.next(),v=i.clone(),g="",b=[];for(var m in p){var x=p[m];if(n.isNamed(x)?g+=n.getName(x):(v.isNamed(x)||b.push(x),g+=v.getName(x)),null!==f&&g.length>=f.length&&g>f)return c(!0)}l(0)}if(e===l.length)return o(null,{hash:u.digest(),pathNamer:i});var p=l[e];u.update(p);var f=null,d=null,h=new At(c[p]);t.setImmediate(function(){a()})}var l,u=Ft.create(),c={},p=r[e].quads;t.setImmediate(function(){a(0)})}function b(e,t){return"blank node"===e.type&&e.value!==t?e.value:null}function m(e,r,n,i,o,a){if(q(e))for(var s=0;s<e.length;++s)m(e[s],r,n,i,void 0,a);else{if(!M(e))return void(a&&a.push(e));if(Y(e)){if("@type"in e){var l=e["@type"];0===l.indexOf("_:")&&(e["@type"]=l=i.getName(l))}return void(a&&a.push(e))}if("@type"in e)for(var u=e["@type"],s=0;s<u.length;++s){var l=u[s];0===l.indexOf("_:")&&i.getName(l)}Q(o)&&(o=tt(e)?i.getName(e["@id"]):e["@id"]),a&&a.push({"@id":o});var c=r[n],p=c[o]=c[o]||{};p["@id"]=o;for(var f=Object.keys(e).sort(),d=0;d<f.length;++d){var h=f[d];if("@id"!==h)if("@reverse"!==h)if("@graph"!==h)if("@type"!==h&&B(h)){if("@index"===h&&"@index"in p)throw new Ot("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:p});p[h]=e[h]}else{var v=e[h];if(0===h.indexOf("_:")&&(h=i.getName(h)),0!==v.length)for(var g=0;g<v.length;++g){var y=v[g];if("@type"===h&&(y=0===y.indexOf("_:")?i.getName(y):y),W(y)||Z(y)){var b=tt(y)?i.getName(y["@id"]):y["@id"];t.addValue(p,h,{"@id":b},{propertyIsArray:!0,allowDuplicate:!1}),m(y,r,n,i,b)}else if(et(y)){var x=[];m(y["@list"],r,n,i,o,x),y={"@list":x},t.addValue(p,h,y,{propertyIsArray:!0,allowDuplicate:!1})}else m(y,r,n,i,o),t.addValue(p,h,y,{propertyIsArray:!0,allowDuplicate:!1})}else t.addValue(p,h,[],{propertyIsArray:!0})}else{o in r||(r[o]={});var k="@merged"===n?n:o;m(e[h],r,k,i)}else{var $={"@id":o},w=e["@reverse"];for(var _ in w)for(var E=w[_],I=0;I<E.length;++I){var T=E[I],j=T["@id"];tt(T)&&(j=i.getName(j)),m(T,r,n,i,j),t.addValue(c[j],_,$,{propertyIsArray:!0,allowDuplicate:!1})}}}}}function x(e){for(var t=e["@default"],r=Object.keys(e).sort(),n=0;n<r.length;++n){var i=r[n];if("@default"!==i){var o=e[i],a=t[i];a?"@graph"in a||(a["@graph"]=[]):t[i]=a={"@id":i,"@graph":[]};for(var s=a["@graph"],l=Object.keys(o).sort(),u=0;u<l.length;++u){var c=o[l[u]];Z(c)||s.push(c)}}}return t}function k(e,t,r,n,i){E(r),r=r[0];var o=e.options,a={embed:_(r,o,"embed"),explicit:_(r,o,"explicit"),requireAll:_(r,o,"requireAll")},s=I(e,t,r,a),l=Object.keys(s).sort();for(var u in l){var c=l[u],p=s[c];if("@link"===a.embed&&c in e.link)S(n,i,e.link[c]);else{null===i&&(e.uniqueEmbeds={});var f={};if(f["@id"]=c,e.link[c]=f,"@never"===a.embed||w(p,e.subjectStack))S(n,i,f);else{"@last"===a.embed&&(c in e.uniqueEmbeds&&j(e,c),e.uniqueEmbeds[c]={parent:n,property:i}),e.subjectStack.push(p);for(var d=Object.keys(p).sort(),h=0;h<d.length;h++){var v=d[h];if(B(v))f[v]=nt(p[v]);else if(!a.explicit||v in r)for(var g=p[v],y=0;y<g.length;++y){var b=g[y];if(et(b)){var m={"@list":[]};S(f,v,m);var x=b["@list"];for(var T in x)if(b=x[T],Z(b)){var L=v in r?r[v][0]["@list"]:$(a);k(e,[b["@id"]],L,m,"@list")}else S(m,"@list",nt(b))}else if(Z(b)){var L=v in r?r[v]:$(a);k(e,[b["@id"]],L,f,v)}else S(f,v,nt(b))}}for(var d=Object.keys(r).sort(),h=0;h<d.length;++h){var v=d[h];if(!B(v)){var N=r[v][0],C=_(N,o,"omitDefault");if(!(C||v in f)){var O="@null";"@default"in N&&(O=nt(N["@default"])),q(O)||(O=[O]),f[v]=[{"@preserve":O}]}}}S(n,i,f),e.subjectStack.pop()}}}}function $(e){var t={};for(var r in e)void 0!==e[r]&&(t["@"+r]=[e[r]]);return[t]}function w(e,t){for(var r=t.length-1;r>=0;--r)if(t[r]["@id"]===e["@id"])return!0;return!1}function _(e,t,r){var n="@"+r,i=n in e?e[n][0]:t[r];return"embed"===r&&(i===!0?i="@last":i===!1?i="@never":"@always"!==i&&"@never"!==i&&"@link"!==i&&(i="@last")),i}function E(e){if(!q(e)||1!==e.length||!M(e[0]))throw new Ot("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:e})}function I(e,t,r,n){for(var i={},o=0;o<t.length;++o){var a=t[o],s=e.subjects[a];T(s,r,n)&&(i[a]=s)}return i}function T(e,r,n){if("@type"in r&&(1!==r["@type"].length||!M(r["@type"][0]))){for(var i=r["@type"],o=0;o<i.length;++o)if(t.hasValue(e,"@type",i[o]))return!0;return!1}var a=!0,s=!1;for(var l in r){if(B(l)){if("@id"!==l&&"@type"!==l)continue;if(a=!1,"@id"===l&&z(r[l])){if(e[l]!==r[l])return!1;s=!0;continue}}if(a=!1,l in e){if(q(r[l])&&0===r[l].length&&void 0!==e[l])return!1;s=!0}else{var u=q(r[l])&&M(r[l][0])&&"@default"in r[l][0];if(n.requireAll&&!u)return!1}}return a||s}function j(e,r){var n=e.uniqueEmbeds,i=n[r],o=i.parent,a=i.property,s={"@id":r};if(q(o)){for(var l=0;l<o.length;++l)if(t.compareValues(o[l],s)){o[l]=s;break}}else{var u=q(o[a]);t.removeValue(o,a,s,{propertyIsArray:u}),t.addValue(o,a,s,{propertyIsArray:u})}var c=function(e){for(var t=Object.keys(n),r=0;r<t.length;++r){var i=t[r];i in n&&M(n[i].parent)&&n[i].parent["@id"]===e&&(delete n[i],c(i))}};c(r)}function S(e,r,n){M(e)?t.addValue(e,r,n,{propertyIsArray:!0}):e.push(n)}/**
 * Removes the @preserve keywords as the last step of the framing algorithm.
 *
 * @param ctx the active context used to compact the input.
 * @param input the framed, compacted output.
 * @param options the compaction options used.
 *
 * @return the resulting output.
 */
function L(e,r,n){if(q(r)){for(var i=[],o=0;o<r.length;++o){var a=L(e,r[o],n);null!==a&&i.push(a)}r=i}else if(M(r)){// remove @preserve
if("@preserve"in r)return"@null"===r["@preserve"]?null:r["@preserve"];if(Y(r))return r;if(et(r))return r["@list"]=L(e,r["@list"],n),r;var s=O(e,"@id");if(s in r){var l=r[s];if(l in n.link){var u=n.link[l].indexOf(r);if(-1!==u)return n.link[l][u];n.link[l].push(r)}else n.link[l]=[r]}for(var c in r){var a=L(e,r[c],n),p=t.getContextValue(e,c,"@container");n.compactArrays&&q(a)&&1===a.length&&null===p&&(a=a[0]),r[c]=a}}return r}function N(e,t){return e.length<t.length?-1:t.length<e.length?1:e===t?0:t>e?-1:1}function C(e,t,r,n,i,o){null===o&&(o="@null");var a=[];if("@id"!==o&&"@reverse"!==o||!Z(r))a.push(o);else{"@reverse"===o&&a.push("@reverse");var s=O(e,r["@id"],null,{vocab:!0});s in e.mappings&&e.mappings[s]&&e.mappings[s]["@id"]===r["@id"]?a.push.apply(a,["@vocab","@id"]):a.push.apply(a,["@id","@vocab"])}a.push("@none");for(var l=e.inverse[t],u=0;u<n.length;++u){var c=n[u];if(c in l)for(var p=l[c][i],f=0;f<a.length;++f){var d=a[f];if(d in p)return p[d]}}return null}function O(e,t,r,n,i){if(null===t)return t;if(Q(r)&&(r=null),Q(i)&&(i=!1),n=n||{},B(t)&&(n.vocab=!0),n.vocab&&t in e.getInverse()){var o=e["@language"]||"@none",a=[];M(r)&&"@index"in r&&a.push("@index");var s="@language",l="@null";if(i)s="@type",l="@reverse",a.push("@set");else if(et(r)){"@index"in r||a.push("@list");for(var u=r["@list"],c=0===u.length?o:null,p=null,f=0;f<u.length;++f){var d=u[f],h="@none",v="@none";if(Y(d)?"@language"in d?h=d["@language"]:"@type"in d?v=d["@type"]:h="@null":v="@id",null===c?c=h:h!==c&&Y(d)&&(c="@none"),null===p?p=v:v!==p&&(p="@none"),"@none"===c&&"@none"===p)break}c=c||"@none",p=p||"@none","@none"!==p?(s="@type",l=p):l=c}else Y(r)?"@language"in r&&!("@index"in r)?(a.push("@language"),l=r["@language"]):"@type"in r&&(s="@type",l=r["@type"]):(s="@type",l="@id"),a.push("@set");a.push("@none");var g=C(e,t,r,a,s,l);if(null!==g)return g}if(n.vocab&&"@vocab"in e){var y=e["@vocab"];if(0===t.indexOf(y)&&t!==y){var b=t.substr(y.length);if(!(b in e.mappings))return b}}var m=null;for(var g in e.mappings)if(-1===g.indexOf(":")){var x=e.mappings[g];if(x&&x["@id"]!==t&&0===t.indexOf(x["@id"])){var k=g+":"+t.substr(x["@id"].length),$=!(k in e.mappings)||null===r&&e.mappings[k]&&e.mappings[k]["@id"]===t;$&&(null===m||N(k,m)<0)&&(m=k)}}return null!==m?m:n.vocab?t:P(e["@base"],t)}function R(e,r,n){if(Y(n)){var i=t.getContextValue(e,r,"@type"),o=t.getContextValue(e,r,"@language"),a=t.getContextValue(e,r,"@container"),s="@index"in n&&"@index"!==a;if(!s&&(n["@type"]===i||n["@language"]===o))return n["@value"];var l=Object.keys(n).length,u=1===l||2===l&&"@index"in n&&!s,c="@language"in e,p=z(n["@value"]),f=e.mappings[r]&&null===e.mappings[r]["@language"];if(u&&(!c||!p||f))return n["@value"];var d={};return s&&(d[O(e,"@index")]=n["@index"]),"@type"in n?d[O(e,"@type")]=O(e,n["@type"],null,{vocab:!0}):"@language"in n&&(d[O(e,"@language")]=n["@language"]),d[O(e,"@value")]=n["@value"],d}var h=F(e,r,{vocab:!0}),i=t.getContextValue(e,r,"@type"),v=O(e,n["@id"],null,{vocab:"@vocab"===i});if("@id"===i||"@vocab"===i||"@graph"===h)return v;var d={};return d[O(e,"@id")]=v,d}function A(e,t,r,n){if(r in n){if(n[r])return;throw new Ot("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:t,term:r})}if(n[r]=!1,B(r))throw new Ot("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:t,term:r});if(""===r)throw new Ot("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:t});e.mappings[r]&&delete e.mappings[r];var i=t[r];if(null===i||M(i)&&null===i["@id"])return e.mappings[r]=null,void(n[r]=!0);if(z(i)&&(i={"@id":i}),!M(i))throw new Ot("Invalid JSON-LD syntax; @context property values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:t});var o=e.mappings[r]={};if(o.reverse=!1,"@reverse"in i){if("@id"in i)throw new Ot("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});var a=i["@reverse"];if(!z(a))throw new Ot("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});var s=F(e,a,{vocab:!0,base:!1},t,n);if(!rt(s))throw new Ot("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});o["@id"]=s,o.reverse=!0}else if("@id"in i){var s=i["@id"];if(!z(s))throw new Ot("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(s!==r){if(s=F(e,s,{vocab:!0,base:!1},t,n),!rt(s)&&!B(s))throw new Ot("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});o["@id"]=s}}if(!("@id"in o)){var l=r.indexOf(":");if(-1!==l){var u=r.substr(0,l);if(u in t&&A(e,t,u,n),e.mappings[u]){var c=r.substr(l+1);o["@id"]=e.mappings[u]["@id"]+c}else o["@id"]=r}else{if(!("@vocab"in e))throw new Ot("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t,term:r});o["@id"]=e["@vocab"]+r}}if(n[r]=!0,"@type"in i){var p=i["@type"];if(!z(p))throw new Ot("Invalid JSON-LD syntax; an @context @type values must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if("@id"!==p&&"@vocab"!==p){if(p=F(e,p,{vocab:!0,base:!1},t,n),!rt(p))throw new Ot("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if(0===p.indexOf("_:"))throw new Ot("Invalid JSON-LD syntax; an @context @type values must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:t})}o["@type"]=p}if("@container"in i){var f=i["@container"];if("@list"!==f&&"@set"!==f&&"@index"!==f&&"@language"!==f)throw new Ot("Invalid JSON-LD syntax; @context @container value must be one of the following: @list, @set, @index, or @language.","jsonld.SyntaxError",{code:"invalid container mapping",context:t});if(o.reverse&&"@index"!==f&&"@set"!==f&&null!==f)throw new Ot("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});o["@container"]=f}if("@language"in i&&!("@type"in i)){var d=i["@language"];if(null!==d&&!z(d))throw new Ot("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:t});null!==d&&(d=d.toLowerCase()),o["@language"]=d}// disallow aliasing @context and @preserve
var s=o["@id"];if("@context"===s||"@preserve"===s)throw new Ot("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:t})}function F(e,t,r,n,i){if(null===t||B(t))return t;if(n&&t in n&&i[t]!==!0&&A(e,n,t,i),r=r||{},r.vocab){var o=e.mappings[t];if(null===o)return null;if(o)return o["@id"]}var a=t.indexOf(":");if(-1!==a){var s=t.substr(0,a),l=t.substr(a+1);if("_"===s||0===l.indexOf("//"))return t;n&&s in n&&A(e,n,s,i);var o=e.mappings[s];return o?o["@id"]+l:t}if(r.vocab&&"@vocab"in e)return e["@vocab"]+t;var u=t;return r.base&&(u=D(e["@base"],u)),u}function D(e,r){if(null===e)return r;if(-1!==r.indexOf(":"))return r;z(e)&&(e=t.url.parse(e||""));var n=t.url.parse(r),i={protocol:e.protocol||""};if(null!==n.authority)i.authority=n.authority,i.path=n.path,i.query=n.query;else if(i.authority=e.authority,""===n.path)i.path=e.path,i.query=null!==n.query?n.query:e.query;else{if(0===n.path.indexOf("/"))i.path=n.path;else{var o=e.path;""!==n.path&&(o=o.substr(0,o.lastIndexOf("/")+1),o.length>0&&"/"!==o.substr(-1)&&(o+="/"),o+=n.path),i.path=o}i.query=n.query}i.path=pt(i.path,!!i.authority);var a=i.protocol;return null!==i.authority&&(a+="//"+i.authority),a+=i.path,null!==i.query&&(a+="?"+i.query),null!==n.fragment&&(a+="#"+n.fragment),""===a&&(a="./"),a}function P(e,r){if(null===e)return r;z(e)&&(e=t.url.parse(e||""));var n="";if(""!==e.href?n+=(e.protocol||"")+"//"+(e.authority||""):r.indexOf("//")&&(n+="//"),0!==r.indexOf(n))return r;for(var i=t.url.parse(r.substr(n.length)),o=e.normalizedPath.split("/"),a=i.normalizedPath.split("/"),s=i.fragment||i.query?0:1;o.length>0&&a.length>s&&o[0]===a[0];)o.shift(),a.shift();var l="";if(o.length>0){o.pop();for(var u=0;u<o.length;++u)l+="../"}return l+=a.join("/"),null!==i.query&&(l+="?"+i.query),null!==i.fragment&&(l+="#"+i.fragment),""===l&&(l="./"),l}function U(e){function r(){var e=this;if(e.inverse)return e.inverse;for(var t=e.inverse={},r=e["@language"]||"@none",i=e.mappings,o=Object.keys(i).sort(N),a=0;a<o.length;++a){var s=o[a],l=i[s];if(null!==l){var u=l["@container"]||"@none",c=l["@id"];q(c)||(c=[c]);for(var p=0;p<c.length;++p){var f=c[p],d=t[f];if(d||(t[f]=d={}),d[u]||(d[u]={"@language":{},"@type":{}}),d=d[u],l.reverse)n(l,s,d["@type"],"@reverse");else if("@type"in l)n(l,s,d["@type"],l["@type"]);else if("@language"in l){var h=l["@language"]||"@null";n(l,s,d["@language"],h)}else n(l,s,d["@language"],r),n(l,s,d["@type"],"@none"),n(l,s,d["@language"],"@none")}}}return t}function n(e,t,r,n){n in r||(r[n]=t)}function i(){var e={};return e["@base"]=this["@base"],e.mappings=nt(this.mappings),e.clone=this.clone,e.inverse=null,e.getInverse=this.getInverse,"@language"in this&&(e["@language"]=this["@language"]),"@vocab"in this&&(e["@vocab"]=this["@vocab"]),e}var o=t.url.parse(e.base||"");return{"@base":o,mappings:{},inverse:null,getInverse:r,clone:i}}function B(e){if(!z(e))return!1;switch(e){case"@base":case"@context":case"@container":case"@default":case"@embed":case"@explicit":case"@graph":case"@id":case"@index":case"@language":case"@list":case"@omitDefault":case"@preserve":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@vocab":return!0}return!1}function M(e){return"[object Object]"===Object.prototype.toString.call(e)}function G(e){return M(e)&&0===Object.keys(e).length}function q(e){return Array.isArray(e)}function V(e){if(!z(e)&&!G(e)){var t=!1;if(q(e)){t=!0;for(var r=0;r<e.length;++r)if(!z(e[r])){t=!1;break}}if(!t)throw new Ot('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, or an empty object.',"jsonld.SyntaxError",{code:"invalid type value",value:e})}}function z(e){return"string"==typeof e||"[object String]"===Object.prototype.toString.call(e)}function J(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function K(e){return J(e)&&-1!==(e+"").indexOf(".")}function X(e){return!isNaN(parseFloat(e))&&isFinite(e)}function H(e){return"boolean"==typeof e||"[object Boolean]"===Object.prototype.toString.call(e)}function Q(e){return void 0===e}function W(e){var t=!1;if(M(e)&&!("@value"in e||"@set"in e||"@list"in e)){var r=Object.keys(e).length;t=r>1||!("@id"in e)}return t}function Z(e){return M(e)&&1===Object.keys(e).length&&"@id"in e}function Y(e){return M(e)&&"@value"in e}function et(e){return M(e)&&"@list"in e}function tt(e){var t=!1;return M(e)&&(t="@id"in e?0===e["@id"].indexOf("_:"):0===Object.keys(e).length||!("@value"in e||"@set"in e||"@list"in e)),t}function rt(e){return z(e)&&-1!==e.indexOf(":")}function nt(e){if(e&&"object"==typeof e){var t;if(q(e)){t=[];for(var r=0;r<e.length;++r)t[r]=nt(e[r])}else if(M(e)){t={};for(var n in e)t[n]=nt(e[n])}else t=""+e;return t}return e}function it(e,t,r,n){var i=Object.keys(t).length;if(q(e)){for(var o=0;o<e.length;++o)it(e[o],t,r,n);return i<Object.keys(t).length}if(M(e)){for(var a in e)if("@context"===a){var s=e[a];if(q(s))for(var l=s.length,o=0;l>o;++o){var u=s[o];z(u)&&(u=D(n,u),r?(u=t[u],q(u)?(Array.prototype.splice.apply(s,[o,1].concat(u)),o+=u.length-1,l=s.length):s[o]=u):u in t||(t[u]=!1))}else z(s)&&(s=D(n,s),r?e[a]=t[s]:s in t||(t[s]=!1))}else it(e[a],t,r,n);return i<Object.keys(t).length}return!1}function ot(e,t,r){var n=null,i=t.documentLoader,o=function(e,t,r,i,a){if(Object.keys(t).length>Ct)return n=new Ot("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"loading remote context failed",max:Ct}),a(n);var s={},l=function(){it(e,s,!0,i),a(null,e)};it(e,s,!1,i)||l();var u=[];for(var c in s)s[c]===!1&&u.push(c);for(var p=u.length,f=0;f<u.length;++f)!function(e){if(e in t)return n=new Ot("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"recursive context inclusion",url:e}),a(n);var i=nt(t);i[e]=!0;var u=function(t,u){if(!n){var c=u?u.document:null;if(!t&&z(c))try{c=JSON.parse(c)}catch(f){t=f}if(t?t=new Ot("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:e,cause:t}):M(c)||(t=new Ot("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:e,cause:t})),t)return n=t,a(n);c="@context"in c?{"@context":c["@context"]}:{"@context":{}},u.contextUrl&&(q(c["@context"])||(c["@context"]=[c["@context"]]),c["@context"].push(u.contextUrl)),o(c,i,r,e,function(t,r){return t?a(t):(s[e]=r["@context"],p-=1,void(0===p&&l()))})}},c=r(e,u);c&&"then"in c&&c.then(u.bind(null,null),u)}(u[f])};o(e,{},i,t.base,r)}function at(e){for(var t="(?:<([^:]+:[^>]*)>)",r="(_:(?:[A-Za-z0-9]+))",n='"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"',i="(?:\\^\\^"+t+")",o="(?:@([a-z]+(?:-[a-z0-9]+)*))",a="(?:"+n+"(?:"+i+"|"+o+")?)",s="[ \\t]+",l="[ \\t]*",u=/(?:\r\n)|(?:\n)|(?:\r)/g,c=RegExp("^"+l+"$"),p="(?:"+t+"|"+r+")"+s,f=t+s,d="(?:"+t+"|"+r+"|"+a+")"+l,h="(?:\\.|(?:(?:"+t+"|"+r+")"+l+"\\.))",g=RegExp("^"+l+p+f+d+h+l+"$"),y={},b=e.split(u),m=0,x=0;x<b.length;++x){var k=b[x];if(m++,!c.test(k)){var $=k.match(g);if(null===$)throw new Ot("Error while parsing N-Quads; invalid quad.","jsonld.ParseError",{line:m});var w={};if(w.subject=Q($[1])?{type:"blank node",value:$[2]}:{type:"IRI",value:$[1]},w.predicate={type:"IRI",value:$[3]},Q($[4]))if(Q($[5])){w.object={type:"literal"},Q($[7])?Q($[8])?w.object.datatype=xt:(w.object.datatype=Lt,w.object.language=$[8]):w.object.datatype=$[7];var _=$[6].replace(/\\"/g,'"').replace(/\\t/g,"	").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\\\/g,"\\");w.object.value=_}else w.object={type:"blank node",value:$[5]};else w.object={type:"IRI",value:$[4]};var E="@default";if(Q($[9])?Q($[10])||(E=$[10]):E=$[9],E in y){for(var I=!0,T=y[E],j=0;I&&j<T.length;++j)v(T[j],w)&&(I=!1);I&&T.push(w)}else y[E]=[w]}}return y}function st(e){var t=[];for(var r in e)for(var n=e[r],i=0;i<n.length;++i){var o=n[i];"@default"===r&&(r=null),t.push(lt(o,r))}return t.sort(),t.join("")}function lt(e,t,r){var n=e.subject,i=e.predicate,o=e.object,a=t,s="";if(s+="IRI"===n.type?"<"+n.value+">":r?n.value===r?"_:a":"_:z":n.value,s+=" ",s+="IRI"===i.type?"<"+i.value+">":r?"_:p":i.value,s+=" ","IRI"===o.type)s+="<"+o.value+">";else if("blank node"===o.type)s+=r?o.value===r?"_:a":"_:z":o.value;else{var l=o.value.replace(/\\/g,"\\\\").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\"/g,'\\"');s+='"'+l+'"',o.datatype===Lt?o.language&&(s+="@"+o.language):o.datatype!==xt&&(s+="^^<"+o.datatype+">")}return null!==a&&(s+=0!==a.indexOf("_:")?" <"+a+">":r?" _:g":" "+a),s+=" .\n"}function ut(e){var t={};t["@default"]=[];for(var r=e.getSubjects(),n=0;n<r.length;++n){var i=r[n];if(null!==i){var o=e.getSubjectTriples(i);if(null!==o){var a=o.predicates;for(var s in a)for(var l=a[s].objects,u=0;u<l.length;++u){var c=l[u],p={};p.subject=0===i.indexOf("_:")?{type:"blank node",value:i}:{type:"IRI",value:i},p.predicate=0===s.indexOf("_:")?{type:"blank node",value:s}:{type:"IRI",value:s};var f=c.value;if(c.type===jt){vt||Ut();var d=new vt;f="";for(var h=0;h<c.value.length;h++)c.value[h].nodeType===gt.ELEMENT_NODE?f+=d.serializeToString(c.value[h]):c.value[h].nodeType===gt.TEXT_NODE&&(f+=c.value[h].nodeValue)}p.object={},c.type===St?p.object.type=0===c.value.indexOf("_:")?"blank node":"IRI":(p.object.type="literal",c.type===Tt?c.language?(p.object.datatype=Lt,p.object.language=c.language):p.object.datatype=xt:p.object.datatype=c.type),p.object.value=f,t["@default"].push(p)}}}}return t}function ct(e){this.prefix=e,this.counter=0,this.existing={}}function pt(e,t){var r="";0===e.indexOf("/")&&(r="/");for(var n=e.split("/"),i=[];n.length>0;)"."===n[0]||""===n[0]&&n.length>1?n.shift():".."!==n[0]?i.push(n.shift()):(n.shift(),t||i.length>0&&".."!==i[i.length-1]?i.pop():i.push(".."));return r+i.join("/")}t.compact=function(e,r,n,i){function o(e,t,n,o){if(e)return i(e);o.compactArrays&&!o.graph&&q(t)?1===t.length?t=t[0]:0===t.length&&(t={}):o.graph&&M(t)&&(t=[t]),M(r)&&"@context"in r&&(r=r["@context"]),r=nt(r),q(r)||(r=[r]);var a=r;r=[];for(var s=0;s<a.length;++s)(!M(a[s])||Object.keys(a[s]).length>0)&&r.push(a[s]);var l=r.length>0;if(1===r.length&&(r=r[0]),q(t)){var u=O(n,"@graph"),c=t;t={},l&&(t["@context"]=r),t[u]=c}else if(M(t)&&l){var c=t;t={"@context":r};for(var p in c)t[p]=c[p]}i(null,t,n)}if(arguments.length<2)return t.nextTick(function(){i(new TypeError("Could not compact, too few arguments."))});if("function"==typeof n&&(i=n,n={}),n=n||{},null===r)return t.nextTick(function(){i(new Ot("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"}))});if(null===e)return t.nextTick(function(){i(null,null)});"base"in n||(n.base="string"==typeof e?e:""),"compactArrays"in n||(n.compactArrays=!0),"graph"in n||(n.graph=!1),"skipExpansion"in n||(n.skipExpansion=!1),"documentLoader"in n||(n.documentLoader=t.loadDocument),"link"in n||(n.link=!1),n.link&&(n.skipExpansion=!0);var a=function(e,r,n){t.nextTick(function(){return r.skipExpansion?n(null,e):void t.expand(e,r,n)})};a(e,n,function(e,a){if(e)return i(new Ot("Could not expand input before compaction.","jsonld.CompactError",{cause:e}));var s=U(n);t.processContext(s,r,n,function(e,t){if(e)return i(new Ot("Could not process context before compaction.","jsonld.CompactError",{cause:e}));var r;try{r=(new Rt).compact(t,null,a,n)}catch(s){return i(s)}o(null,r,t,n)})})},t.expand=function(e,r,n){function i(e){"base"in r||(r.base=e.documentUrl||"");var t={document:nt(e.document),remoteContext:{"@context":e.contextUrl}};if("expandContext"in r){var i=nt(r.expandContext);t.expandContext="object"==typeof i&&"@context"in i?i:{"@context":i}}ot(t,r,function(e,t){if(e)return n(e);var i;try{var o=new Rt,a=U(r),s=t.document,l=t.remoteContext["@context"];t.expandContext&&(a=o.processContext(a,t.expandContext["@context"],r)),l&&(a=o.processContext(a,l,r)),i=o.expand(a,null,s,r,!1),M(i)&&"@graph"in i&&1===Object.keys(i).length?i=i["@graph"]:null===i&&(i=[]),q(i)||(i=[i])}catch(u){return n(u)}n(null,i)})}return arguments.length<1?t.nextTick(function(){n(new TypeError("Could not expand, too few arguments."))}):("function"==typeof r&&(n=r,r={}),r=r||{},"documentLoader"in r||(r.documentLoader=t.loadDocument),"keepFreeFloatingNodes"in r||(r.keepFreeFloatingNodes=!1),void t.nextTick(function(){if("string"==typeof e){var t=function(e,t){if(e)return n(e);try{if(!t.document)throw new Ot("No remote document found at the given URL.","jsonld.NullRemoteDocument");"string"==typeof t.document&&(t.document=JSON.parse(t.document))}catch(r){return n(new Ot("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",cause:r,remoteDoc:t}))}i(t)},o=r.documentLoader(e,t);return void(o&&"then"in o&&o.then(t.bind(null,null),t))}i({contextUrl:null,documentUrl:null,document:e})}))},t.flatten=function(e,r,n,i){return arguments.length<1?t.nextTick(function(){i(new TypeError("Could not flatten, too few arguments."))}):("function"==typeof n?(i=n,n={}):"function"==typeof r&&(i=r,r=null,n={}),n=n||{},"base"in n||(n.base="string"==typeof e?e:""),"documentLoader"in n||(n.documentLoader=t.loadDocument),void t.expand(e,n,function(e,o){if(e)return i(new Ot("Could not expand input before flattening.","jsonld.FlattenError",{cause:e}));var a;try{a=(new Rt).flatten(o)}catch(s){return i(s)}return null===r?i(null,a):(n.graph=!0,n.skipExpansion=!0,void t.compact(a,r,n,function(e,t){return e?i(new Ot("Could not compact flattened output.","jsonld.FlattenError",{cause:e})):void i(null,t)}))}))},t.frame=function(e,r,n,i){function o(r){var o,a=r.document;a?(o=a["@context"],r.contextUrl?(o?q(o)?o.push(r.contextUrl):o=[o,r.contextUrl]:o=r.contextUrl,a["@context"]=o):o=o||{}):o={},t.expand(e,n,function(e,r){if(e)return i(new Ot("Could not expand input before framing.","jsonld.FrameError",{cause:e}));var s=nt(n);s.isFrame=!0,s.keepFreeFloatingNodes=!0,t.expand(a,s,function(e,n){if(e)return i(new Ot("Could not expand frame before framing.","jsonld.FrameError",{cause:e}));var a;try{a=(new Rt).frame(r,n,s)}catch(l){return i(l)}s.graph=!0,s.skipExpansion=!0,s.link={},t.compact(a,o,s,function(e,t,r){if(e)return i(new Ot("Could not compact framed output.","jsonld.FrameError",{cause:e}));var n=O(r,"@graph");// remove @preserve from results
s.link={},t[n]=L(r,t[n],s),i(null,t)})})})}return arguments.length<2?t.nextTick(function(){i(new TypeError("Could not frame, too few arguments."))}):("function"==typeof n&&(i=n,n={}),n=n||{},"base"in n||(n.base="string"==typeof e?e:""),"documentLoader"in n||(n.documentLoader=t.loadDocument),"embed"in n||(n.embed="@last"),n.explicit=n.explicit||!1,"requireAll"in n||(n.requireAll=!0),n.omitDefault=n.omitDefault||!1,void t.nextTick(function(){if("string"==typeof r){var e=function(e,t){if(e)return i(e);try{if(!t.document)throw new Ot("No remote document found at the given URL.","jsonld.NullRemoteDocument");"string"==typeof t.document&&(t.document=JSON.parse(t.document))}catch(r){return i(new Ot("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",cause:r,remoteDoc:t}))}o(t)},t=n.documentLoader(r,e);return void(t&&"then"in t&&t.then(e.bind(null,null),e))}o({contextUrl:null,documentUrl:null,document:r})}))},t.link=function(e,r,n,i){var o={};r&&(o["@context"]=r),o["@embed"]="@link",t.frame(e,o,n,i)},t.objectify=function(e,r,n,i){"function"==typeof n&&(i=n,n={}),n=n||{},"base"in n||(n.base="string"==typeof e?e:""),"documentLoader"in n||(n.documentLoader=t.loadDocument),t.expand(e,n,function(e,o){if(e)return i(new Ot("Could not expand input before linking.","jsonld.LinkError",{cause:e}));var a;try{a=(new Rt).flatten(o)}catch(s){return i(s)}n.graph=!0,n.skipExpansion=!0,t.compact(a,r,n,function(e,r,n){if(e)return i(new Ot("Could not compact flattened output before linking.","jsonld.LinkError",{cause:e}));var o=O(n,"@graph"),a=r[o][0],s=function(e){if(M(e)||q(e)){if(M(e)){if(s.visited[e["@id"]])return;s.visited[e["@id"]]=!0}for(var r in e){var i=e[r],o="@id"===t.getContextValue(n,r,"@type");if(q(i)||M(i)||o)if(z(i)&&o)e[r]=i=a[i],s(i);else if(q(i))for(var l=0;l<i.length;++l)z(i[l])&&o?i[l]=a[i[l]]:M(i[l])&&"@id"in i[l]&&(i[l]=a[i[l]["@id"]]),s(i[l]);else if(M(i)){var u=i["@id"];e[r]=i=a[u],s(i)}}}};s.visited={},s(a),r.of_type={};for(var l in a)if("@type"in a[l]){var u=a[l]["@type"];q(u)||(u=[u]);for(var c in u)u[c]in r.of_type||(r.of_type[u[c]]=[]),r.of_type[u[c]].push(a[l])}i(null,r)})})},t.normalize=function(e,r,n){if(arguments.length<1)return t.nextTick(function(){n(new TypeError("Could not normalize, too few arguments."))});"function"==typeof r&&(n=r,r={}),r=r||{},"base"in r||(r.base="string"==typeof e?e:""),"documentLoader"in r||(r.documentLoader=t.loadDocument);var i=nt(r);delete i.format,i.produceGeneralizedRdf=!1,t.toRDF(e,i,function(e,t){return e?n(new Ot("Could not convert input to RDF dataset before normalization.","jsonld.NormalizeError",{cause:e})):void(new Rt).normalize(t,r,n)})},t.fromRDF=function(e,r,n){return arguments.length<1?t.nextTick(function(){n(new TypeError("Could not convert from RDF, too few arguments."))}):("function"==typeof r&&(n=r,r={}),r=r||{},"useRdfType"in r||(r.useRdfType=!1),"useNativeTypes"in r||(r.useNativeTypes=!1),"format"in r||!z(e)||"format"in r||(r.format="application/nquads"),void t.nextTick(function(){function t(e,t,r){(new Rt).fromRDF(e,t,r)}var i;if(r.format){if(i=r.rdfParser||ht[r.format],!i)return n(new Ot("Unknown input format.","jsonld.UnknownFormat",{format:r.format}))}else i=function(){return e};var o=!1;try{e=i(e,function(e,i){return o=!0,e?n(e):void t(i,r,n)})}catch(a){if(!o)return n(a);throw a}if(e){if("then"in e)return e.then(function(e){t(e,r,n)},n);t(e,r,n)}}))},t.toRDF=function(e,r,n){return arguments.length<1?t.nextTick(function(){n(new TypeError("Could not convert to RDF, too few arguments."))}):("function"==typeof r&&(n=r,r={}),r=r||{},"base"in r||(r.base="string"==typeof e?e:""),"documentLoader"in r||(r.documentLoader=t.loadDocument),void t.expand(e,r,function(e,t){if(e)return n(new Ot("Could not expand input before serialization to RDF.","jsonld.RdfError",{cause:e}));var i;try{if(i=Rt.prototype.toRDF(t,r),r.format){if("application/nquads"===r.format)return n(null,st(i));throw new Ot("Unknown output format.","jsonld.UnknownFormat",{format:r.format})}}catch(o){return n(o)}n(null,i)}))},t.createNodeMap=function(e,r,n){return arguments.length<1?t.nextTick(function(){n(new TypeError("Could not create node map, too few arguments."))}):("function"==typeof r&&(n=r,r={}),r=r||{},"base"in r||(r.base="string"==typeof e?e:""),"documentLoader"in r||(r.documentLoader=t.loadDocument),void t.expand(e,r,function(e,t){if(e)return n(new Ot("Could not expand input before creating node map.","jsonld.CreateNodeMapError",{cause:e}));var i;try{i=(new Rt).createNodeMap(t,r)}catch(o){return n(o)}n(null,i)}))},t.merge=function(e,r,n,i){function o(e,t){if(!l){if(e)return l=e,i(new Ot("Could not expand input before flattening.","jsonld.FlattenError",{cause:e}));s.push(t),0===--u&&a(s)}}function a(e){var o=!0;"mergeNodes"in n&&(o=n.mergeNodes);var a,s=n.namer||new ct("_:b"),l={"@default":{}};try{for(var u=0;u<e.length;++u){var c=e[u];c=t.relabelBlankNodes(c,{namer:new ct("_:b"+u+"-")});var p=o||0===u?l:{"@default":{}};if(m(c,p,"@default",s),p!==l)for(var f in p){var d=p[f];if(f in l){var h=l[f];for(var v in d)v in h||(h[v]=d[v])}else l[f]=d}}a=x(l)}catch(g){return i(g)}for(var y=[],b=Object.keys(a).sort(),k=0;k<b.length;++k){var $=a[b[k]];Z($)||y.push($)}return null===r?i(null,y):(n.graph=!0,n.skipExpansion=!0,void t.compact(y,r,n,function(e,t){return e?i(new Ot("Could not compact merged output.","jsonld.MergeError",{cause:e})):void i(null,t)}))}if(arguments.length<1)return t.nextTick(function(){i(new TypeError("Could not merge, too few arguments."))});if(!q(e))return t.nextTick(function(){i(new TypeError('Could not merge, "docs" must be an array.'))});"function"==typeof n?(i=n,n={}):"function"==typeof r&&(i=r,r=null,n={}),n=n||{};for(var s=[],l=null,u=e.length,c=0;c<e.length;++c){var p={};for(var f in n)p[f]=n[f];t.expand(e[c],p,o)}},t.relabelBlankNodes=function(e,t){t=t||{};var r=t.namer||new ct("_:b");return u(r,e)},t.documentLoader=function(e,r){var n=new Ot("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed"});return o?r(n,{contextUrl:null,documentUrl:e,document:null}):t.promisify(function(e){e(n)})},t.loadDocument=function(e,r){var n=t.documentLoader(e,r);n&&"then"in n&&n.then(r.bind(null,null),r)},t.promises=function(r){r=r||{};var i=Array.prototype.slice,o=t.promisify,a=r.api||{},s=r.version||"jsonld.js";"string"==typeof r.api&&(r.version||(s=r.api),a={}),a.expand=function(){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");return o.apply(null,[t.expand].concat(i.call(arguments)))},a.compact=function(){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");var e=function(e,r,n,i){t.compact(e,r,n,function(e,t){i(e,t)})};return o.apply(null,[e].concat(i.call(arguments)))},a.flatten=function(){if(arguments.length<1)throw new TypeError("Could not flatten, too few arguments.");return o.apply(null,[t.flatten].concat(i.call(arguments)))},a.frame=function(){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");return o.apply(null,[t.frame].concat(i.call(arguments)))},a.fromRDF=function(){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");return o.apply(null,[t.fromRDF].concat(i.call(arguments)))},a.toRDF=function(){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");return o.apply(null,[t.toRDF].concat(i.call(arguments)))},a.normalize=function(){if(arguments.length<1)throw new TypeError("Could not normalize, too few arguments.");return o.apply(null,[t.normalize].concat(i.call(arguments)))},"jsonld.js"===s&&(a.link=function(){if(arguments.length<2)throw new TypeError("Could not link, too few arguments.");return o.apply(null,[t.link].concat(i.call(arguments)))},a.objectify=function(){return o.apply(null,[t.objectify].concat(i.call(arguments)))},a.createNodeMap=function(){return o.apply(null,[t.createNodeMap].concat(i.call(arguments)))},a.merge=function(){return o.apply(null,[t.merge].concat(i.call(arguments)))});try{t.Promise=n.Promise||e("es6-promise").Promise}catch(l){var u=function(){throw Error("Unable to find a Promise implementation.")};for(var c in a)a[c]=u}return a},t.promisify=function(r){if(!t.Promise)try{t.Promise=n.Promise||e("es6-promise").Promise}catch(i){throw Error("Unable to find a Promise implementation.")}var o=Array.prototype.slice.call(arguments,1);return new t.Promise(function(e,t){r.apply(null,o.concat(function(r,n){r?t(r):e(n)}))})},t.promises({api:t.promises}),s.prototype=t.promises({version:"json-ld-1.0"}),s.prototype.toString=function(){return this instanceof s?"[object JsonLdProcessor]":"[object JsonLdProcessorPrototype]"},t.JsonLdProcessor=s;var ft=!!Object.defineProperty;if(ft)try{Object.defineProperty({},"x",{})}catch(dt){ft=!1}ft&&(Object.defineProperty(s,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(s.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:s})),a&&void 0===n.JsonLdProcessor&&(ft?Object.defineProperty(n,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:s}):n.JsonLdProcessor=s),void 0!==r&&r.nextTick?(t.nextTick=r.nextTick,t.setImmediate="function"==typeof setImmediate?setImmediate:t.nextTick):"function"==typeof setImmediate?t.setImmediate=t.nextTick=function(e){return setImmediate(e)}:(t.setImmediate=function(e){setTimeout(e,0)},t.nextTick=t.setImmediate),t.parseLinkHeader=function(e){for(var t={},r=e.match(/(?:<[^>]*?>|"[^"]*?"|[^,])+/g),n=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,i=0;i<r.length;++i){var o=r[i].match(n);if(o){for(var a={target:o[1]},s=o[2],l=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g;o=l.exec(s);)a[o[1]]=void 0===o[2]?o[3]:o[2];var u=a.rel||"";q(t[u])?t[u].push(a):t[u]=u in t?[t[u],a]:a}}return t},t.DocumentCache=function(e){this.order=[],this.cache={},this.size=e||50,this.expires=3e4},t.DocumentCache.prototype.get=function(e){if(e in this.cache){var t=this.cache[e];if(t.expires>=+new Date)return t.ctx;delete this.cache[e],this.order.splice(this.order.indexOf(e),1)}return null},t.DocumentCache.prototype.set=function(e,t){this.order.length===this.size&&delete this.cache[this.order.shift()],this.order.push(e),this.cache[e]={ctx:t,expires:+new Date+this.expires}},t.ActiveContextCache=function(e){this.order=[],this.cache={},this.size=e||100},t.ActiveContextCache.prototype.get=function(e,t){var r=JSON.stringify(e),n=JSON.stringify(t),i=this.cache[r];return i&&n in i?i[n]:null},t.ActiveContextCache.prototype.set=function(e,t,r){if(this.order.length===this.size){var n=this.order.shift();delete this.cache[n.activeCtx][n.localCtx]}var i=JSON.stringify(e),o=JSON.stringify(t);this.order.push({activeCtx:i,localCtx:o}),i in this.cache||(this.cache[i]={}),this.cache[i][o]=nt(r)},t.cache={activeCtx:new t.ActiveContextCache},t.documentLoaders={},t.documentLoaders.jquery=function(e,r){r=r||{};var n=function(n,i){return 0!==n.indexOf("http:")&&0!==n.indexOf("https:")?i(new Ot('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:n}),{contextUrl:null,documentUrl:n,document:null}):r.secure&&0!==n.indexOf("https")?i(new Ot('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:n}),{contextUrl:null,documentUrl:n,document:null}):void e.ajax({url:n,accepts:{json:"application/ld+json, application/json"},headers:{Accept:"application/ld+json, application/json"},dataType:"json",crossDomain:!0,success:function(e,r,o){var a={contextUrl:null,documentUrl:n,document:e},s=o.getResponseHeader("Content-Type"),l=o.getResponseHeader("Link");if(l&&"application/ld+json"!==s){if(l=t.parseLinkHeader(l)[Nt],q(l))return i(new Ot("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:n}),a);l&&(a.contextUrl=l.target)}i(null,a)},error:function(e,t,r){i(new Ot("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:n,cause:r}),{contextUrl:null,documentUrl:n,document:null})}})},i="undefined"!=typeof Promise;return"usePromise"in r&&(i=r.usePromise),i?function(e){return t.promisify(n,e)}:n},t.documentLoaders.node=function(r){function n(e,u,c){function p(r,i,a){if(f={contextUrl:null,documentUrl:e,document:a||null},r)return c(new Ot("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:e,cause:r}),f);var p=s.STATUS_CODES[i.statusCode];if(i.statusCode>=400)return c(new Ot("URL could not be dereferenced: "+p,"jsonld.InvalidUrl",{code:"loading document failed",url:e,httpStatusCode:i.statusCode}),f);if(i.headers.link&&"application/ld+json"!==i.headers["content-type"]){var d=t.parseLinkHeader(i.headers.link)[Nt];if(q(d))return c(new Ot("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:e}),f);d&&(f.contextUrl=d.target)}if(i.statusCode>=300&&i.statusCode<400&&i.headers.location)return u.length===o?c(new Ot("URL could not be dereferenced; there were too many redirects.","jsonld.TooManyRedirects",{code:"loading document failed",url:e,httpStatusCode:i.statusCode,redirects:u}),f):-1!==u.indexOf(e)?c(new Ot("URL could not be dereferenced; infinite redirection was detected.","jsonld.InfiniteRedirectDetected",{code:"recursive context inclusion",url:e,httpStatusCode:i.statusCode,redirects:u}),f):(u.push(e),n(i.headers.location,u,c));u.push(e);for(var h=0;h<u.length;++h)l.set(u[h],{contextUrl:null,documentUrl:u[h],document:a});c(r,f)}if(0!==e.indexOf("http:")&&0!==e.indexOf("https:"))return c(new Ot('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:e}),{contextUrl:null,documentUrl:e,document:null});if(r.secure&&0!==e.indexOf("https"))return c(new Ot('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:e}),{contextUrl:null,documentUrl:e,document:null});var f=l.get(e);return null!==f?c(null,f):void a({url:e,headers:{Accept:"application/ld+json, application/json"},strictSSL:i,followRedirect:!1},p)}r=r||{};var i="strictSSL"in r?r.strictSSL:!0,o="maxRedirects"in r?r.maxRedirects:-1,a=e("request"),s=e("http"),l=new t.DocumentCache,u=function(e,t){n(e,[],t)};return r.usePromise?function(e){return t.promisify(u,e)}:u},t.documentLoaders.xhr=function(e){var r=/(^|(\r\n))link:/i;e=e||{};var n=function(n,i){if(0!==n.indexOf("http:")&&0!==n.indexOf("https:"))return i(new Ot('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:n}),{contextUrl:null,documentUrl:n,document:null});if(e.secure&&0!==n.indexOf("https"))return i(new Ot('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:n}),{contextUrl:null,documentUrl:n,document:null});var o=e.xhr||XMLHttpRequest,a=new o;a.onload=function(){if(a.status>=400)return i(new Ot("URL could not be dereferenced: "+a.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:n,httpStatusCode:a.status}),{contextUrl:null,documentUrl:n,document:null});var e,o={contextUrl:null,documentUrl:n,document:a.response},s=a.getResponseHeader("Content-Type");if(r.test(a.getAllResponseHeaders())&&(e=a.getResponseHeader("Link")),e&&"application/ld+json"!==s){if(e=t.parseLinkHeader(e)[Nt],q(e))return i(new Ot("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:n}),o);e&&(o.contextUrl=e.target)}i(null,o)},a.onerror=function(){i(new Ot("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:n}),{contextUrl:null,documentUrl:n,document:null})},a.open("GET",n,!0),a.setRequestHeader("Accept","application/ld+json, application/json"),a.send()},i="undefined"!=typeof Promise;return"usePromise"in e&&(i=e.usePromise),i?function(e){return t.promisify(n,e)}:n},t.useDocumentLoader=function(e){if(!(e in t.documentLoaders))throw new Ot('Unknown document loader type: "'+e+'"',"jsonld.UnknownDocumentLoader",{type:e});t.documentLoader=t.documentLoaders[e].apply(t,Array.prototype.slice.call(arguments,1))},t.processContext=function(e,r){var n={},i=2;arguments.length>3&&(n=arguments[2]||{},i+=1);var o=arguments[i];return"base"in n||(n.base=""),"documentLoader"in n||(n.documentLoader=t.loadDocument),null===r?o(null,U(n)):(r=nt(r),M(r)&&"@context"in r||(r={"@context":r}),void ot(r,n,function(t,r){if(t)return o(t);try{r=(new Rt).processContext(e,r,n)}catch(i){return o(i)}o(null,r)}))},t.hasProperty=function(e,t){var r=!1;if(t in e){var n=e[t];r=!q(n)||n.length>0}return r},t.hasValue=function(e,r,n){var i=!1;if(t.hasProperty(e,r)){var o=e[r],a=et(o);if(q(o)||a){a&&(o=o["@list"]);for(var s=0;s<o.length;++s)if(t.compareValues(n,o[s])){i=!0;break}}else q(n)||(i=t.compareValues(n,o))}return i},t.addValue=function(e,r,n,i){if(i=i||{},"propertyIsArray"in i||(i.propertyIsArray=!1),"allowDuplicate"in i||(i.allowDuplicate=!0),q(n)){0!==n.length||!i.propertyIsArray||r in e||(e[r]=[]);for(var o=0;o<n.length;++o)t.addValue(e,r,n[o],i)}else if(r in e){var a=!i.allowDuplicate&&t.hasValue(e,r,n);q(e[r])||a&&!i.propertyIsArray||(e[r]=[e[r]]),a||e[r].push(n)}else e[r]=i.propertyIsArray?[n]:n},t.getValues=function(e,t){var r=e[t]||[];return q(r)||(r=[r]),r},t.removeProperty=function(e,t){delete e[t]},t.removeValue=function(e,r,n,i){i=i||{},"propertyIsArray"in i||(i.propertyIsArray=!1);var o=t.getValues(e,r).filter(function(e){return!t.compareValues(e,n)});0===o.length?t.removeProperty(e,r):e[r]=1!==o.length||i.propertyIsArray?o:o[0]},t.compareValues=function(e,t){return e===t?!0:Y(e)&&Y(t)&&e["@value"]===t["@value"]&&e["@type"]===t["@type"]&&e["@language"]===t["@language"]&&e["@index"]===t["@index"]?!0:M(e)&&"@id"in e&&M(t)&&"@id"in t?e["@id"]===t["@id"]:!1},t.getContextValue=function(e,t,r){var n=null;if(null===t)return n;if("@language"===r&&r in e&&(n=e[r]),e.mappings[t]){var i=e.mappings[t];Q(r)?n=i:r in i&&(n=i[r])}return n};var ht={};if(t.registerRDFParser=function(e,t){ht[e]=t},t.unregisterRDFParser=function(e){delete ht[e]},o){if(void 0===vt)var vt=null;if(void 0===gt)var gt={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12}}var yt="http://www.w3.org/2001/XMLSchema#boolean",bt="http://www.w3.org/2001/XMLSchema#double",mt="http://www.w3.org/2001/XMLSchema#integer",xt="http://www.w3.org/2001/XMLSchema#string",kt="http://www.w3.org/1999/02/22-rdf-syntax-ns#",$t=kt+"List",wt=kt+"first",_t=kt+"rest",Et=kt+"nil",It=kt+"type",Tt=kt+"PlainLiteral",jt=kt+"XMLLiteral",St=kt+"object",Lt=kt+"langString",Nt="http://www.w3.org/ns/json-ld#context",Ct=10,Ot=function(e,t,r){o?(Error.call(this),Error.captureStackTrace(this,this.constructor)):"undefined"!=typeof Error&&(this.stack=Error().stack),this.name=t||"jsonld.Error",this.message=e||"An unspecified JSON-LD error occurred.",this.details=r||{}};o?e("util").inherits(Ot,Error):"undefined"!=typeof Error&&(Ot.prototype=Error());var Rt=function(){};Rt.prototype.compact=function(e,r,n,i){if(q(n)){for(var o=[],a=0;a<n.length;++a){var s=this.compact(e,r,n[a],i);null!==s&&o.push(s)}if(i.compactArrays&&1===o.length){var l=t.getContextValue(e,r,"@container");null===l&&(o=o[0])}return o}if(M(n)){if(i.link&&"@id"in n&&n["@id"]in i.link)for(var u=i.link[n["@id"]],a=0;a<u.length;++a)if(u[a].expanded===n)return u[a].compacted;if(Y(n)||Z(n)){var o=R(e,r,n);return i.link&&Z(n)&&(n["@id"]in i.link||(i.link[n["@id"]]=[]),i.link[n["@id"]].push({expanded:n,compacted:o})),o}var c="@reverse"===r,o={};i.link&&"@id"in n&&(n["@id"]in i.link||(i.link[n["@id"]]=[]),i.link[n["@id"]].push({expanded:n,compacted:o}));for(var p=Object.keys(n).sort(),f=0;f<p.length;++f){var d=p[f],h=n[d];if("@id"!==d&&"@type"!==d)if("@reverse"!==d)if("@index"!==d)if("@graph"!==d&&"@list"!==d&&B(d)){var v=O(e,d);t.addValue(o,v,h)}else{if(0===h.length){var g=O(e,d,h,{vocab:!0},c);t.addValue(o,g,h,{propertyIsArray:!0})}for(var y=0;y<h.length;++y){var b=h[y],g=O(e,d,b,{vocab:!0},c),l=t.getContextValue(e,g,"@container"),m=et(b),x=null;m&&(x=b["@list"]);var k=this.compact(e,g,m?x:b,i);if(m)if(q(k)||(k=[k]),"@list"!==l){var $={};$[O(e,"@list")]=k,k=$,"@index"in b&&(k[O(e,"@index")]=b["@index"])}else if(g in o)throw new Ot('JSON-LD compact error; property has a "@list" @container rule but there is more than a single @list that matches the compacted term in the document. Compaction might mix unwanted items into the list.',"jsonld.SyntaxError",{code:"compaction to list of lists"});if("@language"===l||"@index"===l){var w;g in o?w=o[g]:o[g]=w={},"@language"===l&&Y(k)&&(k=k["@value"]),t.addValue(w,b[l],k)}else{var _=!i.compactArrays||"@set"===l||"@list"===l||q(k)&&0===k.length||"@list"===d||"@graph"===d;t.addValue(o,g,k,{propertyIsArray:_})}}}else{var l=t.getContextValue(e,r,"@container");if("@index"===l)continue;var v=O(e,d);t.addValue(o,v,h)}else{var E=this.compact(e,"@reverse",h,i);for(var I in E)if(e.mappings[I]&&e.mappings[I].reverse){var T=E[I],l=t.getContextValue(e,I,"@container"),j="@set"===l||!i.compactArrays;t.addValue(o,I,T,{propertyIsArray:j}),delete E[I]}if(Object.keys(E).length>0){var v=O(e,d);t.addValue(o,v,E)}}else{var E;if(z(h))E=O(e,h,null,{vocab:"@type"===d});else{E=[];for(var y=0;y<h.length;++y)E.push(O(e,h[y],null,{vocab:!0}))}var v=O(e,d),_=q(E)&&0===h.length;t.addValue(o,v,E,{propertyIsArray:_})}}return o}return n},Rt.prototype.expand=function(e,r,n,i,o){var a=this;if(null===n||void 0===n)return null;if(!q(n)&&!M(n))return o||null!==r&&"@graph"!==F(e,r,{vocab:!0})?c(e,r,n):null;if(q(n)){var s=[],u=t.getContextValue(e,r,"@container");o=o||"@list"===u;for(var p=0;p<n.length;++p){var f=a.expand(e,r,n[p],i);if(o&&(q(f)||et(f)))throw new Ot("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError",{code:"list of lists"});null!==f&&(q(f)?s=s.concat(f):s.push(f))}return s}"@context"in n&&(e=a.processContext(e,n["@context"],i));for(var d=F(e,r,{vocab:!0}),s={},h=Object.keys(n).sort(),v=0;v<h.length;++v){var g,y=h[v],b=n[y];if("@context"!==y){var m=F(e,y,{vocab:!0});if(null!==m&&(rt(m)||B(m))){if(B(m)){if("@reverse"===d)throw new Ot("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:b});if(m in s)throw new Ot("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:m})}if("@id"===m&&!z(b)){if(!i.isFrame)throw new Ot('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:b});if(!M(b))throw new Ot('Invalid JSON-LD syntax; "@id" value must be a string or an object.',"jsonld.SyntaxError",{code:"invalid @id value",value:b})}if("@type"===m&&V(b),"@graph"===m&&!M(b)&&!q(b))throw new Ot('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:b});if("@value"===m&&(M(b)||q(b)))throw new Ot('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:b});if("@language"===m){if(null===b)continue;if(!z(b))throw new Ot('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:b});b=b.toLowerCase()}if("@index"===m&&!z(b))throw new Ot('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:b});if("@reverse"!==m){var u=t.getContextValue(e,y,"@container");if("@language"===u&&M(b))g=l(b);else if("@index"===u&&M(b))g=function(t){for(var r=[],n=Object.keys(b).sort(),o=0;o<n.length;++o){var s=n[o],l=b[s];q(l)||(l=[l]),l=a.expand(e,t,l,i,!1);for(var u=0;u<l.length;++u){var c=l[u];"@index"in c||(c["@index"]=s),r.push(c)}}return r}(y);else{var x="@list"===m;if(x||"@set"===m){var k=r;if(x&&"@graph"===d&&(k=null),g=a.expand(e,k,b,i,x),x&&et(g))throw new Ot("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError",{code:"list of lists"})}else g=a.expand(e,y,b,i,!1)}if(null!==g||"@value"===m)if("@list"===m||et(g)||"@list"!==u||(g=q(g)?g:[g],g={"@list":g}),e.mappings[y]&&e.mappings[y].reverse){var $=s["@reverse"]=s["@reverse"]||{};q(g)||(g=[g]);for(var w=0;w<g.length;++w){var _=g[w];if(Y(_)||et(_))throw new Ot('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:g});t.addValue($,m,_,{propertyIsArray:!0})}}else{var E=-1===["@index","@id","@type","@value","@language"].indexOf(m);t.addValue(s,m,g,{propertyIsArray:E})}}else{if(!M(b))throw new Ot('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:b});if(g=a.expand(e,"@reverse",b,i),"@reverse"in g)for(var I in g["@reverse"])t.addValue(s,I,g["@reverse"][I],{propertyIsArray:!0});var $=s["@reverse"]||null;for(var I in g)if("@reverse"!==I){null===$&&($=s["@reverse"]={}),t.addValue($,I,[],{propertyIsArray:!0});for(var T=g[I],w=0;w<T.length;++w){var _=T[w];if(Y(_)||et(_))throw new Ot('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:g});t.addValue($,I,_,{propertyIsArray:!0})}}}}}}h=Object.keys(s);var j=h.length;if("@value"in s){if("@type"in s&&"@language"in s)throw new Ot('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:s});var S=j-1;if("@type"in s&&(S-=1),"@index"in s&&(S-=1),"@language"in s&&(S-=1),0!==S)throw new Ot('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and at most one other property which can be "@type" or "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:s});if(null===s["@value"])s=null;else{if("@language"in s&&!z(s["@value"]))throw new Ot("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:s});if("@type"in s&&(!rt(s["@type"])||0===s["@type"].indexOf("_:")))throw new Ot('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:s})}}else if("@type"in s&&!q(s["@type"]))s["@type"]=[s["@type"]];else if("@set"in s||"@list"in s){if(j>1&&!(2===j&&"@index"in s))throw new Ot('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:s});"@set"in s&&(s=s["@set"],h=Object.keys(s),j=h.length)}else 1===j&&"@language"in s&&(s=null);return!M(s)||i.keepFreeFloatingNodes||o||null!==r&&"@graph"!==d||(0===j||"@value"in s||"@list"in s||1===j&&"@id"in s)&&(s=null),s},Rt.prototype.createNodeMap=function(e,t){t=t||{};var r=t.namer||new ct("_:b"),n={"@default":{}};return m(e,n,"@default",r),x(n)},Rt.prototype.flatten=function(e){for(var t=this.createNodeMap(e),r=[],n=Object.keys(t).sort(),i=0;i<n.length;++i){var o=t[n[i]];Z(o)||r.push(o)}return r},Rt.prototype.frame=function(e,t,r){var n={options:r,graphs:{"@default":{},"@merged":{}},subjectStack:[],link:{}},i=new ct("_:b");m(e,n.graphs,"@merged",i),n.subjects=n.graphs["@merged"];var o=[];return k(n,Object.keys(n.subjects).sort(),t,o,null),o},Rt.prototype.normalize=function(e,r,n){function i(e){function r(s){if(s===e.length)return o(a,i,n);var l=e[s],c=g(l,u);c in i?(i[c].push(l),n.push(l)):c in a?(i[c]=[a[c],l],n.push(a[c]),n.push(l),delete a[c]):a[c]=l,t.setImmediate(function(){r(s+1)})}var n=[],i={},a={};t.setImmediate(function(){r(0)})}function o(e,t,r){for(var n=!1,o=Object.keys(e).sort(),s=0;s<o.length;++s){var l=e[o[s]];x.getName(l),n=!0}n?i(r):a(t)}function a(e){function t(i){function o(e,r){if(r===e.length){l.sort(function(e,t){return e=e.hash,t=t.hash,t>e?-1:e>t?1:0});for(var a in l)for(var s in l[a].pathNamer.existing)x.getName(s);return t(i+1)}var c=e[r];if(x.isNamed(c))return o(e,r+1);var p=new ct("_:b");p.getName(c),y(c,u,x,p,function(t,i){return t?n(t):(l.push(i),void o(e,r+1))})}if(i===r.length)return s();var a=e[r[i]],l=[];o(a,0)}var r=Object.keys(e).sort();t(0)}function s(){for(var e=[],t=0;t<l.length;++t){for(var i=l[t],o=["subject","object","name"],a=0;a<o.length;++a){var s=o[a];i[s]&&"blank node"===i[s].type&&0!==i[s].value.indexOf("_:c14n")&&(i[s].value=x.getName(i[s].value))}e.push(lt(i,i.name?i.name.value:null))}return e.sort(),r.format?"application/nquads"===r.format?n(null,e.join("")):n(new Ot("Unknown output format.","jsonld.UnknownFormat",{format:r.format})):void n(null,at(e.join("")))}var l=[],u={};for(var c in e){var p=e[c];"@default"===c&&(c=null);for(var f=0;f<p.length;++f){var d=p[f];null!==c&&(d.name=0===c.indexOf("_:")?{type:"blank node",value:c}:{type:"IRI",value:c}),l.push(d);for(var h=["subject","object","name"],v=0;v<h.length;++v){var b=h[v];if(d[b]&&"blank node"===d[b].type){var m=d[b].value;m in u?u[m].quads.push(d):u[m]={quads:[d]}}}}}var x=new ct("_:c14n");return i(Object.keys(u))},Rt.prototype.fromRDF=function(e,r,n){var i={},o={"@default":i},a={};for(var s in e){var l=e[s];s in o||(o[s]={}),"@default"===s||s in i||(i[s]={"@id":s});for(var u=o[s],c=0;c<l.length;++c){var p=l[c],f=p.subject.value,d=p.predicate.value,v=p.object;f in u||(u[f]={"@id":f});var g=u[f],y="IRI"===v.type||"blank node"===v.type;if(!y||v.value in u||(u[v.value]={"@id":v.value}),d!==It||r.useRdfType||!y){var b=h(v,r.useNativeTypes);if(t.addValue(g,d,b,{propertyIsArray:!0}),y)if(v.value===Et){var m=u[v.value];"usages"in m||(m.usages=[]),m.usages.push({node:g,property:d,value:b})}else a[v.value]=v.value in a?!1:{node:g,property:d,value:b}}else t.addValue(g,"@type",v.value,{propertyIsArray:!0})}}for(var s in o){var x=o[s];if(Et in x){for(var k=x[Et],$=0;$<k.usages.length;++$){for(var w=k.usages[$],g=w.node,_=w.property,E=w.value,I=[],T=[],j=Object.keys(g).length;_===_t&&M(a[g["@id"]])&&q(g[wt])&&1===g[wt].length&&q(g[_t])&&1===g[_t].length&&(3===j||4===j&&q(g["@type"])&&1===g["@type"].length&&g["@type"][0]===$t)&&(I.push(g[wt][0]),T.push(g["@id"]),w=a[g["@id"]],g=w.node,_=w.property,E=w.value,j=Object.keys(g).length,0===g["@id"].indexOf("_:")););if(_===wt){if(g["@id"]===Et)continue;E=x[E["@id"]][_t][0],I.pop(),T.pop()}delete E["@id"],E["@list"]=I.reverse();for(var S=0;S<T.length;++S)delete x[T[S]]}delete k.usages}}for(var L=[],N=Object.keys(i).sort(),$=0;$<N.length;++$){var C=N[$],g=i[C];if(C in o)for(var l=g["@graph"]=[],x=o[C],O=Object.keys(x).sort(),R=0;R<O.length;++R){var A=x[O[R]];Z(A)||l.push(A)}Z(g)||L.push(g)}n(null,L)},Rt.prototype.toRDF=function(e,t){var r=new ct("_:b"),n={"@default":{}};m(e,n,"@default",r);for(var i={},o=Object.keys(n).sort(),a=0;a<o.length;++a){var s=o[a];("@default"===s||rt(s))&&(i[s]=p(n[s],r,t))}return i},Rt.prototype.processContext=function(e,r,n){M(r)&&"@context"in r&&q(r["@context"])&&(r=r["@context"]);var i=q(r)?r:[r];if(0===i.length)return e.clone();for(var o=e,a=0;a<i.length;++a){var s=i[a];if(null!==s){if(M(s)&&"@context"in s&&(s=s["@context"]),!M(s))throw new Ot("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:s});if(t.cache.activeCtx){var l=t.cache.activeCtx.get(e,s);if(l){o=e=l;continue}}e=o,o=o.clone();var u={};if("@base"in s){var c=s["@base"];
if(null===c)c=null;else{if(!z(c))throw new Ot('Invalid JSON-LD syntax; the value of "@base" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:s});if(""!==c&&!rt(c))throw new Ot('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI or the empty string.',"jsonld.SyntaxError",{code:"invalid base IRI",context:s})}null!==c&&(c=t.url.parse(c||"")),o["@base"]=c,u["@base"]=!0}if("@vocab"in s){var p=s["@vocab"];if(null===p)delete o["@vocab"];else{if(!z(p))throw new Ot('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:s});if(!rt(p))throw new Ot('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:s});o["@vocab"]=p}u["@vocab"]=!0}if("@language"in s){var p=s["@language"];if(null===p)delete o["@language"];else{if(!z(p))throw new Ot('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:s});o["@language"]=p.toLowerCase()}u["@language"]=!0}for(var f in s)A(o,s,f,u);t.cache.activeCtx&&t.cache.activeCtx.set(e,s,o)}else o=e=U(n)}return o},Object.keys||(Object.keys=function(e){if(e!==Object(e))throw new TypeError("Object.keys called on non-object");var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}),t.registerRDFParser("application/nquads",at),t.registerRDFParser("rdfa-api",ut),t.UniqueNamer=ct,ct.prototype.clone=function(){var e=new ct(this.prefix);return e.counter=this.counter,e.existing=nt(this.existing),e},ct.prototype.getName=function(e){if(e&&e in this.existing)return this.existing[e];var t=this.prefix+this.counter;return this.counter+=1,e&&(this.existing[e]=t),t},ct.prototype.isNamed=function(e){return e in this.existing};var At=function(e){this.list=e.sort(),this.done=!1,this.left={};for(var t=0;t<e.length;++t)this.left[e[t]]=!0};At.prototype.hasNext=function(){return!this.done},At.prototype.next=function(){for(var e=this.list.slice(),t=null,r=0,n=this.list.length,i=0;n>i;++i){var o=this.list[i],a=this.left[o];(null===t||o>t)&&(a&&i>0&&o>this.list[i-1]||!a&&n-1>i&&o>this.list[i+1])&&(t=o,r=i)}if(null===t)this.done=!0;else{var s=this.left[t]?r-1:r+1;this.list[r]=this.list[s],this.list[s]=t;for(var i=0;n>i;++i)this.list[i]>t&&(this.left[this.list[i]]=!this.left[this.list[i]])}return e};var Ft=t.sha1={};if(o){var Dt=e("crypto");Ft.create=function(){var e=Dt.createHash("sha1");return{update:function(t){e.update(t,"utf8")},digest:function(){return e.digest("hex")}}}}else Ft.create=function(){return new Ft.MessageDigest};if(Ft.hash=function(e){for(var t=Ft.create(),r=0;r<e.length;++r)t.update(e[r]);return t.digest()},!o){Ft.Buffer=function(){this.data="",this.read=0},Ft.Buffer.prototype.putInt32=function(e){this.data+=String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)},Ft.Buffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},Ft.Buffer.prototype.bytes=function(){return this.data.slice(this.read)},Ft.Buffer.prototype.length=function(){return this.data.length-this.read},Ft.Buffer.prototype.compact=function(){this.data=this.data.slice(this.read),this.read=0},Ft.Buffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);16>r&&(e+="0"),e+=r.toString(16)}return e},Ft.MessageDigest=function(){Pt.initialized||Pt.init(),this.blockLength=64,this.digestLength=20,this.messageLength=0,this.input=new Ft.Buffer,this.words=Array(80),this.state={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520}},Ft.MessageDigest.prototype.update=function(e){e=unescape(encodeURIComponent(e)),this.messageLength+=e.length,this.input.data+=e,Pt.update(this.state,this.words,this.input),(this.input.read>2048||0===this.input.length())&&this.input.compact()},Ft.MessageDigest.prototype.digest=function(){var e=this.messageLength,t=new Ft.Buffer;t.data+=this.input.bytes(),t.data+=Pt.padding.substr(0,64-(e+8)%64),t.putInt32(e>>>29&255),t.putInt32(e<<3&4294967295),Pt.update(this.state,this.words,t);var r=new Ft.Buffer;return r.putInt32(this.state.h0),r.putInt32(this.state.h1),r.putInt32(this.state.h2),r.putInt32(this.state.h3),r.putInt32(this.state.h4),r.toHex()};var Pt={padding:null,initialized:!1};Pt.init=function(){Pt.padding=String.fromCharCode(128);for(var e=String.fromCharCode(0),t=64;t>0;)1&t&&(Pt.padding+=e),t>>>=1,t>0&&(e+=e);Pt.initialized=!0},Pt.update=function(e,t,r){for(var n,i,o,a,s,l,u,c,p=r.length();p>=64;){for(i=e.h0,o=e.h1,a=e.h2,s=e.h3,l=e.h4,c=0;16>c;++c)n=r.getInt32(),t[c]=n,u=s^o&(a^s),n=(i<<5|i>>>27)+u+l+1518500249+n,l=s,s=a,a=o<<30|o>>>2,o=i,i=n;for(;20>c;++c)n=t[c-3]^t[c-8]^t[c-14]^t[c-16],n=n<<1|n>>>31,t[c]=n,u=s^o&(a^s),n=(i<<5|i>>>27)+u+l+1518500249+n,l=s,s=a,a=o<<30|o>>>2,o=i,i=n;for(;32>c;++c)n=t[c-3]^t[c-8]^t[c-14]^t[c-16],n=n<<1|n>>>31,t[c]=n,u=o^a^s,n=(i<<5|i>>>27)+u+l+1859775393+n,l=s,s=a,a=o<<30|o>>>2,o=i,i=n;for(;40>c;++c)n=t[c-6]^t[c-16]^t[c-28]^t[c-32],n=n<<2|n>>>30,t[c]=n,u=o^a^s,n=(i<<5|i>>>27)+u+l+1859775393+n,l=s,s=a,a=o<<30|o>>>2,o=i,i=n;for(;60>c;++c)n=t[c-6]^t[c-16]^t[c-28]^t[c-32],n=n<<2|n>>>30,t[c]=n,u=o&a|s&(o^a),n=(i<<5|i>>>27)+u+l+2400959708+n,l=s,s=a,a=o<<30|o>>>2,o=i,i=n;for(;80>c;++c)n=t[c-6]^t[c-16]^t[c-28]^t[c-32],n=n<<2|n>>>30,t[c]=n,u=o^a^s,n=(i<<5|i>>>27)+u+l+3395469782+n,l=s,s=a,a=o<<30|o>>>2,o=i,i=n;e.h0+=i,e.h1+=o,e.h2+=a,e.h3+=s,e.h4+=l,p-=64}}}if(!vt)var Ut=function(){vt=e("xmldom").XMLSerializer};if(t.url={},t.url.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},t.url.parse=function(e,r){for(var n={},i=t.url.parsers[r||"full"],o=i.regex.exec(e),a=i.keys.length;a--;)n[i.keys[a]]=void 0===o[a]?null:o[a];return n.normalizedPath=pt(n.path,!!n.authority),n},o?t.useDocumentLoader("node"):"undefined"!=typeof XMLHttpRequest&&t.useDocumentLoader("xhr"),o){t.use=function(r){switch(r){case"request":t.request=e("./request");break;default:throw new Ot("Unknown extension.","jsonld.UnknownExtension",{extension:r})}};var Bt={exports:{},filename:i};e("pkginfo")(Bt,"version"),t.version=Bt.exports.version}return t},l=function(){return s(function(){return l()})};if(!o&&"function"==typeof define&&define.amd)define([],function(){return s(l),l});else if(s(l),"function"==typeof e&&void 0!==t&&t.exports&&(t.exports=l),a)if(void 0===u)var u=c=l;else var c=l;return l}()}).call(this,e("1YiZ5S"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},"/../node_modules/jsonld/js")},{"./request":31,"1YiZ5S":13,crypto:31,"es6-promise":33,http:31,pkginfo:34,request:31,util:31,xmldom:31}],33:[function(e,t){(function(e,r){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
 * @version   2.0.1
 */
(function(){"use strict";function n(e){return"function"==typeof e||"object"==typeof e&&null!==e}function i(e){return"function"==typeof e}function o(e){return"object"==typeof e&&null!==e}function a(){}function s(){return function(){e.nextTick(p)}}function l(){var e=0,t=new B(p),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){r.data=e=++e%2}}function u(){var e=new MessageChannel;return e.port1.onmessage=p,function(){e.port2.postMessage(0)}}function c(){return function(){setTimeout(p,1)}}function p(){for(var e=0;D>e;e+=2){var t=G[e],r=G[e+1];t(r),G[e]=void 0,G[e+1]=void 0}D=0}function f(){}function d(){return new TypeError("You cannot resolve a promise with itself")}function h(){return new TypeError("A promises callback cannot return that same promise.")}function v(e){try{return e.then}catch(t){return J.error=t,J}}function g(e,t,r,n){try{e.call(t,r,n)}catch(i){return i}}function y(e,t,r){P(function(e){var n=!1,i=g(r,t,function(r){n||(n=!0,t!==r?x(e,r):$(e,r))},function(t){n||(n=!0,w(e,t))},"Settle: "+(e._label||" unknown promise"));!n&&i&&(n=!0,w(e,i))},e)}function b(e,t){t._state===V?$(e,t._result):e._state===z?w(e,t._result):_(t,void 0,function(t){x(e,t)},function(t){w(e,t)})}function m(e,t){if(t.constructor===e.constructor)b(e,t);else{var r=v(t);r===J?w(e,J.error):void 0===r?$(e,t):i(r)?y(e,t,r):$(e,t)}}function x(e,t){e===t?w(e,d()):n(t)?m(e,t):$(e,t)}function k(e){e._onerror&&e._onerror(e._result),E(e)}function $(e,t){e._state===q&&(e._result=t,e._state=V,0===e._subscribers.length||P(E,e))}function w(e,t){e._state===q&&(e._state=z,e._result=t,P(k,e))}function _(e,t,r,n){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+V]=r,i[o+z]=n,0===o&&e._state&&P(E,e)}function E(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n,i,o=e._result,a=0;a<t.length;a+=3)n=t[a],i=t[a+r],n?j(r,n,i,o):i(o);e._subscribers.length=0}}function I(){this.error=null}function T(e,t){try{return e(t)}catch(r){return K.error=r,K}}function j(e,t,r,n){var o,a,s,l,u=i(r);if(u){if(o=T(r,n),o===K?(l=!0,a=o.error,o=null):s=!0,t===o)return void w(t,h())}else o=n,s=!0;t._state!==q||(u&&s?x(t,o):l?w(t,a):e===V?$(t,o):e===z&&w(t,o))}function S(e,t){try{t(function(t){x(e,t)},function(t){w(e,t)})}catch(r){w(e,r)}}function L(e,t,r,n){this._instanceConstructor=e,this.promise=new e(f,n),this._abortOnReject=r,this._validateInput(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._init(),0===this.length?$(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&$(this.promise,this._result))):w(this.promise,this._validationError())}function N(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function C(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function O(e){this._id=Y++,this._state=void 0,this._result=void 0,this._subscribers=[],f!==e&&(i(e)||N(),this instanceof O||C(),S(this,e))}var R;R=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var A,F=R,D=(Date.now||function(){return(new Date).getTime()},Object.create||function(e){if(arguments.length>1)throw Error("Second argument not supported");if("object"!=typeof e)throw new TypeError("Argument must be an object");return a.prototype=e,new a},0),P=function(e,t){G[D]=e,G[D+1]=t,D+=2,2===D&&A()},U="undefined"!=typeof window?window:{},B=U.MutationObserver||U.WebKitMutationObserver,M="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,G=Array(1e3);A=void 0!==e&&"[object process]"==={}.toString.call(e)?s():B?l():M?u():c();var q=void 0,V=1,z=2,J=new I,K=new I;L.prototype._validateInput=function(e){return F(e)},L.prototype._validationError=function(){return Error("Array Methods must be provided an Array")},L.prototype._init=function(){this._result=Array(this.length)};var X=L;L.prototype._enumerate=function(){for(var e=this.length,t=this.promise,r=this._input,n=0;t._state===q&&e>n;n++)this._eachEntry(r[n],n)},L.prototype._eachEntry=function(e,t){var r=this._instanceConstructor;o(e)?e.constructor===r&&e._state!==q?(e._onerror=null,this._settledAt(e._state,t,e._result)):this._willSettleAt(r.resolve(e),t):(this._remaining--,this._result[t]=this._makeResult(V,t,e))},L.prototype._settledAt=function(e,t,r){var n=this.promise;n._state===q&&(this._remaining--,this._abortOnReject&&e===z?w(n,r):this._result[t]=this._makeResult(e,t,r)),0===this._remaining&&$(n,this._result)},L.prototype._makeResult=function(e,t,r){return r},L.prototype._willSettleAt=function(e,t){var r=this;_(e,void 0,function(e){r._settledAt(V,t,e)},function(e){r._settledAt(z,t,e)})};var H=function(e,t){return new X(this,e,!0,t).promise},Q=function(e,t){function r(e){x(o,e)}function n(e){w(o,e)}var i=this,o=new i(f,t);if(!F(e))return w(o,new TypeError("You must pass an array to race.")),o;for(var a=e.length,s=0;o._state===q&&a>s;s++)_(i.resolve(e[s]),void 0,r,n);return o},W=function(e,t){var r=this;if(e&&"object"==typeof e&&e.constructor===r)return e;var n=new r(f,t);return x(n,e),n},Z=function(e,t){var r=this,n=new r(f,t);return w(n,e),n},Y=0,et=O;O.all=H,O.race=Q,O.resolve=W,O.reject=Z,O.prototype={constructor:O,then:function(e,t){var r=this,n=r._state;if(n===V&&!e||n===z&&!t)return this;var i=new this.constructor(f),o=r._result;if(n){var a=arguments[n-1];P(function(){j(n,i,a,o)})}else _(r,i,e,t);return i},"catch":function(e){return this.then(null,e)}};var tt=function(){var e;e=void 0!==r?r:"undefined"!=typeof window&&window.document?window:self;var t="Promise"in e&&"resolve"in e.Promise&&"reject"in e.Promise&&"all"in e.Promise&&"race"in e.Promise&&function(){var t;return new e.Promise(function(e){t=e}),i(t)}();t||(e.Promise=et)},rt={Promise:et,polyfill:tt};"function"==typeof define&&define.amd?define(function(){return rt}):void 0!==t&&t.exports?t.exports=rt:void 0!==this&&(this.ES6Promise=rt)}).call(this)}).call(this,e("1YiZ5S"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"1YiZ5S":13}],34:[function(e,t){(function(r){var n=e("fs"),i=e("path"),o=t.exports=function(e,t){var r=[].slice.call(arguments,2).filter(function(e){return"string"==typeof e});Array.isArray(t)?t={include:t}:"string"==typeof t&&(t={include:[t]}),t=t||{},t.include=t.include||[],r.length>0&&(t.include=t.include.concat(r));var n=o.read(e,t.dir).package;return Object.keys(n).forEach(function(r){(t.include.length<=0||~t.include.indexOf(r))&&(e.exports[r]||(e.exports[r]=n[r]))}),o};o.find=function(e,t){t||(t=i.dirname(e.filename));var r=n.readdirSync(t);if(~r.indexOf("package.json"))return i.join(t,"package.json");if("/"===t)throw Error("Could not find package.json up from: "+t);if(!t||"."===t)throw Error("Cannot find package.json from unspecified directory");return o.find(e,i.dirname(t))},o.read=function(e,t){t=o.find(e,t);var r=""+n.readFileSync(t);return{dir:t,"package":JSON.parse(r)}},o(t,{dir:r,include:["version"],target:o})}).call(this,"/../node_modules/jsonld/node_modules/pkginfo/lib")},{fs:1,path:12}],35:[function(e,t){function r(e){if(!(this instanceof r))return new r(e);if(e&&e.lineMode){this._tripleQuotedString=this._number=this._boolean=/$0^/;var t=this;this._tokenize=this.tokenize,this.tokenize=function(e,r){this._tokenize(e,function(e,n){!e&&/IRI|prefixed|literal|langcode|type|\.|eof/.test(n.type)?r&&r(e,n):r&&r(e||t._syntaxError(n.type,r=null))})}}}var n=String.fromCharCode,i="function"==typeof setImmediate?setImmediate:function(e){setTimeout(e,0)},o=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\[uU]|\\(.)/g,a={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},s=/[\x00-\x20<>\\"\{\}\|\^\`]/;r.prototype={_iri:/^<((?:[^>\\]|\\[uU])+)>/,_unescapedIri:/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>/,_unescapedString:/^"[^"\\]+"(?=[^"\\])/,_singleQuotedString:/^"[^"\\]*(?:\\.[^"\\]*)*"(?=[^"\\])|^'[^'\\]*(?:\\.[^'\\]*)*'(?=[^'\\])/,_tripleQuotedString:/^""("[^"\\]*(?:(?:\\.|"(?!""))[^"\\]*)*")""|^''('[^'\\]*(?:(?:\\.|'(?!''))[^'\\]*)*')''/,_langcode:/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,_prefix:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,_prefixed:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?=\.?[,;\s#()\[\]\{\}"'<])/,_blank:/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=\.?[,;:\s#()\[\]\{\}"'<])/,_number:/^[\-+]?(?:\d+\.?\d*([eE](?:[\-\+])?\d+)|\d*\.?\d+)(?=[.,;:\s#()\[\]\{\}"'<])/,_boolean:/^(?:true|false)(?=[.,;:\s#()\[\]\{\}"'<])/,_keyword:/^@[a-z]+(?=[\s#<:])/,_sparqlKeyword:/^(?:PREFIX|BASE|GRAPH)(?=[\s#<:])/i,_shortPredicates:/^a(?=\s+|<)/,_newline:/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,_whitespace:/^[ \t]+/,_endOfFile:/^(?:#[^\n\r]*)?$/,_tokenizeToEnd:function(e,t){function r(t){e(t._syntaxError(/^\S*/.exec(n)[0]))}for(var n=this._input;;){for(var i;i=this._newline.exec(n);)n=n.substr(i[0].length,n.length),this._line++;if((i=this._whitespace.exec(n))&&(n=n.substr(i[0].length,n.length)),this._endOfFile.test(n))return t&&e(n=null,{line:this._line,type:"eof",value:"",prefix:""}),this._input=n;var o,a=this._line,l="",u="",c="",p=n[0],f=null,d=0,h=!1;switch(p){case"^":if(1===n.length)break;if("^"!==n[1])return r(this);if(this._prevTokenType="^",n=n.substr(2),"<"!==n[0]){h=!0;break}case"<":if(f=this._unescapedIri.exec(n))l="IRI",u=f[1];else if(f=this._iri.exec(n)){if(o=this._unescape(f[1]),null===o||s.test(o))return r(this);l="IRI",u=o}break;case"_":((f=this._blank.exec(n))||t&&(f=this._blank.exec(n+" ")))&&(l="prefixed",c="_",u=f[1]);break;case'"':case"'":if(f=this._unescapedString.exec(n))l="literal",u=f[0];else if(f=this._singleQuotedString.exec(n)){if(o=this._unescape(f[0]),null===o)return r(this);l="literal",u=o.replace(/^'|'$/g,'"')}else if(f=this._tripleQuotedString.exec(n)){if(o=f[1]||f[2],this._line+=o.split(/\r\n|\r|\n/).length-1,o=this._unescape(o),null===o)return r(this);l="literal",u=o.replace(/^'|'$/g,'"')}break;case"@":"literal"===this._prevTokenType&&(f=this._langcode.exec(n))?(l="langcode",u=f[1]):(f=this._keyword.exec(n))&&(l=f[0]);break;case".":if(1===n.length?t:n[1]<"0"||n[1]>"9"){l=".",d=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(f=this._number.exec(n))&&(l="literal",u='"'+f[0]+'"^^http://www.w3.org/2001/XMLSchema#'+(f[1]?"double":/^[+\-]?\d+$/.test(f[0])?"integer":"decimal"));break;case"B":case"b":case"p":case"P":case"G":case"g":(f=this._sparqlKeyword.exec(n))?l=f[0].toUpperCase():h=!0;break;case"f":case"t":(f=this._boolean.exec(n))?(l="literal",u='"'+f[0]+'"^^http://www.w3.org/2001/XMLSchema#boolean'):h=!0;break;case"a":(f=this._shortPredicates.exec(n))?(l="abbreviation",u="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"):h=!0;break;case",":case";":case"[":case"]":case"(":case")":case"{":case"}":d=1,l=p;break;default:h=!0}if(h&&("@prefix"!==this._prevTokenType&&"PREFIX"!==this._prevTokenType||!(f=this._prefix.exec(n))?((f=this._prefixed.exec(n))||t&&(f=this._prefixed.exec(n+" ")))&&(l="prefixed",c=f[1]||"",u=this._unescape(f[2])):(l="prefix",u=f[1]||"")),"^"===this._prevTokenType&&(l="IRI"===l||"prefixed"===l?"type":""),!l)return t||!/^'''|^"""/.test(n)&&/\n|\r/.test(n)?r(this):this._input=n;e(null,{line:a,type:l,value:u,prefix:c}),this._prevTokenType=l,n=n.substr(d||f[0].length,n.length)}},_unescape:function(e){try{return e.replace(o,function(e,t,r,i){var o;if(t){if(o=parseInt(t,16),isNaN(o))throw Error();return n(o)}if(r){if(o=parseInt(r,16),isNaN(o))throw Error();return o>65535?n(55296+(o-=65536)/1024,56320+(1023&o)):n(o)}var s=a[i];if(!s)throw Error();return s})}catch(t){return null}},_syntaxError:function(e){return this._input=null,Error('Syntax error: unexpected "'+e+'" on line '+this._line+".")},tokenize:function(e,t){function r(e){null!==o._input&&(o._input+=e,o._tokenizeToEnd(t,!1))}function n(){null!==o._input&&o._tokenizeToEnd(t,!0)}var o=this;this._line=1,"string"==typeof e?(this._input=e,i(function(){o._tokenizeToEnd(t,!0)})):(this._input="",e&&"function"!=typeof e?("function"==typeof e.setEncoding&&e.setEncoding("utf8"),e.on("data",r),e.on("end",n)):(this.addChunk=r,this.end=n,t||(t=e)))}},t.exports=r},{}],36:[function(e,t){function r(e){if(!(this instanceof r))return new r(e);if(this._tripleStack=[],this._graph=null,e=e||{},e.documentIRI){if(e.documentIRI.indexOf("#")>0)throw Error("Invalid document IRI");this._baseIRI=e.documentIRI,this._baseIRIPath=this._baseIRI.replace(c,""),this._baseIRIRoot=this._baseIRI.match(p)[0]}else this._baseIRI=null,this._baseIRIPath=null;var t="string"==typeof e.format&&e.format.match(/\w*$/)[0].toLowerCase(),o="turtle"===t,a="trig"===t,s=/triple/.test(t),l=/quad/.test(t),u=s||l;(this._supportsNamedGraphs=!o)||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(o||a||s),u&&(this._baseIRI="",this._resolveIRI=function(e){return this._error("Disallowed relative IRI",e),this._callback=n,this._subject=null}),this._lexer=e.lexer||new i({lineMode:u})}function n(){}var i=e("./N3Lexer"),o="http://www.w3.org/1999/02/22-rdf-syntax-ns#",a=o+"nil",s=o+"first",l=o+"rest",u=/:/,c=/[^\/]*$/,p=/^(?:[^:]+:\/*)?[^\/]*/,f=0,d=0;r._resetBlankNodeIds=function(){f=d=0},r.prototype={_readInTopContext:function(e){switch(e.type){case"eof":return null!==this._graph?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"@prefix":return this._sparqlStyle=!1,this._readPrefix;case"PREFIX":return this._sparqlStyle=!0,this._readPrefix;case"@base":return this._sparqlStyle=!1,this._readBaseIRI;case"BASE":return this._sparqlStyle=!0,this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}},_readSubject:function(e){switch(this._predicate=null,e.type){case"IRI":this._subject=null===this._baseIRI||u.test(e.value)?e.value:this._resolveIRI(e);break;case"prefixed":var t=this._prefixes[e.prefix];if(void 0===t)return this._error('Undefined prefix "'+e.prefix+':"',e);this._subject=t+e.value;break;case"[":return this._subject="_:b"+d++,this._tripleStack.push({subject:this._subject,predicate:null,object:null,type:"blank"}),this._readBlankNodeHead;case"(":return this._tripleStack.push({subject:a,predicate:null,object:null,type:"list"}),this._subject=null,this._readListItem;case"}":return this._readPunctuation(e);default:return this._error("Expected subject but got "+e.type,e)}return this._readPredicateOrNamedGraph},_readPredicate:function(e){var t=e.type;switch(t){case"IRI":case"abbreviation":this._predicate=null===this._baseIRI||u.test(e.value)?e.value:this._resolveIRI(e);break;case"prefixed":if("_"===e.prefix)return this._error("Disallowed blank node as predicate",e);var r=this._prefixes[e.prefix];if(void 0===r)return this._error('Undefined prefix "'+e.prefix+':"',e);this._predicate=r+e.value;break;case".":case"]":case"}":return null===this._predicate?this._error("Unexpected "+t,e):(this._subject=null,"]"===t?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return this._readPredicate;default:return this._error('Expected predicate to follow "'+this._subject+'"',e)}return this._readObject},_readObject:function(e){switch(e.type){case"IRI":this._object=null===this._baseIRI||u.test(e.value)?e.value:this._resolveIRI(e);break;case"prefixed":var t=this._prefixes[e.prefix];if(void 0===t)return this._error('Undefined prefix "'+e.prefix+':"',e);this._object=t+e.value;break;case"literal":return this._object=e.value,this._readDataTypeOrLang;case"[":var r="_:b"+d++;return this._tripleStack.push({subject:this._subject,predicate:this._predicate,object:r,type:"blank"}),this._subject=r,this._readBlankNodeHead;case"(":return this._tripleStack.push({subject:this._subject,predicate:this._predicate,object:a,type:"list"}),this._subject=null,this._readListItem;default:return this._error('Expected object to follow "'+this._predicate+'"',e)}return this._getTripleEndReader()},_readPredicateOrNamedGraph:function(e){return"{"===e.type?this._readGraph(e):this._readPredicate(e)},_readGraph:function(e){return"{"!==e.type?this._error("Expected graph but got "+e.type,e):(this._graph=this._subject,this._subject=null,this._readSubject)},_readBlankNodeHead:function(e){return"]"===e.type?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))},_readBlankNodeTail:function(e){if("]"!==e.type)return this._readBlankNodePunctuation(e);null!==this._subject&&this._callback(null,{subject:this._subject,predicate:this._predicate,object:this._object,graph:this._graph||""});var t=this._tripleStack.pop();return this._subject=t.subject,null!==t.object?(this._predicate=t.predicate,this._object=t.object,this._getTripleEndReader()):null!==this._predicate?this._readPredicate:this._readPredicateOrNamedGraph},_readDataTypeOrLang:function(e){switch(e.type){case"type":var t;if(""===e.prefix)t=null===this._baseIRI||u.test(e.value)?e.value:this._resolveIRI(e);else{var r=this._prefixes[e.prefix];if(void 0===r)return this._error('Undefined prefix "'+e.prefix+':"',e);t=r+e.value}return this._object+="^^"+t,this._getTripleEndReader();case"langcode":return this._object+="@"+e.value.toLowerCase(),this._getTripleEndReader();default:return this._getTripleEndReader().call(this,e)}},_readListItem:function(e){var t=null,r=null,n=this._subject,i=this._tripleStack,o=i[i.length-1],u=this._readListItem;switch(e.type){case"IRI":t=e.value;break;case"prefixed":var c=this._prefixes[e.prefix];if(void 0===c)return this._error('Undefined prefix "'+e.prefix+':"',e);t=c+e.value;break;case"literal":t=e.value,u=this._readDataTypeOrLang;break;case"[":r="_:b"+d++,t="_:b"+d++,i.push({subject:r,predicate:s,object:t,type:"blank"}),this._subject=t,u=this._readBlankNodeHead;break;case"(":r="_:b"+d++,i.push({subject:r,predicate:s,object:a,type:"list"}),this._subject=null,u=this._readListItem;break;case")":if(i.pop(),0!==i.length&&"list"===i[i.length-1].type&&this._callback(null,{subject:o.subject,predicate:o.predicate,object:o.object,graph:this._graph||""}),this._subject=o.subject,null===o.predicate){if(u=this._readPredicate,o.subject===a)return u}else if(this._predicate=o.predicate,this._object=o.object,u=this._getTripleEndReader(),o.object===a)return u;r=a;break;default:return this._error('Expected list item instead of "'+e.type+'"',e)}return null===r&&(this._subject=r="_:b"+d++),null===n?o.object===a?o.object=r:o.subject=r:this._callback(null,{subject:n,predicate:l,object:r,graph:this._graph||""}),null!==t&&this._callback(null,{subject:r,predicate:s,object:t,graph:this._graph||""}),u},_readPunctuation:function(e){var t,r=this._subject,n=this._graph;switch(e.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",e);this._graph=null;case".":this._subject=null,t=this._readInTopContext;break;case";":t=this._readPredicate;break;case",":t=this._readObject;break;case"IRI":if(this._supportsQuads&&null===this._graph){n=null===this._baseIRI||u.test(e.value)?e.value:this._resolveIRI(e),r=this._subject,t=this._readQuadPunctuation;break}case"prefixed":if(this._supportsQuads&&null===this._graph){var i=this._prefixes[e.prefix];if(void 0===i)return this._error('Undefined prefix "'+e.prefix+':"',e);n=i+e.value,t=this._readQuadPunctuation;break}default:return this._error('Expected punctuation to follow "'+this._object+'"',e)}return null!==r&&this._callback(null,{subject:r,predicate:this._predicate,object:this._object,graph:n||""}),t},_readBlankNodePunctuation:function(e){var t;switch(e.type){case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:return this._error('Expected punctuation to follow "'+this._object+'"',e)}return this._callback(null,{subject:this._subject,predicate:this._predicate,object:this._object,graph:this._graph||""}),t},_readQuadPunctuation:function(e){return"."!==e.type?this._error("Expected dot to follow quad",e):this._readInTopContext},_readPrefix:function(e){return"prefix"!==e.type?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)},_readPrefixIRI:function(e){if("IRI"!==e.type)return this._error('Expected IRI to follow prefix "'+this._prefix+':"',e);var t;return t=null===this._baseIRI||u.test(e.value)?e.value:this._resolveIRI(e),this._prefixes[this._prefix]=t,this._prefixCallback(this._prefix,t),this._readDeclarationPunctuation},_readBaseIRI:function(e){return"IRI"!==e.type?this._error("Expected IRI to follow base declaration",e):e.value.indexOf("#")>0?this._error("Invalid base IRI",e):(this._baseIRI=null===this._baseIRI||u.test(e.value)?e.value:this._resolveIRI(e),this._baseIRIPath=this._baseIRI.replace(c,""),this._baseIRIRoot=this._baseIRI.match(p)[0],this._readDeclarationPunctuation)},_readNamedGraphLabel:function(e){switch(e.type){case"IRI":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}},_readNamedGraphBlankLabel:function(e){return"]"!==e.type?this._error("Invalid graph label",e):(this._subject="_:b"+d++,this._readGraph)},_readDeclarationPunctuation:function(e){return this._sparqlStyle?this._readInTopContext(e):"."!==e.type?this._error("Expected declaration to end with a dot",e):this._readInTopContext},_getTripleEndReader:function(){var e=this._tripleStack;if(0===e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem}},_error:function(e,t){this._callback(Error(e+" at line "+t.line+"."))},_resolveIRI:function(e){var t=e.value;switch(t[0]){case void 0:return this._baseIRI;case"#":return this._baseIRI+t;case"?":return this._baseIRI.replace(/(?:\?.*)?$/,t);case"/":return this._baseIRIRoot+t;default:return this._baseIRIPath+t}},parse:function(e,t,r){this._readCallback=this._readInTopContext,this._prefixes=Object.create(null),this._prefixes._="_:b"+f++ +"_","function"==typeof e&&(r=t,t=e,e=null),this._callback=t||n,this._prefixCallback=r||n;var i=this;this._lexer.tokenize(e,function(e,t){null!==e?(i._callback(e),i._callback=n):void 0!==i._readCallback&&(i._readCallback=i._readCallback(t))}),e||(this.addChunk=this._lexer.addChunk,this.end=this._lexer.end)}},t.exports=r},{"./N3Lexer":35}],37:[function(e,t){function r(e,t){this.name="NonSupportedSparqlFeatureError",this.feature=e,this.message=t||"SPARQL feature "+e+" non supported"}function n(e){this.name=ParserError,this.message=e||"Error parsing SPARQL query"}var i=e("./parser"),o=e("./utils"),a=o;r.prototype=Error(),r.constructor=r,n.prototype=Error(),n.constructor=n;var s=function(){};s.prototype.parseQueryString=function(e){return i.parse(e)},s.prototype.parseExecutableUnit=function(e){if("select"===e.kind)return this.parseSelect(e);if("ask"===e.kind)return this.parseSelect(e);if("modify"===e.kind)return this.parseSelect(e);if("construct"===e.kind)return this.parseSelect(e);if("insertdata"===e.kind)return this.parseInsertData(e);if("deletedata"===e.kind)return this.parseInsertData(e);if("load"===e.kind)return e;if("clear"===e.kind)return e;if("drop"===e.kind)return e;if("create"===e.kind)return e;throw Error("unknown executable unit: "+e.kind)},s.prototype.parseSelect=function(e){if(null==e)return console.log("error parsing query"),null;var t={freshCounter:0};return e.pattern=this.build(e.pattern,t),e},s.prototype.parseInsertData=function(e){return null==e?(console.log("error parsing query"),null):e},s.prototype.build=function(e,t){if("groupgraphpattern"===e.token)return this._buildGroupGraphPattern(e,t);if("basicgraphpattern"===e.token){var i={kind:"BGP",value:e.triplesContext};return i=s.translatePathExpressionsInBGP(i,t)}if("graphunionpattern"===e.token){var o=this.build(e.value[0],t),a=this.build(e.value[1],t);return{kind:"UNION",value:[o,a]}}if("graphgraphpattern"===e.token){var l=this.build(e.value,t);return{kind:"GRAPH",value:l,graph:e.graph}}throw null!=e.token?new r(e.token,"Non implemented SPARQL graph pattern: '"+e.token+"'"):new n("Error parsing graph pattern: '"+JSON.stringify(e)+"'")},s.translatePathExpressionsInBGP=function(e,t){for(var r,n,i,o=[],l=0;l<e.value.length;l++)if(e.value[l].predicate&&"path"===e.value[l].predicate.token){r=e.value[l],n=e.value.slice(l+1);var u=s.translatePathExpression(r,t),c=null;if("BGP"!==u.kind){if("ZERO_OR_MORE_PATH"===u.kind||"ONE_OR_MORE_PATH"===u.kind){if(i=o.length>0?{kind:"JOIN",lvalue:{kind:"BGP",value:o},rvalue:u}:u,"ZERO_OR_MORE_PATH"===u.kind)if("var"===u.y.token&&0===u.y.value.indexOf("fresh:")&&"var"===u.x.token&&0===u.x.value.indexOf("fresh:"))for(var p=0;p<e.value.length;p++)e.value[p].object&&"var"===e.value[p].object.token&&e.value[p].object.value===u.x.value&&(c=a.clone(e.value[p],!0),c.object=u.y);else if("var"===u.y.token&&0===u.y.value.indexOf("fresh:"))for(var p=0;p<e.value.length;p++)e.value[p].subject&&"var"===e.value[p].subject.token&&e.value[p].subject.value===u.y.value&&(c=a.clone(e.value[p],!0),c.subject=u.x);if(n.length>0){var f=s.translatePathExpressionsInBGP({kind:"BGP",value:n},t);if(null!=c){var d=o.concat([c]).concat(n);return{kind:"UNION",value:[{kind:"JOIN",lvalue:i,rvalue:f},{kind:"BGP",value:d}]}}return{kind:"JOIN",lvalue:i,rvalue:f}}return i}return u}o=o.concat(u.value)}else o.push(e.value[l]);return e.value=o,e},s.translatePathExpression=function(e,t){if("element"===e.predicate.kind){if("+"===e.predicate.modifier){e.predicate.modifier=null;var n=s.translatePathExpression(e,t);return{kind:"ONE_OR_MORE_PATH",path:n,x:e.subject,y:e.object}}if("*"===e.predicate.modifier){e.predicate.modifier=null;var n=s.translatePathExpression(e,t);return{kind:"ZERO_OR_MORE_PATH",path:n,x:e.subject,y:e.object}}return e.predicate=e.predicate.value,{kind:"BGP",value:[e]}}if("sequence"===e.predicate.kind){for(var i,o,l=e.subject,u=e.object,c=e.graph,p=[],f=0;f<e.predicate.value.length;f++)f!=e.predicate.value.length-1?(i={token:"var",value:"fresh:"+t.freshCounter},t.freshCounter++):i=u,o={subject:l,predicate:e.predicate.value[f],object:i},null!=c&&(o.graph=a.clone(c,!0)),p.push(o),f!=e.predicate.value.length-1&&(l=a.clone(i,!0));var d={kind:"BGP",value:p};return s.translatePathExpressionsInBGP(d,t)}throw new r("Non supported path expression "+e.predicate.kind)},s.prototype._buildGroupGraphPattern=function(e,t){for(var r=e.filters||[],n={kind:"EMPTY_PATTERN"},i=0;i<e.patterns.length;i++){var o=e.patterns[i];if("optionalgraphpattern"===o.token){var a=this.build(o.value,t);n="FILTER"===a.kind?{kind:"LEFT_JOIN",lvalue:n,rvalue:a.value,filter:a.filter}:{kind:"LEFT_JOIN",lvalue:n,rvalue:a,filter:!0}}else{var a=this.build(o,t);n="EMPTY_PATTERN"==n.kind?a:{kind:"JOIN",lvalue:n,rvalue:a}}}if(0!=r.length){if("EMPTY_PATTERN"===n.kind)return{kind:"FILTER",filter:r,value:n};if("LEFT_JOIN"===n.kind&&n.filter===!0)return{kind:"FILTER",filter:r,value:n};if("LEFT_JOIN"===n.kind)return{kind:"FILTER",filter:r,value:n};if("JOIN"===n.kind)return{kind:"FILTER",filter:r,value:n};if("UNION"===n.kind)return{kind:"FILTER",filter:r,value:n};if("GRAPH"===n.kind)return{kind:"FILTER",filter:r,value:n};if("BGP"===n.kind)return{kind:"FILTER",filter:r,value:n};throw Error("Unknow kind of algebra expression: "+n.kind)}return n},s.prototype.collectBasicTriples=function(e,t){if(null==t&&(t=[]),"select"===e.kind)t=this.collectBasicTriples(e.pattern,t);else if("BGP"===e.kind)t=t.concat(e.value);else if("ZERO_OR_MORE_PATH"===e.kind)t=this.collectBasicTriples(e.path);else if("UNION"===e.kind)t=this.collectBasicTriples(e.value[0],t),t=this.collectBasicTriples(e.value[1],t);else if("GRAPH"===e.kind)t=this.collectBasicTriples(e.value,t);else if("LEFT_JOIN"===e.kind||"JOIN"===e.kind)t=this.collectBasicTriples(e.lvalue,t),t=this.collectBasicTriples(e.rvalue,t);else if("FILTER"===e.kind)t=this.collectBasicTriples(e.value,t);else if("construct"===e.kind)t=this.collectBasicTriples(e.pattern,t);else if("EMPTY_PATTERN"!==e.kind)throw"Unknown pattern: "+e.kind;return t},s.prototype.bind=function(e,t){if(null!=e.graph&&e.graph.token&&"var"===e.graph.token&&null!=t[e.graph.value]&&(e.graph=t[e.graph.value]),null!=e.filter){for(var r=[],n=0;n<e.filter.length;n++)e.filter[n].value=this._bindFilter(e.filter[n].value,t),r.push(e.filter[n]);e.filter=r}if("select"===e.kind)e.pattern=this.bind(e.pattern,t);else if("BGP"===e.kind)e.value=this._bindTripleContext(e.value,t);else if("ZERO_OR_MORE_PATH"===e.kind)e.path=this._bindTripleContext(e.path,t),e.x&&"var"===e.x.token&&null!=t[e.x.value]&&(e.x=t[e.x.value]),e.y&&"var"===e.y.token&&null!=t[e.y.value]&&(e.y=t[e.y.value]);else if("UNION"===e.kind)e.value[0]=this.bind(e.value[0],t),e.value[1]=this.bind(e.value[1],t);else if("GRAPH"===e.kind)e.value=this.bind(e.value,t);else if("LEFT_JOIN"===e.kind||"JOIN"===e.kind)e.lvalue=this.bind(e.lvalue,t),e.rvalue=this.bind(e.rvalue,t);else if("FILTER"===e.kind)e.filter=this._bindFilter(e.filter[n].value,t);else if("EMPTY_PATTERN"!==e.kind)throw"Unknown pattern: "+e.kind;return e},s.prototype._bindTripleContext=function(e,t){for(var r=0;r<e.length;r++){delete e[r].graph,delete e[r].variables;for(var n in e[r]){var i=e[r][n];"var"===i.token&&null!=t[i.value]&&(e[r][n]=t[i.value])}}return e},s.prototype._bindFilter=function(e,t){if(null!=e.expressionType){var r=e.expressionType;if("relationalexpression"==r)e.op1=this._bindFilter(e.op1,t),e.op2=this._bindFilter(e.op2,t);else if("conditionalor"==r||"conditionaland"==r)for(var n=0;n<e.operands.length;n++)e.operands[n]=this._bindFilter(e.operands[n],t);else if("additiveexpression"==r){e.summand=this._bindFilter(e.summand,t);for(var n=0;n<e.summands.length;n++)e.summands[n].expression=this._bindFilter(e.summands[n].expression,t)}else if("builtincall"==r)for(var n=0;n<e.args.length;n++)e.args[n]=this._bindFilter(e.args[n],t);else if("multiplicativeexpression"==r){e.factor=this._bindFilter(e.factor,t);for(var n=0;n<e.factors.length;n++)e.factors[n].expression=this._bindFilter(e.factors[n].expression,t)}else if("unaryexpression"==r)e.expression=this._bindFilter(e.expression,t);else if("irireforfunction"==r)for(var n=0;n<e.factors.args;n++)e.args[n]=this._bindFilter(e.args[n],t);else if("atomic"==r&&"var"==e.primaryexpression&&null!=t[e.value.value]){var i=t[e.value.value];
e.primaryexpression="uri"===i.token?"iri":"literal",e.value=i}}return e},s.prototype.replace=function(e,t,r,n){if(null!=e.graph&&e.graph.token&&e.graph.token===t.token&&e.graph.value==t.value&&(e.graph=a.clone(r,!0)),null!=e.filter){for(var i=[],o=0;o<e.filter.length;o++)e.filter[o].value=this._replaceFilter(e.filter[o].value,t,r,n),i.push(e.filter[o]);e.filter=i}if("select"===e.kind)e.pattern=this.replace(e.pattern,t,r,n);else if("BGP"===e.kind)e.value=this._replaceTripleContext(e.value,t,r,n);else if("ZERO_OR_MORE_PATH"===e.kind)e.path=this._replaceTripleContext(e.path,t,r,n),e.x&&e.x.token===t.token&&e.value===t.value&&(e.x=a.clone(r,!0)),e.y&&e.y.token===t.token&&e.value===t.value&&(e.y=a.clone(r,!0));else if("UNION"===e.kind)e.value[0]=this.replace(e.value[0],t,r,n),e.value[1]=this.replace(e.value[1],t,r,n);else if("GRAPH"===e.kind)e.value=this.replace(e.value,t,r);else if("LEFT_JOIN"===e.kind||"JOIN"===e.kind)e.lvalue=this.replace(e.lvalue,t,r,n),e.rvalue=this.replace(e.rvalue,t,r,n);else if("FILTER"===e.kind)e.value=this._replaceFilter(e.value,t,r,n);else if("EMPTY_PATTERN"!==e.kind)throw"Unknown pattern: "+e.kind;return e},s.prototype._replaceTripleContext=function(e,t,r,n){for(var i=0;i<e.length;i++)for(var a in e[i]){var s=e[i][a];"var"===s.token&&"var"===t.token&&s.value===t.value?e[i][a]=r:"blank"===s.token&&"blank"===t.token&&s.value===t.value?e[i][a]=r:"literal"!==s.token&&"uri"!==s.token||"literal"!==t.token&&"uri"!==t.token||s.token!==t.token||o.lexicalFormTerm(s,n)[s.token]!==o.lexicalFormTerm(t,n)[s.token]||(e[i][a]=r)}return e},s.prototype._replaceFilter=function(e,t,r,n){if(null!=e.expressionType){var i=e.expressionType;if("relationalexpression"==i)e.op1=this._replaceFilter(e.op1,t,r,n),e.op2=this._replaceFilter(e.op2,t,r,n);else if("conditionalor"==i||"conditionaland"==i)for(var o=0;o<e.operands.length;o++)e.operands[o]=this._replaceFilter(e.operands[o],t,r,n);else if("additiveexpression"==i){e.summand=this._replaceFilter(e.summand,t,r,n);for(var o=0;o<e.summands.length;o++)e.summands[o].expression=this._replaceFilter(e.summands[o].expression,t,r,n)}else if("builtincall"==i)for(var o=0;o<e.args.length;o++)e.args[o]=this._replaceFilter(e.args[o],t,r,n);else if("multiplicativeexpression"==i){e.factor=this._replaceFilter(e.factor,t,r,n);for(var o=0;o<e.factors.length;o++)e.factors[o].expression=this._replaceFilter(e.factors[o].expression,t,r,n)}else if("unaryexpression"==i)e.expression=this._replaceFilter(e.expression,t,r,n);else if("irireforfunction"==i)for(var o=0;o<e.factors.args;o++)e.args[o]=this._replaceFilter(e.args[o],t,r,n);else if("atomic"==i){var a=null;e.primaryexpression==t.token&&e.value==t.value?a=r.value:"iri"==e.primaryexpression&&"uri"==t.token&&e.value==t.value&&(a=r.value),null!=a&&(e.primaryexpression="uri"===r.token?"iri":r.token,e.value=a)}}return e},s.prototype.treeWithUnion=function(e){if(null==e)return!1;if(null==e.kind)return!1;if("select"===e.kind)return this.treeWithUnion(e.pattern);if("BGP"===e.kind)return this.treeWithUnion(e.value);if("ZERO_OR_MORE_PATH"===e.kind)return!1;if("UNION"===e.kind){if(null==e.value[0].value||null==e.value[0].value.variables||null==e.value[1].value||null==e.value[1].value.variables)return!0;if(e.value[0].variables.join("/")===e.values[1].variables.join("/"))return this.treeWithUnion(e.value[0])?!0:this.treeWithUnion(e.value[1])}else{if("GRAPH"===e.kind)return!1;if("LEFT_JOIN"!==e.kind&&"JOIN"!==e.kind)return"FILTER"===e.kind?!1:"EMPTY_PATTERN"===e.kind?!1:!1;var t=this.treeWithUnion(e.lvalue);if(t)return!0;this.treeWithUnion(e.rvalue)}},t.exports={AbstractQueryTree:s,NonSupportedSparqlFeatureError:r,SparqlParserError:n}},{"./parser":44,"./utils":55}],38:[function(e,t){"use strict";var r=e("./utils"),n=r,i=r.nextTick,o=-1,a=1,s=function(e,t){if(0!=arguments.length){this.order=e,this.root=this._allocateNode(),this.root.isLeaf=!0,this.root.level=0;var r=this;this._diskWrite(this.root,function(e){r.root=e,r._updateRootNode(r.root,function(){r.comparator=function(e,t){return t>e?-1:e>t?1:0},r.merger=null,null!=t&&t(r)})})}};s.prototype._allocateNode=function(){return new l},s.prototype._diskWrite=function(e,t){i(function(){t(e)})},s.prototype._diskRead=function(e,t){i(function(){t(e)})},s.prototype._diskDelete=function(e,t){i(function(){t()})},s.prototype._updateRootNode=function(e,t){t(e)},s.prototype.search=function(e,t,r){var n=this.root,i=this;i.__search(i,e,n,t,r)},s.prototype.__search=function(e,t,r,n,i){for(var o=0;o<r.numberActives&&1===e.comparator(t,r.keys[o].key);)o++;o<r.numberActives&&0===e.comparator(r.keys[o].key,t)?n(null!=i&&1==i?!0:r.keys[o].data):r.isLeaf===!0?n(null):e._diskRead(r.children[o],function(r){e.__search(e,t,r,n,i)})},s.prototype.walk=function(e,t){this.__walk(this,this.root,e,t)},s.prototype.__walk=function(e,t,r,i){var o=t.numberActives,a=0;if(t.isLeaf){for(a=0;a<t.numberActives;a++)r(t.keys[a]);return i()}n.whilst(function(){return o>a},function(n){e._diskRead(t.children[a],function(i){e.__walk(e,i,r,function(){e._diskRead(t.keys[a],function(e){r(e),a++,n()})})})},function(){e._diskRead(t.children[o],function(t){e.__walk(e,t,r,function(){i()})})})},s.prototype.walkNodes=function(e){this.__walkNodes(this,root,e,function(){})},s.prototype.__walkNodes=function(e,t,r,i){if(t.isLeaf)return r(t),i();r(t);var o=t.numberActives,a=0;n.whilst(function(){return o>a},function(n){e._diskRead(t.children[a],function(t){e.__walkNodes(e,t,r,function(){a++,n()})})},function(){e._diskRead(t.children[o],function(t){e.__walkNodes(e,t,r,function(){})})})},s.prototype._splitChild=function(e,t,r,n){var i=this._allocateNode();i.isLeaf=r.isLeaf,i.level=r.level,i.numberActives=this.order-1;var o=r.keys[this.order-1];r.keys[this.order-1]=null;for(var a=0;a<this.order-1;a++)i.keys[a]=r.keys[a+this.order],r.keys[a+this.order]=null,r.isLeaf||(i.children[a]=r.children[a+this.order],r.children[a+this.order]=null);for(r.isLeaf||(i.children[a]=r.children[a+this.order],r.children[a+this.order]=null),r.numberActives=this.order-1,a=e.numberActives+1;a>t+1;a--)e.children[a]=e.children[a-1];for(e.children[t+1]=i,a=e.numberActives;a>t;a--)e.keys[a]=e.keys[a-1];e.keys[t]=o,e.numberActives++;var s=this;this._diskWrite(i,function(i){s._diskWrite(e,function(e){e.children[t+1]=i,s._diskWrite(r,function(){return n(e)})})})},s.prototype.insert=function(e,t,r){if(this.root.numberActives===2*this.order-1){var n=this._allocateNode();n.isLeaf=!1,n.level=this.root.level+1,n.numberActives=0,n.children[0]=this.root;var i=this;this._splitChild(n,0,this.root,function(o){n=o,i.root=n,i._updateRootNode(n,function(n){i._insertNonFull(n,e,t,r)})})}else this._insertNonFull(this.root,e,t,r)},s.prototype._insertNonFull=function(e,t,r,n){var i=e.numberActives-1;this.__insertNonFull(this,e,i,t,r,n)},s.prototype.__insertNonFull=function(e,t,r,n,i,o){if(t.isLeaf){for(;r>=0&&-1===e.comparator(n,t.keys[r].key);)t.keys[r+1]=t.keys[r],r--;0>r||0!==e.comparator(n,t.keys[r].key)?(t.keys[r+1]={key:n,data:i},t.numberActives++):t.keys[r]={key:n,data:i},e._diskWrite(t,function(e){return o(e)})}else{for(;r>=0&&-1===e.comparator(n,t.keys[r].key);)r--;r++;var a=e;e._diskRead(t.children[r],function(s){s.numberActives===2*a.order-1?a._splitChild(t,r,s,function(){1===a.comparator(n,t.keys[r].key)&&r++,a._diskRead(t.children[r],function(t){r=t.numberActives-1,a.__insertNonFull(e,t,r,n,i,o)})}):a._diskRead(t.children[r],function(t){r=t.numberActives-1,a.__insertNonFull(e,t,r,n,i,o)})})}},s.prototype.delete=function(e,t){var r=this.root;s.prototype.__deleteSearchNode(this,e,r,t)},s.prototype.__deleteSearchNode=function(e,t,r,n){var i=0;if(0===r.numberActives)return n(!1);for(;i<r.numberActives&&1===e.comparator(t,r.keys[i].key);)i++;var s=i;if(i<r.numberActives&&0===e.comparator(t,r.keys[i].key))return e.__deleteNodeFound(e,s,t,r,n);if(r.isLeaf===!0)return n(!1);var l=r;e._diskRead(r.children[i],function(r){if(null===r)return n(!1);var u=!1,c=!1,p=null,f=null;s===l.numberActives?(c=!0,f=l.children[s-1],p=l.children[s-1]):0===s?(u=!0,p=l.children[1],f=l.children[1]):(f=l.children[s-1],p=l.children[s+1]),e._diskRead(f,function(s){e._diskRead(p,function(p){c===!0&&(p=null),u===!0&&(s=null),r.numberActives===e.order-1&&null!=l?null!=p&&p.numberActives>e.order-1?e._moveKey(l,i,o,function(){e.__deleteSearchNode(e,t,r,n)}):null!=s&&s.numberActives>e.order-1?e._moveKey(l,i,a,function(){e.__deleteSearchNode(e,t,r,n)}):null!=s&&s.numberActives===e.order-1?e._mergeSiblings(l,i,o,function(r){e.__deleteSearchNode(e,t,r,n)}):null!=p&&p.numberActives===e.order-1&&e._mergeSiblings(l,i,a,function(r){e.__deleteSearchNode(e,t,r,n)}):e.__deleteSearchNode(e,t,r,n)})})})},s.prototype.__deleteNodeFound=function(e,t,r,n,i){return n.isLeaf&&n.numberActives>e.order-1?(e._deleteKeyFromNode(n,t,function(){i(!0)}),!0):n.isLeaf&&n===e.root?(e._deleteKeyFromNode(n,t,function(){i(!0)}),!0):(n.isLeaf===!1&&e._diskRead(n.children[t],function(o){o.numberActives>e.order-1?e._getMaxKeyPos(e,o,function(a){r=a.node.keys[a.index],n.keys[t]=r,e._diskWrite(n,function(t){t=o,r=r.key,e.__deleteSearchNode(e,r,t,i)})}):e._diskRead(n.children[t+1],function(a){a.numberActives>e.order-1?e._getMinKeyPos(e,a,function(o){r=o.node.keys[o.index],n.keys[t]=r,e._diskWrite(n,function(t){t=a,r=r.key,e.__deleteSearchNode(e,r,t,i)})}):o.numberActives===e.order-1&&a.numberActives===e.order-1&&e._mergeNodes(o,n.keys[t],a,function(o){n.children[t]=o,t++;for(var a=t;a<n.numberActives;a++)n.children[a]=n.children[a+1],n.keys[a-1]=n.keys[a];n.children[a]=null,n.keys[a-1]=null,n.numberActives--,0===n.numberActives&&e.root===n&&(e.root=o),e._diskWrite(n,function(){e.__deleteSearchNode(e,r,o,i)})})})}),void(n.isLeaf&&n.numberActives>e.order-1&&e._deleteKeyFromNode(n,t,function(t){e.__deleteSearchNode(e,r,t,i)})))},s.prototype._moveKey=function(e,t,r,n){r===a&&t--;var i=this;i._diskRead(e.children[t],function(a){i._diskRead(e.children[t+1],function(s){if(r==o){a.keys[a.numberActives]=e.keys[t],a.children[a.numberActives+1]=s.children[0],s.children[0]=null,a.numberActives++,e.keys[t]=s.keys[0];for(var l=1;l<s.numberActives;l++)s.keys[l-1]=s.keys[l],s.children[l-1]=s.children[l];s.children[s.numberActives-1]=s.children[s.numberActives],s.numberActives--}else{s.children[s.numberActives+1]=s.children[s.numberActives];for(var l=s.numberActives;l>0;l--)s.children[l]=s.children[l-1],s.keys[l]=s.keys[l-1];s.keys[0]=null,s.children[0]=null,s.children[0]=a.children[a.numberActives],s.keys[0]=e.keys[t],s.numberActives++,a.children[a.numberActives]=null,e.keys[t]=a.keys[a.numberActives-1],a.keys[a.numberActives-1]=null,a.numberActives--}i._diskWrite(a,function(){i._diskWrite(s,function(){i._diskWrite(e,function(e){return n(e)})})})})})},s.prototype._mergeSiblings=function(e,t,r,n){var i,o,a,s;t===e.numberActives?(t--,a=e.children[e.numberActives-1],s=e.children[e.numberActives]):(a=e.children[t],s=e.children[t+1]);var l=this;l._diskRead(a,function(r){l._diskRead(s,function(a){var s=l._allocateNode();for(s.isLeaf=r.isLeaf,s.level=r.level,o=0;o<l.order-1;o++)s.keys[o]=r.keys[o],s.children[o]=r.children[o];for(s.keys[l.order-1]=e.keys[t],s.children[l.order-1]=r.children[l.order-1],o=0;o<l.order-1;o++)s.keys[o+l.order]=a.keys[o],s.children[o+l.order]=a.children[o];for(s.children[2*l.order-1]=a.children[l.order-1],e.children[t]=s,o=t;o<e.numberActives;o++)e.keys[o]=e.keys[o+1],e.children[o+1]=e.children[o+2];for(s.numberActives=r.numberActives+a.numberActives+1,e.numberActives--,i=e.numberActives;i<2*l.order-1;i++)e.keys[i]=null;0===e.numberActives&&l.root===e&&(l.root=s,s.isLeaf=s.level?!1:!0),l._diskWrite(s,function(t){l._diskWrite(e,function(){l._diskDelete(r,function(){l._diskDelete(a,function(){return l.root!==t?n(t):void l._updateRootNode(l.root,function(){return n(t)})})})})})})})},s.prototype._deleteKeyFromNode=function(e,t,r){var n=2*this.order-1;e.numberActives<n&&(n=e.numberActives);var i;if(e.isLeaf===!1)return!1;e.keys[t];for(i=t;n-1>i;i++)e.keys[i]=e.keys[i+1];e.keys.pop(),e.numberActives--,this._diskWrite(e,function(e){return r(e)})},s.prototype._mergeNodes=function(e,t,r,n){var i,o;for(i=this._allocateNode(),i.isLeaf=!0,o=0;o<e.numberActives;o++)i.keys[o]=e.keys[o],i.children[o]=e.children[o];for(i.children[e.numberActives]=e.children[e.numberActives],i.keys[e.numberActives]=t,o=0;o<r.numberActives;o++)i.keys[o+e.numberActives+1]=r.keys[o],i.children[o+e.numberActives+1]=r.children[o];i.children[2*this.order-1]=r.children[r.numberActives],i.numberActives=e.numberActives+r.numberActives+1,i.isLeaf=e.isLeaf,i.level=e.level;var a=this;this._diskWrite(i,function(t){a._diskDelete(e,function(){a._diskDelete(r,function(){return n(t)})})})},s.prototype.audit=function(e){var t=[],r=[],n=this,i=function(i){for(var o=0;o<r.length;o++)if(0===n.comparator(r[o],i)){var a=" !!! duplicated key "+i;e===!0&&console.log(a),t.push(a)}},o=null,n=this;return this.walkNodes(function(a){e===!0&&(console.log("--- Node at "+a.level+" level"),console.log(" - leaf? "+a.isLeaf),console.log(" - num actives? "+a.numberActives),console.log(" - keys: "));for(var s=a.numberActives;s<a.keys.length;s++)null!=a.keys[s]&&e===!0&&(console.log(" * warning : redundant key data"),t.push(" * warning : redundant key data"));for(var s=a.numberActives+1;s<a.children.length;s++)null!=a.children[s]&&e===!0&&(console.log(" * warning : redundant children data"),t.push(" * warning : redundant key data"));if(a.isLeaf===!1)for(var s=0;s<a.numberActives;s++){var l=this._diskRead(a.children[s]).keys[this._diskRead(a.children[s]).numberActives-1].key,u=this._diskRead(a.children[s+1]).keys[0].key;if(e===!0&&console.log("   "+a.keys[s].key+"("+l+","+u+")"),-1===n.comparator(a.keys[s].key,l)){var c=" !!! value max left "+l+" > key "+a.keys[s].key;e===!0&&console.log(c),t.push(c)}if(1===n.comparator(a.keys[s].key,u)){var c=" !!! value min right "+u+" < key "+a.keys[s].key;e===!0&&console.log(c),t.push(c)}i(a.keys[s].key),r.push(a.keys[s].key)}else{if(null===o)o=a.level;else if(o!=a.level){var c=" !!! Leaf node with wrong level value";e===!0&&console.log(c),t.push(c)}for(var s=0;s<a.numberActives;s++)e===!0&&console.log(" "+a.keys[s].key),i(a.keys[s].key),r.push(a.keys[s].key)}if(a!=n.root){if(a.numberActives>2*n.order-1){if(e===!0)var c=" !!!! MAX num keys restriction violated ";console.log(c),t.push(c)}if(a.numberActives<n.order-1){if(e===!0)var c=" !!!! MIN num keys restriction violated ";console.log(c),t.push(c)}}}),t},s.prototype._getMaxKeyPos=function(e,t,r){var n={};return null===t?r(null):t.isLeaf===!0?(n.node=t,n.index=t.numberActives-1,r(n)):(n.node=t,n.index=t.numberActives-1,e._diskRead(t.children[t.numberActives],function(t){return e._getMaxKeyPos(e,t,r)}),void 0)},s.prototype._getMinKeyPos=function(e,t,r){var n={};return null===t&&r(null),t.isLeaf===!0?(n.node=t,n.index=0,r(n)):(n.node=t,n.index=0,e._diskRead(t.children[0],function(t){return e._getMinKeyPos(e,t,r)}),void 0)};var l=function(){this.numberActives=0,this.isLeaf=null,this.keys=[],this.children=[],this.level=0};t.exports={Tree:s,Node:l}},{"./utils":55}],39:[function(e,t){(function(r){var n=e("./query_engine").QueryEngine,i=e("./quad_backend").QuadBackend,o=e("./persistent_quad_backend").QuadBackend,a=e("./lexicon").Lexicon,s=e("./persistent_lexicon").Lexicon,l=e("./rdf_model"),u=e("./utils"),c=function(e,t){var r=null,l=null;if(0==arguments.length)l={};else if(1==arguments.length)l={},r=e;else{if(arguments.length<=1)throw"An optional argument map and a callback must be provided";l=e,r=t}null==l.treeOrder&&(l.treeOrder=15);var u=a,c=i;l.persistent===!0&&(u=s,c=o),this.functionMap={};var p=this;this.customFns={},new u(function(e){var t=function(){new c(l,function(t){var i=function(){l.backend=t,l.lexicon=e,p.engine=new n(l),r(null,p)};l.overwrite?t.clear(i):i()})};l.overwrite===!0?e.clear(t):t()},l.name)};c.prototype.rdf=l.rdf,c.prototype.rdf.api=l,c.prototype.registerCustomFunction=function(e,t){this.customFns[e]=t,this.engine.setCustomFunctions(this.customFns)},c.prototype.execute=function(){if(3===arguments.length)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2]);else if(4===arguments.length)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2],arguments[3]);else{var e,t;if(1===arguments.length){e=arguments[0];var t=function(){}}else 2===arguments.length&&(e=arguments[0],t=arguments[1]);this.engine.execute(e,t)}},c.prototype.executeWithEnvironment=function(){var e,t,r;if(3===arguments.length){e=arguments[0];var n=function(){};t=arguments[1],r=arguments[2]}else if(4===arguments.length){e=arguments[0];var n=arguments[3];t=arguments[1],r=arguments[2]}t=u.map(t,function(e){return{token:"uri",value:e}}),r=u.map(r,function(e){return{token:"uri",value:e}}),this.engine.execute(e,n,t,r)},c.prototype.graph=function(){var e=null,t=null;if(1===arguments.length)t=arguments[0]||function(){},e=this.engine.lexicon.defaultGraphUri;else{if(2!==arguments.length)throw"An optional graph URI and a callback function must be provided";t=arguments[1]||function(){},e=arguments[0]}null!=this.rdf.resolve(e)&&(e=this.rdf.resolve(e)),this.engine.execute("CONSTRUCT { ?s ?p ?o } WHERE { GRAPH <"+e+"> { ?s ?p ?o } }",t)},c.prototype.node=function(){var e=null,t=null,r=null;if(2===arguments.length)r=arguments[0],t=arguments[1]||function(){},e=this.engine.lexicon.defaultGraphUri;else{if(3!==arguments.length)throw"An optional graph URI, node URI and a callback function must be provided";r=arguments[0],e=arguments[1],t=arguments[2]||function(){}}null!=this.rdf.resolve(e)&&(e=this.rdf.resolve(e)),null!=this.rdf.resolve(r)&&(r=this.rdf.resolve(r)),this.engine.execute("CONSTRUCT { <"+r+"> ?p ?o } WHERE { GRAPH <"+e+"> { <"+r+"> ?p ?o } }",t)},c.prototype.startObservingNode=function(){var e,t,r;2===arguments.length?(e=arguments[0],r=arguments[1],this.engine.callbacksBackend.observeNode(e,r,function(){})):3===arguments.length&&(e=arguments[0],t=arguments[1],r=arguments[2],this.engine.callbacksBackend.observeNode(e,t,r,function(){}))},c.prototype.stopObservingNode=function(e){this.engine.callbacksBackend.stopObservingNode(e)},c.prototype.startObservingQuery=function(){var e=arguments[0],t=arguments[1],r=arguments[2];null!=r?this.engine.callbacksBackend.observeQuery(e,t,r):this.engine.callbacksBackend.observeQuery(e,t,function(){})},c.prototype.stopObservingQuery=function(e){this.engine.callbacksBackend.stopObservingQuery(e)},c.prototype.subscribe=function(e,t,r,n,i){var o=this,a=function(e,t){var r=[],n={blanks:{},outCache:{}},a=[];u.each(t,function(e){var t=l.buildRDFResource(e.subject,a,o.engine,n),i=l.buildRDFResource(e.predicate,a,o.engine,n),s=l.buildRDFResource(e.object,a,o.engine,n);null!=t&&null!=i&&null!=s&&(e=new l.Triple(t,i,s),r.push(e))}),i(e,r)};this.functionMap[i]=a,this.engine.callbacksBackend.subscribe(e,t,r,n,a,function(){})},c.prototype.unsubscribe=function(e){var t=this.functionMap[e];this.engine.callbacksBackend.unsubscribe(t),delete this.functionMap[e]},c.prototype.setPrefix=function(e,t){this.rdf.setPrefix(e,t)},c.prototype.setDefaultPrefix=function(e){this.rdf.setDefaultPrefix(e)},c.prototype.insert=function(){var e,t,r;if(1===arguments.length)t=arguments[0],r=function(){};else if(2===arguments.length)t=arguments[0],r=arguments[1]||function(){};else{if(3!==arguments.length)throw"The triples to insert, an optional graph and callback must be provided";t=arguments[0],e=this.rdf.createNamedNode(arguments[1]),r=arguments[2]||function(){}}var n="",i=this;t.forEach(function(e){n=n+i._nodeToQuery(e.subject)+i._nodeToQuery(e.predicate)+i._nodeToQuery(e.object)+"."}),n=null!=e?"INSERT DATA { GRAPH "+this._nodeToQuery(e)+" { "+n+" } }":"INSERT DATA { "+n+" }",this.engine.execute(n,r)},c.prototype._nodeToQuery=function(e){if("NamedNode"===e.interfaceName){var t=this.rdf.resolve(e.valueOf());return null!=t?"<"+t+">":"<"+e.valueOf()+">"}return""+e},c.prototype.delete=function(){var e,t,r;if(1===arguments.length)t=arguments[0],r=function(){};else if(2===arguments.length)t=arguments[0],r=arguments[1]||function(){};else{if(3!==arguments.length)throw"The triples to delete, an optional graph and callback must be provided";t=arguments[0],e=this.rdf.createNamedNode(arguments[1]),r=arguments[2]||function(){}}var n="",i=this;t.forEach(function(e){n=n+i._nodeToQuery(e.subject)+i._nodeToQuery(e.predicate)+i._nodeToQuery(e.object)+"."}),n=null!=e?"DELETE DATA { GRAPH "+this._nodeToQuery(e)+" { "+n+" } }":"DELETE DATA { "+n+" }",this.engine.execute(n,r)},c.prototype.clear=function(){var e,t;if(0===arguments.length){e=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri);var t=function(){}}else if(1===arguments.length)e=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),t=arguments[0]||function(){};else{if(2!==arguments.length)throw"The optional graph and a callback must be provided";e=this.rdf.createNamedNode(arguments[0]),t=arguments[1]||function(){}}var r="CLEAR GRAPH "+this._nodeToQuery(e);this.engine.execute(r,t)},c.prototype.setBatchLoadEvents=function(e){this.engine.eventsOnBatchLoad=e},c.prototype.registerDefaultNamespace=function(e,t){this.rdf.prefixes.set(e,t),this.engine.registerDefaultNamespace(e,t)},c.prototype.registerDefaultProfileNamespaces=function(){var e=this.rdf.prefixes.values();for(var t in e)this.registerDefaultNamespace(t,e[t])},c.prototype.load=function(){var e,t,r,n,i={};if(3===arguments.length)r=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),e=arguments[0],t=arguments[1],n=arguments[2]||function(){};else if(4===arguments.length)e=arguments[0],t=arguments[1],i=arguments[2],"string"==typeof i?(r=this.rdf.createNamedNode(i),i={}):(r=this.rdf.createNamedNode(i.graph||this.engine.lexicon.defaultGraphUri),delete i.graph),n=arguments[3]||function(){};else if(2===arguments.length)throw"The mediaType of the parser, the data a callback and an optional graph must be provided";if("remote"===e){t=this.rdf.createNamedNode(t);var o="LOAD <"+t.valueOf()+"> INTO GRAPH <"+r.valueOf()+">";this.engine.execute(o,n)}else{var a=this,s=this.engine.rdfLoader.parsers[e];if(!s)return n(Error("Cannot find parser for the provided media type:"+e));var l=function(e,t){e?n(e,t):a.engine.batchLoad(t,function(e){null!=e?n(null,e):n(Error("Erro batch-loading triples."))})},u=[s,{token:"uri",value:r.valueOf()},t,i,l];t&&"string"==typeof t&&0===t.indexOf("file://")?this.engine.rdfLoader.loadFromFile.apply(null,u):this.engine.rdfLoader.tryToParse.apply(null,u)}},c.prototype.registerParser=function(e,t){this.engine.rdfLoader.registerParser(e,t)},c.prototype.registeredGraphs=function(e){this.engine.lexicon.registeredGraphs(!0,function(t){var r=u.map(t,function(e){return new l.NamedNode(e)});e(null,r)})},c.prototype.getNetworkTransport=function(){return NetworkTransport},c.prototype.setNetworkTransport=function(e){NetworkTransport=e},c.prototype.close=function(e){null==e&&(e=function(){}),this.engine.close?this.engine.close(e):e()},c.VERSION="0.9.7";var p=function(){var e,t,n;1==arguments.length?(e=r,t={},n=arguments[0]):2==arguments.length?("string"==typeof arguments[0]?(e=arguments[0],t={}):(e=r+"/index.js",t=arguments[0]),n=arguments[1]):(e=arguments[0],t=arguments[1],n=arguments[2]),n(Error("Store#connect is not supported in the 1.x series of the library"))},f=function(){return 1==arguments.length?new c(arguments[0]):2==arguments.length?new c(arguments[0],arguments[1]):new c};t.exports.Store=c,t.exports.create=f,t.exports.connect=p}).call(this,"/")},{"./lexicon":42,"./persistent_lexicon":45,"./persistent_quad_backend":46,"./quad_backend":47,"./query_engine":49,"./rdf_model":53,"./utils":55}],40:[function(e,t){var r=e("./utils"),n=e("./utils"),i=(e("./quad_index").QuadIndex,e("./quad_index").Pattern),o=e("./rdf_model"),a=e("./abstract_query_tree").AbstractQueryTree,s={};s.ANYTHING={token:"var",value:"_"},s.added="added",s.deleted="deleted",s.eventsFlushed="eventsFlushed",s.CallbacksBackend=function(){this.aqt=new a,this.engine=arguments[0],this.indexMap={},this.observersMap={},this.queriesIndexMap={},this.emptyNotificationsMap={},this.queriesList=[],this.pendingQueries=[],this.matchedQueries=[],this.updateInProgress=null,this.indices=["SPOG","GP","OGS","POG","GSP","OS"],this.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]},this.callbackCounter=0,this.callbacksMap={},this.callbacksInverseMap={},this.queryCounter=0,this.queriesMap={},this.queriesCallbacksMap={},this.queriesInverseMap={};for(var e=0;e<this.indices.length;e++){var t=this.indices[e];this.indexMap[t]={},this.queriesIndexMap[t]={}}},s.CallbacksBackend.prototype.startGraphModification=function(){this.ongoingModification!==!0&&(this.pendingQueries=[].concat(this.queriesList),this.matchedQueries=[],null==this.updateInProgress&&(this.updateInProgress={},this.updateInProgress[s.added]=[],this.updateInProgress[s.deleted]=[]))},s.CallbacksBackend.prototype.nextGraphModification=function(e,t){this.updateInProgress[e].push(t)},s.CallbacksBackend.prototype.endGraphModification=function(e){if(this.ongoingModification!==!0){var t=this;if(null!=this.updateInProgress){var r=t.updateInProgress;t.updateInProgress=null,this.sendNotification(s.deleted,r[s.deleted],function(){t.sendNotification(s.added,r[s.added],function(){t.sendEmptyNotification(s.eventsFlushed,null,function(){t.dispatchQueries(function(){e(!0)})})})})}else e(!0)}else e(!0)},s.CallbacksBackend.prototype.cancelGraphModification=function(){this.ongoingModification!==!0&&(this.updateInProgress=null)},s.CallbacksBackend.prototype.sendNotification=function(e,t,r){for(var n={},i=0;i<t.length;i++){var o=t[i];for(var a in this.indexMap){var s=this.indexMap[a],l=this.componentOrders[a];this._searchCallbacksInIndex(s,l,e,o,n),0!=this.pendingQueries.length&&(s=this.queriesIndexMap[a],this._searchQueriesInIndex(s,l,o))}}this.dispatchNotifications(n),null!=r&&r(!0)},s.CallbacksBackend.prototype.sendEmptyNotification=function(e,t,r){for(var n=this.emptyNotificationsMap[e]||[],i=0;i<n.length;i++)n[i](e,t);r()},s.CallbacksBackend.prototype.dispatchNotifications=function(e){for(var t in e){var r=this.callbacksMap[t],n=e[t][s.deleted];if(null!=n)try{r(s.deleted,n)}catch(i){}for(var o in e[t])if(o!=s.deleted)try{r(o,e[t][o])}catch(i){}}},s.CallbacksBackend.prototype._searchCallbacksInIndex=function(e,t,r,n,i){for(var o=n[1],n=n[0],a=0;a<t.length+1;a++){for(var s=e._||[],l=[],u=0;u<s.length;u++){var c=s[u];null!=this.callbacksMap[c]&&(i[c]=i[c]||{},i[c][r]=i[c][r]||[],i[c][r].push(n),l.push(c))}e._=l;var p=t[a];if(null==e[""+o[p]])break;e=e[""+o[p]]}},s.CallbacksBackend.prototype.subscribeEmpty=function(e,t){var r=this.emptyNotificationsMap[e]||[];r.push(t),this.emptyNotificationsMap[e]=r},s.CallbacksBackend.prototype.unsubscribeEmpty=function(e,t){var n=this.emptyNotificationsMap[e];null!=n&&(n=r.reject(n,function(e){return e===t})),this.emptyNotificationsMap[e]=n},s.CallbacksBackend.prototype.subscribe=function(e,t,r,n,o,a){var s=this._tokenizeComponents(e,t,r,n),l={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,l);var u=this;this.engine.normalizeQuad(s,l,!0,function(e){for(var t=new i(e),r=u._indexForPattern(t),n=u.componentOrders[r],s=u.indexMap[r],l=0;l<n.length;l++){var c=n[l],p=e[c];if("_"===p){null==s._&&(s._=[]),u.callbackCounter++,s._.push(u.callbackCounter),u.callbacksMap[u.callbackCounter]=o,u.callbacksInverseMap[o]=u.callbackCounter;break}l===n.length-1?(s[p]=s[p]||{_:[]},u.callbackCounter++,s[p]._.push(u.callbackCounter),u.callbacksMap[u.callbackCounter]=o,u.callbacksInverseMap[o]=u.callbackCounter):(s[p]=s[p]||{},s=s[p])}null!=a&&a(!0)})},s.CallbacksBackend.prototype.unsubscribe=function(e){var t=this.callbacksInverseMap[e];null!=t&&(delete this.callbacksInverseMap[e],delete this.callbacksMap[t])},s.CallbacksBackend.prototype._tokenizeComponents=function(e,t,r,n){var i={};return i.subject=null==e?s.ANYTHING:0==e.indexOf("_:")?{token:"blank",value:e}:{token:"uri",value:e},i.predicate=null==t?s.ANYTHING:{token:"uri",value:t},i.object=null==r?s.ANYTHING:{token:"uri",value:r},i.graph=null==n?s.ANYTHING:{token:"uri",value:n},i},s.CallbacksBackend.prototype._indexForPattern=function(e){for(var t=e.indexKey,n=this.indices,i=0;i<n.length;i++)for(var o=n[i],a=this.componentOrders[o],s=0;s<a.length&&r.include(t,a[s])!==!1;s++)if(s==t.length-1)return o;return"SPOG"},s.CallbacksBackend.prototype.observeNode=function(){var e,t,r,n;4===arguments.length?(e=arguments[0],t=arguments[1],r=arguments[2],n=arguments[3]):(e=arguments[0],t=this.engine.lexicon.defaultGraphUri,r=arguments[1],n=arguments[2]);var i="CONSTRUCT { <"+e+"> ?p ?o } WHERE { GRAPH <"+t+"> { <"+e+"> ?p ?o } }",a=this,l={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,l);var u=[];this.engine.execute(i,function(t,i){if(t)n&&n(!1);else{var c=i,p=!1,f=function(e,t){if("eventsFlushed"===e&&p){p=!1;try{r(c)}catch(n){}}else if("eventsFlushed"!==e){p=!0;for(var i=0;i<t.length;i++){var f=t[i],d=o.buildRDFResource(f.subject,u,a.engine,l),h=o.buildRDFResource(f.predicate,u,a.engine,l),v=o.buildRDFResource(f.object,u,a.engine,l);null!=d&&null!=h&&null!=v&&(f=new o.Triple(d,h,v),e===s.added?c.add(f):e===s.deleted&&c.remove(f))}}};a.observersMap[r]=f,a.subscribeEmpty(s.eventsFlushed,f),a.subscribe(e,null,null,null,f,function(){try{r(c)}catch(e){}n&&n(!0)})}})},s.CallbacksBackend.prototype.stopObservingNode=function(e){var t=this.observersMap[e];return t?(this.unsubscribe(t),this.unsubscribeEmpty(s.eventsFlushed,t),!0):!1},s.CallbacksBackend.prototype.observeQuery=function(e,t,r){var o=this.aqt.parseQueryString(e),a=this.aqt.parseSelect(o.units[0]),s=this.aqt.collectBasicTriples(a),l=this,u={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,u);var c=this.queryCounter;this.queryCounter++,this.queriesMap[c]=e,this.queriesInverseMap[e]=c,this.queriesList.push(c),this.queriesCallbacksMap[c]=t,n.eachSeries(s,function(e,t){null==e.graph&&(e.graph=l.engine.lexicon.defaultGraphUriTerm),l.engine.normalizeQuad(e,u,!0,function(e){for(var r=new i(e),n=l._indexForPattern(r),o=l.componentOrders[n],a=l.queriesIndexMap[n],s=0;s<o.length;s++){var u=o[s],p=e[u];if("string"==typeof p){null==a._&&(a._=[]),a._.push(c);break}s===o.length-1?(a[p]=a[p]||{_:[]},a[p]._.push(c)):(a[p]=a[p]||{},a=a[p])}t()})},function(){l.engine.execute(e,function(e,r){e?console.log("ERROR in query callback "+r):t(r)}),null!=r&&r()})},s.CallbacksBackend.prototype.stopObservingQuery=function(e){var t=this.queriesInverseMap[e];null!=t&&(delete this.queriesInverseMap[e],delete this.queriesMap[t],this.queriesList=r.reject(this.queriesList,function(e){return e===t}))},s.CallbacksBackend.prototype._searchQueriesInIndex=function(e,t,n){for(var i=n[1],n=n[0],o=0;o<t.length+1;o++){for(var a=e._||[],s=[],l=0;l<a.length;l++){var u=a[l];r.include(this.pendingQueries,u)&&(r.remove(this.pendingQueries,function(e){return e===u}),this.matchedQueries.push(u)),null!=this.queriesMap[u]&&s.push(u)}e._=s;var c=t[o];if(null==e[""+i[c]])break;e=e[""+i[c]]}},s.CallbacksBackend.prototype.dispatchQueries=function(e){var t,r,i=this,o={};n.eachSeries(this.matchedQueries,function(e,n){null==o[e]?(o[e]=!0,t=i.queriesMap[e],r=i.queriesCallbacksMap[e],i.engine.execute(t,function(e,t){if(!e)try{r(t)}catch(i){}n()})):n()},function(){e()})},s.CallbacksBackend.added=s.added,s.CallbacksBackend.deleted=s.deleted,s.CallbacksBackend.eventsFlushed=s.eventsFlushed,t.exports=s},{"./abstract_query_tree":37,"./quad_index":48,"./rdf_model":53,"./utils":55}],41:[function(e,t,r){var n=e("jsonld"),i=function(e,t,r){var i=null;n.normalize(e,{},function(e,n){if(e)r(e);else{var o=function(e){return"blank node"===e.type?{blank:e.value}:"IRI"===e.type?{token:"uri",value:e.value}:"literal"===e.type?null!==e.datatype?{literal:'"'+e.value+'"^^<'+e.datatype+">"}:null!=e.language?{literal:'"'+e.value+'"@'+e.language}:{literal:'"'+e.value+'"'}:void 0};i=[];var a=function(e,r,n){i.push({subject:o(e),predicate:o(r),object:o(n),graph:t})
};for(var s in n)for(var l=n[s],u=0;u<l.length;u++){var c=l[u];a(c.subject,c.predicate,c.object)}r(null,i)}})};r.JSONLDParser={};var o=r.JSONLDParser;o.parser={async:!0,parse:function(e,t,r,n){try{"string"==typeof e&&(e=JSON.parse(e)),i(e,t,n)}catch(o){n(o)}}},t.exports={JSONLDParser:o}},{jsonld:32}],42:[function(e,t){var r=e("./utils"),n=e("./btree").Tree,i=function(e){var t=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,r.seq(function(e){new n(2,function(r){t.uris=r,e()})},function(e){new n(2,function(r){t.literals=r,e()})},function(e){new n(2,function(r){t.knownGraphs=r,e()})},function(e){new n(2,function(r){t.oidUris=r,e()})},function(e){new n(2,function(r){t.oidLiterals=r,e()})},function(e){new n(2,function(r){t.oidBlanks=r,e()})})(function(){null!=e&&e(t)})};i.prototype.registerGraph=function(e,t,r){e!=this.defaultGraphOid?this.knownGraphs.insert(e,t,function(){r()}):r()},i.prototype.registeredGraphs=function(e,t){var r=[];this.knownGraphs.walk(function(t){r.push(e===!0?t.data:t.key)},function(){t(r)})},i.prototype.registerUri=function(e,t){var n=this;e===this.defaultGraphUri?t(this.defaultGraphOid):this.uris.search(e,function(i){if(null==i){var o=n.oidCounter,a="u"+o;n.oidCounter++,r.seq(function(t){n.uris.insert(e,[o,0],function(){t()})},function(t){n.oidUris.insert(a,e,function(){t()})})(function(){t(o)})}else o=i[0],i[1]=i[1]+1,t(o)})},i.prototype.resolveUri=function(e,t){e===this.defaultGraphUri?t(this.defaultGraphOid):this.uris.search(e,function(e){t(null!=e?e[0]:-1)})},i.prototype.resolveUriCost=function(e,t){e===this.defaultGraphUri?t(0):this.uris.search(e,function(e){t(null!=e?e[1]:-1)})},i.prototype.registerBlank=function(e){var t=this.oidCounter;this.oidCounter++;var r=""+t;this.oidBlanks.insert(r,r,function(){e(t)})},i.prototype.resolveBlank=function(e,t){var r=this;this.oidBlanks.search(e,function(e){if(null!=e)t(e);else{var n=r.oidCounter;this.oidCounter++,t(""+n)}})},i.prototype.resolveBlankCost=function(e,t){t(0)},i.prototype.registerLiteral=function(e,t){var n=this;this.literals.search(e,function(i){if(null==i){var o=n.oidCounter,a="l"+o;n.oidCounter++,r.seq(function(t){n.literals.insert(e,[o,0],function(){t()})},function(t){n.oidLiterals.insert(a,e,function(){t()})})(function(){t(o)})}else{var o=i[0];i[1]=i[1]+1,t(o)}})},i.prototype.resolveLiteral=function(e,t){this.literals.search(e,function(e){t(null!=e?e[0]:-1)})},i.prototype.resolveLiteralCost=function(e,t){this.literals.search(e,function(e){t(null!=e?e[1]:-1)})},i.prototype.parseLiteral=function(e){var t=e.lastIndexOf("@");if(-1!=t&&'"'===e[t-1]&&null!=e.substring(t,e.length).match(/^@[a-zA-Z\-]+$/g)){var r=e.substring(1,t-1),n=e.substring(t+1,e.length);return{token:"literal",value:r,lang:n}}var t=e.lastIndexOf("^^");if(-1!=t&&'"'===e[t-1]&&"<"===e[t+2]&&">"===e[e.length-1]){var r=e.substring(1,t-1),i=e.substring(t+3,e.length-1);return{token:"literal",value:r,type:i}}var r=e.substring(1,e.length-1);return{token:"literal",value:r}},i.prototype.parseUri=function(e){return{token:"uri",value:e}},i.prototype.retrieve=function(e,t){var n=this;e===this.defaultGraphOid?t({token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0}):r.seq(function(t,r){n.oidUris.search("u"+e,function(e){null!=e?r(null,n.parseUri(e)):r(null,null)})},function(t,r){null==t?n.oidLiterals.search("l"+e,function(e){null!=e?r(null,n.parseLiteral(e)):r(null,null)}):r(null,t)},function(t,r){null==t?n.oidBlanks.search(""+e,function(t){null!=t?r(null,{token:"blank",value:"_:"+e}):r(null,null)}):r(null,t)})(null,function(e,r){t(r)})},i.prototype.clear=function(e){var t=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,r.seq(function(e){new n(2,function(r){t.uris=r,e()})},function(e){new n(2,function(r){t.literals=r,e()})},function(e){new n(2,function(r){t.knownGraphs=r,e()})},function(e){new n(2,function(r){t.oidUris=r,e()})},function(e){new n(2,function(r){t.oidLiterals=r,e()})},function(e){new n(2,function(r){t.oidBlanks=r,e()})})(function(){null!=e&&e()})},i.prototype.unregister=function(e,t,n){var i=this;r.seq(function(r){i._unregisterTerm(e.subject.token,t.subject,r)},function(r){i._unregisterTerm(e.predicate.token,t.predicate,r)},function(r){i._unregisterTerm(e.object.token,t.object,r)},function(r){null!=e.graph?i._unregisterTerm(e.graph.token,t.graph,r):r()})(function(){n(!0)})},i.prototype._unregisterTerm=function(e,t,n){var i=this;if("uri"===e)if(t!=this.defaultGraphOid){var o="u"+t;i.oidUris.search(o,function(e){i.uris.search(e,function(a){var s=a[1];""+a[0]==""+t?0===s?r.seq(function(e){i.oidUris.delete(o,function(){e()})},function(t){i.uris.delete(e,function(){t()})},function(e){i.knownGraphs.delete(t,function(){e()})})(function(){n()}):i.uris.insert(e,[t,s-1],function(){n()}):n()})})}else n();else if("literal"===e){this.oidCounter++;var o="l"+t;i.oidLiterals.search(o,function(e){i.literals.search(e,function(a){var s=a[1];""+a[0]==""+t?0===s?r.seq(function(e){i.oidLiterals.delete(o,function(){e()})},function(t){i.literals.delete(e,function(){t()})})(function(){n()}):i.literals.insert(e,[t,s-1],function(){n()}):n()})})}else"blank"===e?i.oidBlanks.delete(""+t,function(){n()}):n()},t.exports={Lexicon:i}},{"./btree":38,"./utils":55}],43:[function(e,t){var r=e("http"),n=e("https"),i=e("url"),o={load:function(e,t,a,s){var l=null==s?3:s,u=i.parse(e,!0,!0),c={host:u.host,hostname:u.hostname,method:"GET",path:u.path,headers:{host:u.hostname,Accept:t}},p=null;"http:"===u.protocol?(c.port=u.port||80,p=r):"https:"===u.protocol&&(c.port=u.port||443,p=n);var f=p.request(c,function(e){var r=e.headers,n="";if("2"==(""+e.statusCode)[0])e.on("end",function(){a(null,{headers:r,data:n})}),e.on("data",function(e){n+=e});else if("3"==(""+e.statusCode)[0])if(0==l)a(Error("Too many redirections"));else{var i=r.Location||r.location;null!=i?o.load(i,t,a,l-1):a(Error("Redirection without location header"))}else a(Error("HTTP error: "+e.statusCode))});f.on("error",a),f.end()}};t.exports={NetworkTransport:o}},{http:6,https:10,url:28}],44:[function(e,t){t.exports=function(){function e(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}function t(e,t,r,n,i,o){this.message=e,this.expected=t,this.found=r,this.offset=n,this.line=i,this.column=o,this.name="SyntaxError"}function r(e){function r(t){function r(t,r,n){var i,o;for(i=r;n>i;i++)o=e.charAt(i),"\n"===o?(t.seenCR||t.line++,t.column=1,t.seenCR=!1):"\r"===o||"\u2028"===o||"\u2029"===o?(t.line++,t.column=1,t.seenCR=!0):(t.column++,t.seenCR=!1)}return g!==t&&(g>t&&(g=0,y={line:1,column:1,seenCR:!1}),r(y,g,t),g=t),y}function n(e){b>h||(h>b&&(b=h,m=[]),m.push(e))}function i(n,i,o){function a(e){var t=1;for(e.sort(function(e,t){return e.description<t.description?-1:e.description>t.description?1:0});t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}function s(e,t){function r(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+t(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+t(e)}).replace(/[\u0180-\u0FFF]/g,function(e){return"\\u0"+t(e)}).replace(/[\u1080-\uFFFF]/g,function(e){return"\\u"+t(e)})}var n,i,o,a=Array(e.length);for(o=0;o<e.length;o++)a[o]=e[o].description;return n=e.length>1?a.slice(0,-1).join(", ")+" or "+a[e.length-1]:a[0],i=t?'"'+r(t)+'"':"end of input","Expected "+n+" but "+i+" found."}var l=r(o),u=o<e.length?e.charAt(o):null;return null!==i&&a(i),new t(null!==n?n:s(i,u),i,u,o,l.line,l.column)}function o(e){var t,r=Array(e.length);for(t=0;t<e.length;t++)r[t]=e.charCodeAt(t)-32;return r}function a(t){function r(e){return"[object Array]"===Object.prototype.toString.apply(e)?[]:e}for(var i,o,s=d[t],l=0,c=[],p=s.length,g=[],y=[];;){for(;p>l;)switch(s[l]){case 0:y.push(r(f[s[l+1]])),l+=2;break;case 1:y.push(h),l++;break;case 2:y.pop(),l++;break;case 3:h=y.pop(),l++;break;case 4:y.length-=s[l+1],l+=2;break;case 5:y.splice(-2,1),l++;break;case 6:y[y.length-2].push(y.pop()),l++;break;case 7:y.push(y.splice(y.length-s[l+1],s[l+1])),l+=2;break;case 8:y.pop(),y.push(e.substring(y[y.length-1],h)),l++;break;case 9:g.push(p),c.push(l+3+s[l+1]+s[l+2]),y[y.length-1]?(p=l+3+s[l+1],l+=3):(p=l+3+s[l+1]+s[l+2],l+=3+s[l+1]);break;case 10:g.push(p),c.push(l+3+s[l+1]+s[l+2]),y[y.length-1]===u?(p=l+3+s[l+1],l+=3):(p=l+3+s[l+1]+s[l+2],l+=3+s[l+1]);break;case 11:g.push(p),c.push(l+3+s[l+1]+s[l+2]),y[y.length-1]!==u?(p=l+3+s[l+1],l+=3):(p=l+3+s[l+1]+s[l+2],l+=3+s[l+1]);break;case 12:y[y.length-1]!==u?(g.push(p),c.push(l),p=l+2+s[l+1],l+=2):l+=2+s[l+1];break;case 13:g.push(p),c.push(l+3+s[l+1]+s[l+2]),e.length>h?(p=l+3+s[l+1],l+=3):(p=l+3+s[l+1]+s[l+2],l+=3+s[l+1]);break;case 14:g.push(p),c.push(l+4+s[l+2]+s[l+3]),e.substr(h,f[s[l+1]].length)===f[s[l+1]]?(p=l+4+s[l+2],l+=4):(p=l+4+s[l+2]+s[l+3],l+=4+s[l+2]);break;case 15:g.push(p),c.push(l+4+s[l+2]+s[l+3]),e.substr(h,f[s[l+1]].length).toLowerCase()===f[s[l+1]]?(p=l+4+s[l+2],l+=4):(p=l+4+s[l+2]+s[l+3],l+=4+s[l+2]);break;case 16:g.push(p),c.push(l+4+s[l+2]+s[l+3]),f[s[l+1]].test(e.charAt(h))?(p=l+4+s[l+2],l+=4):(p=l+4+s[l+2]+s[l+3],l+=4+s[l+2]);break;case 17:y.push(e.substr(h,s[l+1])),h+=s[l+1],l+=2;break;case 18:y.push(f[s[l+1]]),h+=f[s[l+1]].length,l+=2;break;case 19:y.push(u),0===x&&n(f[s[l+1]]),l+=2;break;case 20:v=y[y.length-1-s[l+1]],l+=2;break;case 21:v=h,l++;break;case 22:for(i=s.slice(l+4,l+4+s[l+3]),o=0;o<s[l+3];o++)i[o]=y[y.length-1-i[o]];y.splice(y.length-s[l+2],s[l+2],f[s[l+1]].apply(null,i)),l+=4+s[l+3];break;case 23:y.push(a(s[l+1])),l+=2;break;case 24:x++,l++;break;case 25:x--,l++;break;default:throw Error("Invalid opcode: "+s[l]+".")}if(g.length<=0)break;p=g.pop(),l=c.pop()}return y[0]}var s,l=arguments.length>1?arguments[1]:{},u={},c={DOCUMENT:0},p=0,f=[{type:"other",description:"[1] QueryUnit"},{type:"other",description:"[2] Query"},u,function(e,t,r){return{token:"query",kind:"query",prologue:e,units:[t],inlineData:r}},{type:"other",description:"[3] Prologue"},null,[],function(e,t){return{token:"prologue",base:e,prefixes:t}},{type:"other",description:"[4] BaseDecl"},"BASE",{type:"literal",value:"BASE",description:'"BASE"'},"base",{type:"literal",value:"base",description:'"base"'},function(e){E(e);var t={};return t.token="base",t.value=e,t},{type:"other",description:"[5] PrefixDecl"},"PREFIX",{type:"literal",value:"PREFIX",description:'"PREFIX"'},"prefix",{type:"literal",value:"prefix",description:'"prefix"'},function(e,t){_(e,t);var r={};return r.token="prefix",r.prefix=e,r.local=t,r},{type:"other",description:"[6] SelectQuery"},function(e,t,r,n){for(var i={named:[],implicit:[]},o=0;o<t.length;o++){var a=t[o];"default"===a.kind?i.implicit.push(a.graph):i.named.push(a.graph)}0===i.named.length&&0===i.implicit.length&&i.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var s={};return s.kind="select",s.token="executableunit",s.dataset=i,s.projection=e.vars,s.modifier=e.modifier,s.pattern=r,null!=n&&null!=n.limit&&(s.limit=n.limit),null!=n&&null!=n.offset&&(s.offset=n.offset),null!=n&&null!=n.order&&""!=n.order&&(s.order=n.order),null!=n&&null!=n.group&&(s.group=n.group),s},{type:"other",description:"[7] SubSelect"},function(e,t,r){var n={};return n.kind="select",n.token="subselect",n.projection=e.vars,n.modifier=e.modifier,n.pattern=t,null!=r&&null!=r.limit&&(n.limit=r.limit),null!=r&&null!=r.offset&&(n.offset=r.offset),null!=r&&null!=r.order&&""!=r.order&&(n.order=r.order),null!=r&&null!=r.group&&(n.group=r.group),n},{type:"other",description:"[8] SelectClause"},"SELECT",{type:"literal",value:"SELECT",description:'"SELECT"'},"select",{type:"literal",value:"select",description:'"select"'},"DISTINCT",{type:"literal",value:"DISTINCT",description:'"DISTINCT"'},"distinct",{type:"literal",value:"distinct",description:'"distinct"'},"REDUCED",{type:"literal",value:"REDUCED",description:'"REDUCED"'},"reduced",{type:"literal",value:"reduced",description:'"reduced"'},"(",{type:"literal",value:"(",description:'"("'},"AS",{type:"literal",value:"AS",description:'"AS"'},"as",{type:"literal",value:"as",description:'"as"'},")",{type:"literal",value:")",description:'")"'},"*",{type:"literal",value:"*",description:'"*"'},function(e,t){var r=[];if(3===t.length&&"*"===t[1])return{vars:[{token:"variable",kind:"*"}],modifier:I(e)};for(var n=0;n<t.length;n++){var i=t[n];r.push(3===i.length?{token:"variable",kind:"var",value:i[1]}:{token:"variable",kind:"aliased",expression:i[3],alias:i[7]})}return{vars:r,modifier:I(e)}},{type:"other",description:"[9] ConstructQuery"},"CONSTRUCT",{type:"literal",value:"CONSTRUCT",description:'"CONSTRUCT"'},"construct",{type:"literal",value:"construct",description:'"construct"'},function(e,t,r,n){for(var i={named:[],implicit:[]},o=0;o<t.length;o++){var a=t[o];"default"===a.kind?i.implicit.push(a.graph):i.named.push(a.graph)}0===i.named.length&&0===i.implicit.length&&i.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var s={};return s.kind="construct",s.token="executableunit",s.dataset=i,s.template=e,s.pattern=r,null!=n&&null!=n.limit&&(s.limit=n.limit),null!=n&&null!=n.offset&&(s.offset=n.offset),null!=n&&null!=n.order&&""!=n.order&&(s.order=n.order),s},"WHERE",{type:"literal",value:"WHERE",description:'"WHERE"'},"where",{type:"literal",value:"where",description:'"where"'},"{",{type:"literal",value:"{",description:'"{"'},"}",{type:"literal",value:"}",description:'"}"'},function(e,t,r){for(var n={named:[],implicit:[]},i=0;i<e.length;i++){var o=e[i];"default"===o.kind?n.implicit.push(o.graph):n.named.push(o.graph)}0===n.named.length&&0===n.implicit.length&&n.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var a={};return a.kind="construct",a.token="executableunit",a.dataset=n,a.template=t,a.pattern={token:"basicgraphpattern",triplesContext:t.triplesContext},null!=r&&null!=r.limit&&(a.limit=r.limit),null!=r&&null!=r.offset&&(a.offset=r.offset),null!=r&&null!=r.order&&""!=r.order&&(a.order=r.order),a},{type:"other",description:"[10] DescribeQuery"},"DESCRIBE",{type:"literal",value:"DESCRIBE",description:'"DESCRIBE"'},{type:"other",description:"[11] AskQuery"},"ASK",{type:"literal",value:"ASK",description:'"ASK"'},"ask",{type:"literal",value:"ask",description:'"ask"'},function(e,t){for(var r={named:[],implicit:[]},n=0;n<e.length;n++){var i=e[n];"implicit"===i.kind?r.implicit.push(i.graph):r.named.push(i.graph)}0===r.named.length&&0===r.implicit.length&&r.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var o={};return o.kind="ask",o.token="executableunit",o.dataset=r,o.pattern=t,o},{type:"other",description:"[12] DatasetClause"},"FROM",{type:"literal",value:"FROM",description:'"FROM"'},"from",{type:"literal",value:"from",description:'"from"'},function(e){return e},{type:"other",description:"[13] DefaultGraphClause"},function(e){return{graph:e,kind:"default",token:"graphClause"}},{type:"other",description:"[14] NamedGraphClause"},"NAMED",{type:"literal",value:"NAMED",description:'"NAMED"'},"named",{type:"literal",value:"named",description:'"named"'},function(e){return{graph:e,kind:"named",token:"graphCluase"}},{type:"other",description:"[15] SourceSelector"},{type:"other",description:"[16] WhereClause"},function(e){return e},{type:"other",description:"[17] SolutionModifier"},function(e,t,r){var n={};return null!=r&&(null!=r.limit&&(n.limit=r.limit),null!=r.offset&&(n.offset=r.offset)),null!=e&&(n.group=e),n.order=t,n},{type:"other",description:"[18] GroupClause"},"GROUP",{type:"literal",value:"GROUP",description:'"GROUP"'},"group",{type:"literal",value:"group",description:'"group"'},"BY",{type:"literal",value:"BY",description:'"BY"'},"by",{type:"literal",value:"by",description:'"by"'},function(e){return e},{type:"other",description:"[19] GroupCondition"},function(e){return e},function(e){return e},function(e,t){return 0!=t.length?{token:"aliased_expression",expression:e,alias:t[2]}:e},function(e){return e},{type:"other",description:"[20] HavingClause"},"HAVING",{type:"literal",value:"HAVING",description:'"HAVING"'},{type:"other",description:"[21] HavingCondition"},{type:"other",description:"[22] OrderClause"},"ORDER",{type:"literal",value:"ORDER",description:'"ORDER"'},"order",{type:"literal",value:"order",description:'"order"'},function(e){return e},{type:"other",description:"[23] OrderCondition"},"ASC",{type:"literal",value:"ASC",description:'"ASC"'},"asc",{type:"literal",value:"asc",description:'"asc"'},"DESC",{type:"literal",value:"DESC",description:'"DESC"'},"desc",{type:"literal",value:"desc",description:'"desc"'},function(e,t){return{direction:e.toUpperCase(),expression:t}},function(e){if("var"===e.token)var e={token:"expression",expressionType:"atomic",primaryexpression:"var",value:e};return{direction:"ASC",expression:e}},{type:"other",description:"[24] LimitOffsetClauses"},function(e){for(var t={},r=0;r<e.length;r++){var n=e[r];null!=n&&null!=n.limit?t.limit=n.limit:null!=n&&null!=n.offset&&(t.offset=n.offset)}return t},{type:"other",description:"[25] LimitClause"},"LIMIT",{type:"literal",value:"LIMIT",description:'"LIMIT"'},"limit",{type:"literal",value:"limit",description:'"limit"'},function(e){return{limit:parseInt(e.value)}},{type:"other",description:"[26] OffsetClause"},"OFFSET",{type:"literal",value:"OFFSET",description:'"OFFSET"'},"offset",{type:"literal",value:"offset",description:'"offset"'},function(e){return{offset:parseInt(e.value)}},{type:"other",description:"[27] BindingsClause"},"BINDINGS",{type:"literal",value:"BINDINGS",description:'"BINDINGS"'},{type:"other",description:"[28] BindingValue"},"UNDEF",{type:"literal",value:"UNDEF",description:'"UNDEF"'},{type:"other",description:"[28]  	ValuesClause	  ::=  	( 'VALUES' DataBlock )?"},"VALUES",{type:"literal",value:"VALUES",description:'"VALUES"'},"values",{type:"literal",value:"values",description:'"values"'},function(e){return null!=e?e[1]:null},{type:"other",description:"[29] UpdateUnit"},{type:"other",description:"[30] Update"},";",{type:"literal",value:";",description:'";"'},function(e,t,r){var n={};n.token="query",n.kind="update",n.prologue=e;var i=[t];return null!=r&&null!=r.length&&null!=r[3]&&null!=r[3].units&&(i=i.concat(r[3].units)),n.units=i,n},{type:"other",description:"[31] Update1"},{type:"other",description:"[32] Load"},"LOAD",{type:"literal",value:"LOAD",description:'"LOAD"'},"load",{type:"literal",value:"load",description:'"load"'},"INTO",{type:"literal",value:"INTO",description:'"INTO"'},"into",{type:"literal",value:"into",description:'"into"'},function(e,t){var r={};return r.kind="load",r.token="executableunit",r.sourceGraph=e,null!=t&&(r.destinyGraph=t[2]),r},{type:"other",description:"[33] Clear"},"CLEAR",{type:"literal",value:"CLEAR",description:'"CLEAR"'},"clear",{type:"literal",value:"clear",description:'"clear"'},"SILENT",{type:"literal",value:"SILENT",description:'"SILENT"'},"silent",{type:"literal",value:"silent",description:'"silent"'},function(e){var t={};return t.kind="clear",t.token="executableunit",t.destinyGraph=e,t},{type:"other",description:"[34] Drop"},"DROP",{type:"literal",value:"DROP",description:'"DROP"'},"drop",{type:"literal",value:"drop",description:'"drop"'},function(e){var t={};return t.kind="drop",t.token="executableunit",t.destinyGraph=e,t},{type:"other",description:"[35] Create"},"CREATE",{type:"literal",value:"CREATE",description:'"CREATE"'},"create",{type:"literal",value:"create",description:'"create"'},function(e){var t={};return t.kind="create",t.token="executableunit",t.destinyGraph=e,t},{type:"other",description:"[36] InsertData"},"INSERT",{type:"literal",value:"INSERT",description:'"INSERT"'},"insert",{type:"literal",value:"insert",description:'"insert"'},"DATA",{type:"literal",value:"DATA",description:'"DATA"'},"data",{type:"literal",value:"data",description:'"data"'},function(e){var t={};return t.kind="insertdata",t.token="executableunit",t.quads=e,t},{type:"other",description:"[37] DeleteData"},"DELETE",{type:"literal",value:"DELETE",description:'"DELETE"'},"delete",{type:"literal",value:"delete",description:'"delete"'},function(e){var t={};return t.kind="deletedata",t.token="executableunit",t.quads=e,t},{type:"other",description:"[38] DeleteWhere"},function(e){var t={};t.kind="modify",t.pattern=e,t.with=null,t.using=null;var r=[],n=e.patterns[0];n=null==n.triplesContext&&null!=n.patterns?n.patterns[0].triplesContext:n.triplesContext;for(var i=0;i<n.length;i++){var o={},a=n[i];o.subject=a.subject,o.predicate=a.predicate,o.object=a.object,o.graph=a.graph,r.push(o)}return t.delete=r,t},{type:"other",description:"[39] Modify"},"WITH",{type:"literal",value:"WITH",description:'"WITH"'},"with",{type:"literal",value:"with",description:'"with"'},function(e,t,r,n){var i={};return i.kind="modify",i.with=""!=e&&null!=e?e[2]:null,3!==t.length||""!==t[2]&&null!=t[2]?3===t.length&&null!=t[0].length&&null!=t[1].length&&null!=t[2].length?(i.delete=t[0],i.insert=t[2]):(i.insert=t,i.delete=null):(i.delete=t[0],i.insert=null),""!=r&&(i.using=r),i.pattern=n,i},{type:"other",description:"[40] DeleteClause"},function(e){return e},{type:"other",description:"[41] InsertClause"},{type:"other",description:"[42] UsingClause"},"USING",{type:"literal",value:"USING",description:'"USING"'},"using",{type:"literal",value:"using",description:'"using"'},function(e){return null!=e.length?{kind:"named",uri:e[2]}:{kind:"default",uri:e}},{type:"other",description:"[43] GraphRef"},"GRAPH",{type:"literal",value:"GRAPH",description:'"GRAPH"'},"graph",{type:"literal",value:"graph",description:'"graph"'},function(e){return e},{type:"other",description:"[44] GraphRefAll"},"DEFAULT",{type:"literal",value:"DEFAULT",description:'"DEFAULT"'},"default",{type:"literal",value:"default",description:'"default"'},function(){return"default"},function(){return"named"},"ALL",{type:"literal",value:"ALL",description:'"ALL"'},"all",{type:"literal",value:"all",description:'"all"'},function(){return"all"},{type:"other",description:"[45] QuadPattern"},function(e){return e.quadsContext},{type:"other",description:"[46] QuadData"},{type:"other",description:"[47] Quads"},".",{type:"literal",value:".",description:'"."'},function(e,t){var r=[];if(null!=e&&null!=e.triplesContext)for(var n=0;n<e.triplesContext.length;n++){var i=e.triplesContext[n];i.graph=null,r.push(i)}if(t&&t.length>0&&t[0].length>0&&(r=r.concat(t[0][0].quadsContext),null!=t[0][2]&&null!=t[0][2].triplesContext))for(var n=0;n<t[0][2].triplesContext.length;n++){var i=t[0][2].triplesContext[n];i.graph=null,r.push(i)}return{token:"quads",quadsContext:r}},{type:"other",description:"[48] QuadsNotTriples"},function(e,t){var r=[];if(null!=t)for(var n=0;n<t.triplesContext.length;n++){var i=t.triplesContext[n];i.graph=e,r.push(i)}return{token:"quadsnottriples",quadsContext:r}},{type:"other",description:"[49] TriplesTemplate"},function(e,t){var r=e.triplesContext;return null!=t&&"object"==typeof t&&null!=t.length&&null!=t[3]&&null!=t[3].triplesContext&&(r=r.concat(t[3].triplesContext)),{token:"triplestemplate",triplesContext:r}},{type:"other",description:"[50] GroupGraphPattern"},function(e){return e},{type:"other",description:"[51] GroupGraphPatternSub"},function(e,t){var r=[];null!=e&&e!=[]&&r.push(e);for(var n=0;n<t.length;n++)for(var i=0;i<t[n].length;i++)null!=t[n][i]&&null!=t[n][i].token&&r.push(t[n][i]);for(var o=[],a=[],s=[],n=0;n<r.length;n++)if("triplespattern"!=r[n].token&&"filter"!=r[n].token){if(0!=a.length||0!=s.length){for(var l=[],i=0;i<a.length;i++)l=l.concat(a[i].triplesContext);l.length>0&&o.push({token:"basicgraphpattern",triplesContext:l}),a=[]}o.push(r[n])}else"triplespattern"===r[n].token?a.push(r[n]):s.push(r[n]);if(0!=a.length||0!=s.length){for(var l=[],i=0;i<a.length;i++)l=l.concat(a[i].triplesContext);l.length>0&&o.push({token:"basicgraphpattern",triplesContext:l})}return{token:"groupgraphpattern",patterns:o,filters:s}},{type:"other",description:"[54] TriplesBlock"},function(e,t){var r=e.triplesContext;return null!=t&&"object"==typeof t&&null!=t&&null!=t.length&&null!=t[2]&&null!=t[2].triplesContext&&(r=r.concat(t[2].triplesContext)),{token:"triplespattern",triplesContext:r}},{type:"other",description:"[53] GraphPatternNotTriples"},{type:"other",description:"[54] OptionalGraphPattern"},"OPTIONAL",{type:"literal",value:"OPTIONAL",description:'"OPTIONAL"'},"optional",{type:"literal",value:"optional",description:'"optional"'},function(e){return{token:"optionalgraphpattern",value:e}},{type:"other",description:"[55] GraphGraphPattern"},function(e,t){for(var r=0;r<t.patterns.length;r++)for(var n=t.patterns[r],i=0;i<n.triplesContext.length;i++){var o=n.triplesContext[i];o.graph=e}return t.token="groupgraphpattern",t},{type:"other",description:"[56] ServiceGraphPattern"},"SERVICE",{type:"literal",value:"SERVICE",description:'"SERVICE"'},function(e,t){return{token:"servicegraphpattern",status:"todo",value:[e,t]}},{type:"other",description:"[57] MinusGraphPattern"},"MINUS",{type:"literal",value:"MINUS",description:'"MINUS"'},"minus",{type:"literal",value:"minus",description:'"minus"'},function(e){return{token:"minusgraphpattern",status:"todo",value:e}},{type:"other",description:"[58] GroupOrUnionGraphPattern"},"UNION",{type:"literal",value:"UNION",description:'"UNION"'},"union",{type:"literal",value:"union",description:'"union"'},function(e,t){if(0===t.length)return e;for(var r={token:"graphunionpattern",value:[e]},n=0;n<t.length;n++)if(n==t.length-1)r.value.push(t[n][3]);else{r.value.push(t[n][3]);var i={token:"graphunionpattern",value:[r]};r=i}return r},{type:"other",description:"[59] Filter"},"FILTER",{type:"literal",value:"FILTER",description:'"FILTER"'},"filter",{type:"literal",value:"filter",description:'"filter"'},function(e){return{token:"filter",value:e}},{type:"other",description:"[60] Bind"},"BIND",{type:"literal",value:"BIND",description:'"BIND"'},"bind",{type:"literal",value:"bind",description:'"bind"'},function(e,t){return{token:"bind",expresision:e,as:t}},{type:"other",description:"[60] Constraint"},{type:"other",description:"[61] InlineData"},function(e){return e},{type:"other",description:"[62] DataBlock"},{type:"other",description:"[63] InlineDataOneVar"},function(e,t){var r={token:"inlineData",values:[{"var":e,value:t}]};return r},{type:"other",description:"[64] InlineDataFull"},function(){var e={token:"inlineData",values:[],todo:!0};return e},{type:"other",description:"[65] DataBlockValue"},{type:"other",description:"[61] FunctionCall"},function(e,t){var r={};return r.token="expression",r.expressionType="irireforfunction",r.iriref=e,r.args=t.value,r},{type:"other",description:"[62] ArgList"},function(){var e={};return e.token="args",e.value=[],e},",",{type:"literal",value:",",description:'","'},function(e,t,r){for(var n=[],i=0;i<r.length;i++)n.push(r[i][1]);var o={};return o.token="args",o.value=[t].concat(n),o.distinct=null!=e&&"DISTINCT"===e.toUpperCase()?!0:!1,o},{type:"other",description:"[63] ExpressionList"},function(e,t){for(var r=[],n=0;n<t.length;n++)r.push(t[n][1]);var i={};return i.token="args",i.value=[e].concat(r),i},{type:"other",description:"[64] ConstructTemplate"},function(e){return e},{type:"other",description:"[65] ConstructTriples"},function(e,t){var r=e.triplesContext;return null!=t&&"object"==typeof t&&null!=t.length&&null!=t[3]&&null!=t[3].triplesContext&&(r=r.concat(t[3].triplesContext)),{token:"triplestemplate",triplesContext:r}},{type:"other",description:"[66] TriplesSameSubject"},function(e,t){var r=t.triplesContext,n=e;if(t.pairs)for(var i=0;i<t.pairs.length;i++){var o=t.pairs[i],a=null;null!=o[1].length&&(o[1]=o[1][0]),n.token&&"triplesnodecollection"===n.token?(a={subject:n.chainSubject[0],predicate:o[0],object:o[1]},r.push(a),r=r.concat(n.triplesContext)):(a={subject:n,predicate:o[0],object:o[1]},r.push(a))}var s={};return s.token="triplessamesubject",s.triplesContext=r,s.chainSubject=n,s},function(e,t){var r=e.triplesContext,n=e.chainSubject;if(t.pairs)for(var i=0;i<t.pairs.length;i++){var o=t.pairs[i];if(null!=o[1].length&&(o[1]=o[1][0]),"triplesnodecollection"===e.token)for(var a=0;a<n.length;a++){var s=n[a];if(null!=s.triplesContext){var l={subject:s.chainSubject,predicate:o[0],object:o[1]};r.concat(s.triplesContext)}else{var l={subject:n[a],predicate:o[0],object:o[1]};r.push(l)}}else{var l={subject:n,predicate:o[0],object:o[1]};r.push(l)}}var u={};return u.token="triplessamesubject",u.triplesContext=r,u.chainSubject=n,u},{type:"other",description:"[83] PropertyListPathNotEmpty"},function(e,t,r){var n={};n.token="propertylist";for(var i=[],o=[],a=0;a<t.length;a++)null!=t[a].triplesContext?(i=i.concat(t[a].triplesContext),o.push("triplesnodecollection"===t[a].token&&null!=t[a].chainSubject.length?[e,t[a].chainSubject[0]]:[e,t[a].chainSubject])):o.push([e,t[a]]);for(var a=0;a<r.length;a++)for(var s=r[a][3],l=s[0],u=s[2]||[],c=0;c<u.length;c++)null!=u[c].triplesContext?(i=i.concat(u[c].triplesContext),o.push([l,u[c].chainSubject])):o.push([l,u[c]]);return n.pairs=o,n.triplesContext=i,n},{type:"other",description:"[67] PropertyListNotEmpty"},function(e,t,r){var n={};n.token="propertylist";for(var i=[],o=[],a=0;a<t.length;a++)null!=t[a].triplesContext?(i=i.concat(t[a].triplesContext),o.push("triplesnodecollection"===t[a].token&&null!=t[a].chainSubject.length?[e,t[a].chainSubject[0]]:[e,t[a].chainSubject])):o.push([e,t[a]]);for(var a=0;a<r.length;a++)for(var s=r[a][3],l=s[0],u=s[2]||[],c=0;c<u.length;c++)null!=u[c].triplesContext?(i=i.concat(u[c].triplesContext),o.push([l,u[c].chainSubject])):o.push([l,u[c]]);return n.pairs=o,n.triplesContext=i,n},{type:"other",description:"[68] PropertyList"},{type:"other",description:"[86] ObjectListPath"},function(e,t){var r=[];r.push(e);for(var n=0;n<t.length;n++)for(var i=0;i<t[n].length;i++)"object"==typeof t[n][i]&&null!=t[n][i].token&&r.push(t[n][i]);return r},{type:"other",description:"[69] ObjectList"},function(e,t){var r=[];r.push(e);for(var n=0;n<t.length;n++)for(var i=0;i<t[n].length;i++)"object"==typeof t[n][i]&&null!=t[n][i].token&&r.push(t[n][i]);return r},{type:"other",description:"[87] ObjectPath"},{type:"other",description:"[70] Object"},{type:"other",description:"[71] Verb"},"a",{type:"literal",value:"a",description:'"a"'},function(){return{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}},{type:"other",description:"[72] TriplesSameSubjectPath"},function(e,t){var r=t.triplesContext,n=e;if(t.pairs)for(var i=0;i<t.pairs.length;i++){var o=t.pairs[i],a=null;null!=o[1].length&&(o[1]=o[1][0]),n.token&&"triplesnodecollection"===n.token?(a={subject:n.chainSubject[0],predicate:o[0],object:o[1]},"path"===a.predicate.token&&"element"===a.predicate.kind&&(a.predicate=a.predicate.value),r.push(a),r=r.concat(n.triplesContext)):(a={subject:n,predicate:o[0],object:o[1]},"path"===a.predicate.token&&"element"===a.predicate.kind&&(a.predicate=a.predicate.value),r.push(a))}var s={};return s.token="triplessamesubject",s.triplesContext=r,s.chainSubject=n,s},function(e,t){var r=e.triplesContext,n=e.chainSubject;if(null!=t&&null!=t.pairs)for(var i=0;i<t.pairs.length;i++){var o=t.pairs[i];if(null!=o[1].length&&(o[1]=o[1][0]),"triplesnodecollection"===e.token)for(var a=0;a<n.length;a++){var s=n[a];if(null!=s.triplesContext){var l={subject:s.chainSubject,predicate:o[0],object:o[1]};r.concat(s.triplesContext)}else{var l={subject:n[a],predicate:o[0],object:o[1]};r.push(l)}}else{var l={subject:n,predicate:o[0],object:o[1]};
r.push(l)}}var u={};return u.token="triplessamesubject",u.triplesContext=r,u.chainSubject=n,u},{type:"other",description:"[73] PropertyListNotEmptyPath"},function(e,t,r){var n={};n.token="propertylist";for(var i=[],o=[],a=0;a<t.length;a++)null!=t[a].triplesContext?(i=i.concat(t[a].triplesContext),o.push("triplesnodecollection"===t[a].token&&null!=t[a].chainSubject.length?[e,t[a].chainSubject[0]]:[e,t[a].chainSubject])):o.push([e,t[a]]);for(var a=0;a<r.length;a++)for(var s=r[a][3],l=s[0],u=s[1]||[],c=0;c<u.length;c++)null!=u[c].triplesContext?(i=i.concat(u[c].triplesContext),o.push([l,u[c].chainSubject])):o.push([l,u[c]]);return n.pairs=o,n.triplesContext=i,n},{type:"other",description:"[74] PropertyListPath"},{type:"other",description:"[75]"},function(e){var t={};return t.token="path",t.kind="element",t.value=e,e},{type:"other",description:"[76] VerbSimple"},{type:"other",description:"[77] Path"},{type:"other",description:"[78] PathAlternative"},"|",{type:"literal",value:"|",description:'"|"'},function(e,t){if(null==t||0===t.length)return e;for(var r=[],n=0;n<t.length;n++)r.push(t[1]);var i={};return i.token="path",i.kind="alternative",i.value=r,i},{type:"other",description:"[79] PathSequence"},"/",{type:"literal",value:"/",description:'"/"'},function(e,t){if(null==t||0===t.length)return e;for(var r=[e],n=0;n<t.length;n++)r.push(t[n][1]);var i={};return i.token="path",i.kind="sequence",i.value=r,i},{type:"other",description:"[88] PathElt"},function(e,t){if(e.token&&"path"!=e.token&&""==t)return e;if(e.token&&e.token!=r&&""!=t){var r={};return r.token="path",r.kind="element",r.value=e,r.modifier=t,r}return e.modifier=t,e},{type:"other",description:"[81] PathEltOrInverse"},"^",{type:"literal",value:"^",description:'"^"'},function(e){var t={};return t.token="path",t.kind="inversePath",t.value=e,t},{type:"other",description:"[82] PathMod"},"?",{type:"literal",value:"?",description:'"?"'},"+",{type:"literal",value:"+",description:'"+"'},{type:"other",description:"[83] PathPrimary"},"!",{type:"literal",value:"!",description:'"!"'},{type:"other",description:"[85] PathOneInPropertySet"},{type:"other",description:"[86] Integer"},{type:"other",description:"[100] TriplesNodePath"},function(e){for(var t=[],r=[],n=null,i=0;i<e.length;i++){$++;var o=null;null==e[i].chainSubject&&null==e[i].triplesContext?o=e[i]:(o=e[i].chainSubject,t=t.concat(e[i].triplesContext)),n={subject:{token:"blank",value:"_:"+$},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:o},0==i&&r.push(n.subject),t.push(n),n=i===e.length-1?{subject:{token:"blank",value:"_:"+$},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+$},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+($+1)}},t.push(n)}return{token:"triplesnodecollection",triplesContext:t,chainSubject:r}},{type:"other",description:"[87] TriplesNode"},function(e){for(var t=[],r=[],n=null,i=0;i<e.length;i++){$++;var o=null;null==e[i].chainSubject&&null==e[i].triplesContext?o=e[i]:(o=e[i].chainSubject,t=t.concat(o.triplesContext)),n={subject:{token:"blank",value:"_:"+$},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:o},0==i&&r.push(n.subject),t.push(n),n=i===e.length-1?{subject:{token:"blank",value:"_:"+$},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+$},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+($+1)}},t.push(n)}return{token:"triplesnodecollection",triplesContext:t,chainSubject:r}},{type:"other",description:"[101] BlankNodePropertyListPath"},"[",{type:"literal",value:"[",description:'"["'},"]",{type:"literal",value:"]",description:'"]"'},function(e){$++;for(var t={token:"blank",value:"_:"+$},r=[],n=0;n<e.pairs.length;n++){var i=e.pairs[n],o={};o.subject=t,o.predicate=i[0],null!=i[1].length&&(i[1]=i[1][0]),o.object=i[1],r.push(o)}return{token:"triplesnode",kind:"blanknodepropertylist",triplesContext:e.triplesContext.concat(r),chainSubject:t}},{type:"other",description:"[88] BlankNodePropertyList"},function(e){$++;for(var t={token:"blank",value:"_:"+$},r=[],n=0;n<e.pairs.length;n++){var i=e.pairs[n],o={};o.subject=t,o.predicate=i[0],null!=i[1].length&&(i[1]=i[1][0]),o.object=i[1],r.push(o)}return{token:"triplesnode",kind:"blanknodepropertylist",triplesContext:e.triplesContext.concat(r),chainSubject:t}},{type:"other",description:"[103] CollectionPath"},function(e){return e},{type:"other",description:"[89] Collection"},{type:"other",description:"[105] GraphNodePath"},function(e){return e[1]},{type:"other",description:"[90] GraphNode"},{type:"other",description:"[91] VarOrTerm"},{type:"other",description:"[92] VarOrIRIref"},{type:"other",description:"[93] Var"},function(e){var t={};return t.token="var",t.value=e,t},{type:"other",description:"[94] GraphTerm"},{type:"other",description:"[95] Expression"},{type:"other",description:"[96] ConditionalOrExpression"},"||",{type:"literal",value:"||",description:'"||"'},function(e,t){if(0===t.length)return e;var r={};r.token="expression",r.expressionType="conditionalor";for(var n=[e],i=0;i<t.length;i++)n.push(t[i][3]);return r.operands=n,r},{type:"other",description:"[97] ConditionalAndExpression"},"&&",{type:"literal",value:"&&",description:'"&&"'},function(e,t){if(0===t.length)return e;var r={};r.token="expression",r.expressionType="conditionaland";for(var n=[e],i=0;i<t.length;i++)n.push(t[i][3]);return r.operands=n,r},{type:"other",description:"[98] ValueLogical"},{type:"other",description:"[99] RelationalExpression"},"=",{type:"literal",value:"=",description:'"="'},"!=",{type:"literal",value:"!=",description:'"!="'},"<",{type:"literal",value:"<",description:'"<"'},">",{type:"literal",value:">",description:'">"'},"<=",{type:"literal",value:"<=",description:'"<="'},">=",{type:"literal",value:">=",description:'">="'},"I",{type:"literal",value:"I",description:'"I"'},"i",{type:"literal",value:"i",description:'"i"'},"N",{type:"literal",value:"N",description:'"N"'},"n",{type:"literal",value:"n",description:'"n"'},"O",{type:"literal",value:"O",description:'"O"'},"o",{type:"literal",value:"o",description:'"o"'},"T",{type:"literal",value:"T",description:'"T"'},"t",{type:"literal",value:"t",description:'"t"'},function(e,t){if(0===t.length)return e;if("i"===t[0][1]||"I"===t[0][1]||"n"===t[0][1]||"N"===t[0][1]){var r={};if("i"===t[0][1]||"I"===t[0][1]){var n="=";r.expressionType="conditionalor"}else{var n="!=";r.expressionType="conditionaland"}for(var i=e,o=[],a=0;a<t[0].length;a++)if("args"===t[0][a].token){o=t[0][a].value;break}r.token="expression",r.operands=[];for(var s=0;s<o.length;s++){var l={};l.token="expression",l.expressionType="relationalexpression",l.operator=n,l.op1=i,l.op2=o[s],r.operands.push(l)}return r}var r={};return r.expressionType="relationalexpression",r.operator=t[0][1],r.op1=e,r.op2=t[0][3],r.token="expression",r},{type:"other",description:"[100] NumericExpression"},{type:"other",description:"[101] AdditiveExpression"},"-",{type:"literal",value:"-",description:'"-"'},function(e,t){if(0===t.length)return e;var r={};r.token="expression",r.expressionType="additiveexpression",r.summand=e,r.summands=[];for(var n=0;n<t.length;n++){var i=t[n],o={};if(4==i.length&&"string"==typeof i[1])o.operator=i[1],o.expression=i[3];else{var a={},s=o[0],l=o[1][1],u=o[1][3],l=null;s.value<0?(o.operator="-",s.value=-s.value):o.operator="+",a.token="expression",a.expressionType="multiplicativeexpression",a.operator=s,a.factors=[{operator:l,expression:u}],o.expression=a}r.summands.push(o)}return r},{type:"other",description:"[102] MultiplicativeExpression"},function(e,t){if(0===t.length)return e;var r={};r.token="expression",r.expressionType="multiplicativeexpression",r.factor=e,r.factors=[];for(var n=0;n<t.length;n++){var i=t[n],o={};o.operator=i[1],o.expression=i[3],r.factors.push(o)}return r},{type:"other",description:"[103] UnaryExpression"},function(e){var t={};return t.token="expression",t.expressionType="unaryexpression",t.unaryexpression="!",t.expression=e,t},function(e){var t={};return t.token="expression",t.expressionType="unaryexpression",t.unaryexpression="+",t.expression=e,t},function(e){var t={};return t.token="expression",t.expressionType="unaryexpression",t.unaryexpression="-",t.expression=e,t},{type:"other",description:"[104] PrimaryExpression"},function(e){var t={};return t.token="expression",t.expressionType="atomic",t.primaryexpression="rdfliteral",t.value=e,t},function(e){var t={};return t.token="expression",t.expressionType="atomic",t.primaryexpression="numericliteral",t.value=e,t},function(e){var t={};return t.token="expression",t.expressionType="atomic",t.primaryexpression="booleanliteral",t.value=e,t},function(e){var t={};return t.token="expression",t.expressionType="atomic",t.primaryexpression="var",t.value=e,t},{type:"other",description:"[105] BrackettedExpression"},function(e){return e},{type:"other",description:"[106] BuiltInCall"},"STR",{type:"literal",value:"STR",description:'"STR"'},"str",{type:"literal",value:"str",description:'"str"'},function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="str",t.args=[e],t},"LANG",{type:"literal",value:"LANG",description:'"LANG"'},"lang",{type:"literal",value:"lang",description:'"lang"'},function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="lang",t.args=[e],t},"LANGMATCHES",{type:"literal",value:"LANGMATCHES",description:'"LANGMATCHES"'},"langmatches",{type:"literal",value:"langmatches",description:'"langmatches"'},function(e,t){var r={};return r.token="expression",r.expressionType="builtincall",r.builtincall="langmatches",r.args=[e,t],r},"DATATYPE",{type:"literal",value:"DATATYPE",description:'"DATATYPE"'},"datatype",{type:"literal",value:"datatype",description:'"datatype"'},function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="datatype",t.args=[e],t},"BOUND",{type:"literal",value:"BOUND",description:'"BOUND"'},"bound",{type:"literal",value:"bound",description:'"bound"'},function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="bound",t.args=[e],t},"IRI",{type:"literal",value:"IRI",description:'"IRI"'},"iri",{type:"literal",value:"iri",description:'"iri"'},function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="iri",t.args=[e],t},"URI",{type:"literal",value:"URI",description:'"URI"'},"uri",{type:"literal",value:"uri",description:'"uri"'},function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="uri",t.args=[e],t},"BNODE",{type:"literal",value:"BNODE",description:'"BNODE"'},"bnode",{type:"literal",value:"bnode",description:'"bnode"'},function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="bnode",t.args=5===e.length?[e[2]]:null,t},"COALESCE",{type:"literal",value:"COALESCE",description:'"COALESCE"'},"coalesce",{type:"literal",value:"coalesce",description:'"coalesce"'},function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="coalesce",t.args=e,t},"IF",{type:"literal",value:"IF",description:'"IF"'},"if",{type:"literal",value:"if",description:'"if"'},function(e,t,r){var n={};return n.token="expression",n.expressionType="builtincall",n.builtincall="if",n.args=[e,t,r],n},"ISLITERAL",{type:"literal",value:"ISLITERAL",description:'"ISLITERAL"'},"isliteral",{type:"literal",value:"isliteral",description:'"isliteral"'},function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="isliteral",t.args=[e],t},"ISBLANK",{type:"literal",value:"ISBLANK",description:'"ISBLANK"'},"isblank",{type:"literal",value:"isblank",description:'"isblank"'},function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="isblank",t.args=[e],t},"SAMETERM",{type:"literal",value:"SAMETERM",description:'"SAMETERM"'},"sameterm",{type:"literal",value:"sameterm",description:'"sameterm"'},function(e,t){var r={};return r.token="expression",r.expressionType="builtincall",r.builtincall="sameterm",r.args=[e,t],r},"ISURI",{type:"literal",value:"ISURI",description:'"ISURI"'},"isuri",{type:"literal",value:"isuri",description:'"isuri"'},"ISIRI",{type:"literal",value:"ISIRI",description:'"ISIRI"'},"isiri",{type:"literal",value:"isiri",description:'"isiri"'},function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="isuri",t.args=[e],t},"custom:",{type:"literal",value:"custom:",description:'"custom:"'},"CUSTOM:",{type:"literal",value:"CUSTOM:",description:'"CUSTOM:"'},/^[a-zA-Z0-9_]/,{type:"class",value:"[a-zA-Z0-9_]",description:"[a-zA-Z0-9_]"},function(e,t,r){var n={};n.token="expression",n.expressionType="custom",n.name=e.join("");for(var i=[],o=0;o<t.length;o++)i.push(t[o][1]);return i.push(r),n.args=i,n},{type:"other",description:"[107] RegexExpression"},"REGEX",{type:"literal",value:"REGEX",description:'"REGEX"'},"regex",{type:"literal",value:"regex",description:'"regex"'},function(e,t,r){var n={};return n.token="expression",n.expressionType="regex",n.text=e,n.pattern=t,n.flags=r[2],n},{type:"other",description:"[108] ExistsFunc"},"EXISTS",{type:"literal",value:"EXISTS",description:'"EXISTS"'},"exists",{type:"literal",value:"exists",description:'"exists"'},function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="exists",t.args=[e],t},{type:"other",description:"[109] NotExistsFunc"},"NOT",{type:"literal",value:"NOT",description:'"NOT"'},"not",{type:"literal",value:"not",description:'"not"'},function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="notexists",t.args=[e],t},{type:"other",description:"[110] Aggregate"},"COUNT",{type:"literal",value:"COUNT",description:'"COUNT"'},"count",{type:"literal",value:"count",description:'"count"'},function(e,t){var r={};return r.token="expression",r.expressionType="aggregate",r.aggregateType="count",r.distinct=""!=e?"DISTINCT":e,r.expression=t,r},"GROUP_CONCAT",{type:"literal",value:"GROUP_CONCAT",description:'"GROUP_CONCAT"'},"group_concat",{type:"literal",value:"group_concat",description:'"group_concat"'},"SEPARATOR",{type:"literal",value:"SEPARATOR",description:'"SEPARATOR"'},function(e,t,r){var n={};return n.token="expression",n.expressionType="aggregate",n.aggregateType="group_concat",n.distinct=""!=e?"DISTINCT":e,n.expression=t,n.separator=r,n},"SUM",{type:"literal",value:"SUM",description:'"SUM"'},"sum",{type:"literal",value:"sum",description:'"sum"'},function(e,t){var r={};return r.token="expression",r.expressionType="aggregate",r.aggregateType="sum",r.distinct=""!=e?"DISTINCT":e,r.expression=t,r},"MIN",{type:"literal",value:"MIN",description:'"MIN"'},"min",{type:"literal",value:"min",description:'"min"'},function(e,t){var r={};return r.token="expression",r.expressionType="aggregate",r.aggregateType="min",r.distinct=""!=e?"DISTINCT":e,r.expression=t,r},"MAX",{type:"literal",value:"MAX",description:'"MAX"'},"max",{type:"literal",value:"max",description:'"max"'},function(e,t){var r={};return r.token="expression",r.expressionType="aggregate",r.aggregateType="max",r.distinct=""!=e?"DISTINCT":e,r.expression=t,r},"AVG",{type:"literal",value:"AVG",description:'"AVG"'},"avg",{type:"literal",value:"avg",description:'"avg"'},function(e,t){var r={};return r.token="expression",r.expressionType="aggregate",r.aggregateType="avg",r.distinct=""!=e?"DISTINCT":e,r.expression=t,r},{type:"other",description:"[117] IRIrefOrFunction"},function(e,t){var r={};return r.token="expression",r.expressionType="irireforfunction",r.iriref=e,r.args=t.value,r},{type:"other",description:"[112] RDFLiteral"},"^^",{type:"literal",value:"^^",description:'"^^"'},function(e,t){return"string"==typeof t&&t.length>0?{token:"literal",value:e.value,lang:t.slice(1),type:null}:null!=t&&"object"==typeof t?(t.shift(),{token:"literal",value:e.value,lang:null,type:t[0]}):{token:"literal",value:e.value,lang:null,type:null}},{type:"other",description:"[113] NumericLiteral"},{type:"other",description:"[114] NumericLiteralUnsigned"},{type:"other",description:"[115] NumericLiteralPositive"},{type:"other",description:"[116] NumericLiteralNegative"},{type:"other",description:"[117] BooleanLiteral"},"TRUE",{type:"literal",value:"TRUE",description:'"TRUE"'},"true",{type:"literal",value:"true",description:'"true"'},function(){var e={};return e.token="literal",e.lang=null,e.type="http://www.w3.org/2001/XMLSchema#boolean",e.value=!0,e},"FALSE",{type:"literal",value:"FALSE",description:'"FALSE"'},"false",{type:"literal",value:"false",description:'"false"'},function(){var e={};return e.token="literal",e.lang=null,e.type="http://www.w3.org/2001/XMLSchema#boolean",e.value=!1,e},{type:"other",description:"[118] String"},function(e){return{token:"string",value:e}},{type:"other",description:"[119] IRIref"},function(e){return{token:"uri",prefix:null,suffix:null,value:e}},function(e){return e},{type:"other",description:"[120] PrefixedName"},function(e){return{token:"uri",prefix:e[0],suffix:e[1],value:null}},function(e){return{token:"uri",prefix:e,suffix:"",value:null}},{type:"other",description:"[121] BlankNode"},function(e){return{token:"blank",value:e}},function(){return $++,{token:"blank",value:"_:"+$}},{type:"other",description:"[122] IRI_REF"},/^[^<>"{}|\^`\\]/,{type:"class",value:'[^<>"{}|\\^`\\\\]',description:'[^<>"{}|\\^`\\\\]'},function(e){return e.join("")},{type:"other",description:"[123] PNAME_NS"},":",{type:"literal",value:":",description:'":"'},{type:"other",description:"[124] PNAME_LN"},function(e,t){return[e,t]},{type:"other",description:"[125] BLANK_NODE_LABEL"},"_:",{type:"literal",value:"_:",description:'"_:"'},function(e){return e},{type:"other",description:"[126] VAR1"},function(e){return e},{type:"other",description:"[127] VAR2"},"$",{type:"literal",value:"$",description:'"$"'},{type:"other",description:"[128] LANGTAG"},"@",{type:"literal",value:"@",description:'"@"'},/^[a-zA-Z]/,{type:"class",value:"[a-zA-Z]",description:"[a-zA-Z]"},/^[a-zA-Z0-9]/,{type:"class",value:"[a-zA-Z0-9]",description:"[a-zA-Z0-9]"},function(e,t){return 0===t.length?("@"+e.join("")).toLowerCase():("@"+e.join("")+"-"+t[0][1].join("")).toLowerCase()},{type:"other",description:"[129] INTEGER"},/^[0-9]/,{type:"class",value:"[0-9]",description:"[0-9]"},function(e){var t={};return t.token="literal",t.lang=null,t.type="http://www.w3.org/2001/XMLSchema#integer",t.value=k(e),t},{type:"other",description:"[130] DECIMAL"},function(e,t,r){var n={};return n.token="literal",n.lang=null,n.type="http://www.w3.org/2001/XMLSchema#decimal",n.value=k([e,t,r]),n},function(e,t){var r={};return r.token="literal",r.lang=null,r.type="http://www.w3.org/2001/XMLSchema#decimal",r.value=k([e,t]),r},{type:"other",description:"[131] DOUBLE"},function(e,t,r,n){var i={};return i.token="literal",i.lang=null,i.type="http://www.w3.org/2001/XMLSchema#double",i.value=k([e,t,r,n]),i},function(e,t,r){var n={};return n.token="literal",n.lang=null,n.type="http://www.w3.org/2001/XMLSchema#double",n.value=k([e,t,r]),n},function(e,t){var r={};return r.token="literal",r.lang=null,r.type="http://www.w3.org/2001/XMLSchema#double",r.value=k([e,t]),r},{type:"other",description:"[132] INTEGER_POSITIVE"},function(e){return e.value="+"+e.value,e},{type:"other",description:"[133] DECIMAL_POSITIVE"},function(e){return e.value="+"+e.value,e},{type:"other",description:"[134] DOUBLE_POSITIVE"},{type:"other",description:"[135] INTEGER_NEGATIVE"},function(e){return e.value="-"+e.value,e},{type:"other",description:"[136] DECIMAL_NEGATIVE"},{type:"other",description:"[137] DOUBLE_NEGATIVE"},{type:"other",description:"[138] EXPONENT"},/^[eE]/,{type:"class",value:"[eE]",description:"[eE]"},/^[+\-]/,{type:"class",value:"[+\\-]",description:"[+\\-]"},function(e,t,r){return k([e,t,r])},{type:"other",description:"[139] STRING_LITERAL1"},"'",{type:"literal",value:"'",description:'"\'"'},/^[^'\\\n\r]/,{type:"class",value:"[^'\\\\\\n\\r]",description:"[^'\\\\\\n\\r]"},function(e){return k(e)},{type:"other",description:"[140] STRING_LITERAL2"},'"',{type:"literal",value:'"',description:'"\\""'},/^[^"\\\n\r]/,{type:"class",value:'[^"\\\\\\n\\r]',description:'[^"\\\\\\n\\r]'},{type:"other",description:"[141] STRING_LITERAL_LONG1"},"'''",{type:"literal",value:"'''",description:"\"'''\""},/^[^'\\]/,{type:"class",value:"[^'\\\\]",description:"[^'\\\\]"},{type:"other",description:"[142] STRING_LITERAL_LONG2"},'"""',{type:"literal",value:'"""',description:'"\\"\\"\\""'},/^[^"\\]/,{type:"class",value:'[^"\\\\]',description:'[^"\\\\]'},{type:"other",description:"[143] ECHAR"},"\\",{type:"literal",value:"\\",description:'"\\\\"'},/^[tbnrf"']/,{type:"class",value:"[tbnrf\"']",description:"[tbnrf\"']"},{type:"other",description:"[144] NIL"},function(){return{token:"triplesnodecollection",triplesContext:[],chainSubject:[{token:"uri",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}]}},{type:"other",description:"[145] WS"},/^[ ]/,{type:"class",value:"[ ]",description:"[ ]"},/^[\t]/,{type:"class",value:"[\\t]",description:"[\\t]"},/^[\r]/,{type:"class",value:"[\\r]",description:"[\\r]"},/^[\n]/,{type:"class",value:"[\\n]",description:"[\\n]"},{type:"other",description:" COMMENT"},"#",{type:"literal",value:"#",description:'"#"'},/^[^\n\r]/,{type:"class",value:"[^\\n\\r]",description:"[^\\n\\r]"},{type:"other",description:"[146] ANON"},{type:"other",description:"[147] PN_CHARS_BASE"},/^[A-Z]/,{type:"class",value:"[A-Z]",description:"[A-Z]"},/^[a-z]/,{type:"class",value:"[a-z]",description:"[a-z]"},/^[\xC0-\xD6]/,{type:"class",value:"[\\xC0-\\xD6]",description:"[\\xC0-\\xD6]"},/^[\xD8-\xF6]/,{type:"class",value:"[\\xD8-\\xF6]",description:"[\\xD8-\\xF6]"},/^[\xF8-\u02FF]/,{type:"class",value:"[\\xF8-\\u02FF]",description:"[\\xF8-\\u02FF]"},/^[\u0370-\u037D]/,{type:"class",value:"[\\u0370-\\u037D]",description:"[\\u0370-\\u037D]"},/^[\u037F-\u1FFF]/,{type:"class",value:"[\\u037F-\\u1FFF]",description:"[\\u037F-\\u1FFF]"},/^[\u200C-\u200D]/,{type:"class",value:"[\\u200C-\\u200D]",description:"[\\u200C-\\u200D]"},/^[\u2070-\u218F]/,{type:"class",value:"[\\u2070-\\u218F]",description:"[\\u2070-\\u218F]"},/^[\u2C00-\u2FEF]/,{type:"class",value:"[\\u2C00-\\u2FEF]",description:"[\\u2C00-\\u2FEF]"},/^[\u3001-\uD7FF]/,{type:"class",value:"[\\u3001-\\uD7FF]",description:"[\\u3001-\\uD7FF]"},/^[\uF900-\uFDCF]/,{type:"class",value:"[\\uF900-\\uFDCF]",description:"[\\uF900-\\uFDCF]"},/^[\uFDF0-\uFFFD]/,{type:"class",value:"[\\uFDF0-\\uFFFD]",description:"[\\uFDF0-\\uFFFD]"},/^[\u1000-\uEFFF]/,{type:"class",value:"[\\u1000-\\uEFFF]",description:"[\\u1000-\\uEFFF]"},{type:"other",description:"[148] PN_CHARS_U"},"_",{type:"literal",value:"_",description:'"_"'},{type:"other",description:"[149] VARNAME"},/^[\xB7]/,{type:"class",value:"[\\xB7]",description:"[\\xB7]"},/^[\u0300-\u036F]/,{type:"class",value:"[\\u0300-\\u036F]",description:"[\\u0300-\\u036F]"},/^[\u203F-\u2040]/,{type:"class",value:"[\\u203F-\\u2040]",description:"[\\u203F-\\u2040]"},function(e,t){return e+t.join("")},{type:"other",description:"[150] PN_CHARS"},{type:"other",description:"[151] PN_PREFIX"},function(e,t){if("."==t[t.length-1])throw Error("Wrong PN_PREFIX, cannot finish with '.'");return e+t.join("")},{type:"other",description:"[152] PN_LOCAL"},function(e,t){return e+(t||[]).join("")},{type:"other",description:"[170] PLX"},{type:"other",description:"[171] PERCENT"},"%",{type:"literal",value:"%",description:'"%"'},function(e){return e.join("")},{type:"other",description:"[172] HEX"},/^[A-F]/,{type:"class",value:"[A-F]",description:"[A-F]"},/^[a-f]/,{type:"class",value:"[a-f]",description:"[a-f]"},{type:"other",description:"[173] PN_LOCAL_ESC"},"~",{type:"literal",value:"~",description:'"~"'},"&",{type:"literal",value:"&",description:'"&"'},function(e){return"\\"+e}],d=[o("7!"),o('7"*# "7?'),o('87#9*" 3 '),o('8!7$+P$7\'*/ "7**) "7+*# "7,+4%7>+*%4#6###"! %$## "$"# ""# "9*" 3!'),o('8!7%*# " %+M$ &7,#&7"+;% &7&,#&7&"+)%4#6\'#"" %$## "$"# ""# "9*" 3$'),o('8! &7,#&7"+`$.)""2)3**) ".+""2+3,+D% &7,#&7"+2%7+(%4$6-$! %$$# "$## "$"# ""# "9*" 3('),o('8! &7,#&7"+}$./""2/30*) ".1""2132+a% &7,#&7"+O%7+E% &7,#&7"+3%7+)%4&63&"" %$&# "$%# "$$# "$## "$"# ""# "9*" 3.'),o('8!7)+$ &7,#&7"+% &7-,#&7-"+% &7,#&7"+m%71+c% &7,#&7"+Q%72+G% &7,#&7"+5%7<++%4)65)$(&$"%$)# "$(# "$\'# "$&# "$%# "$$# "$## "$"# ""# "9*" 34'),o('8!7)+>$71+4%72+*%4#67##"! %$## "$"# ""# "9*" 36'),o('8! &7,#&7"+$.9""293:*) ".;""2;3<+% &7,#&7"+%.=""2=3>*) ".?""2?3@*5 ".A""2A3B*) ".C""2C3D*# " %+% &7,#&7"+% &! &7,#&7"+?$7+5% &7,#&7"+#%\'#%$## "$"# ""# "* "! &7,#&7"+$.E""2E3F+% &7,#&7"+%7+% &7,#&7"+%.G""2G3H*) ".I""2I3J+s% &7,#&7"+a%7+W% &7,#&7"+E%.K""2K3L+5% &7,#&7"+#%\'+%$+# "$*# "$)# "$(# "$\'# "$&# "$%# "$$# "$## "$"# ""# "+$,&! &7,#&7"+?$7+5% &7,#&7"+#%\'#%$## "$"# ""# "* "! &7,#&7"+$.E""2E3F+% &7,#&7"+%7+% &7,#&7"+%.G""2G3H*) ".I""2I3J+s% &7,#&7"+a%7+W% &7,#&7"+E%.K""2K3L+5% &7,#&7"+#%\'+%$+# "$*# "$)# "$(# "$\'# "$&# "$%# "$$# "$## "$"# ""# """" "*X "! &7,#&7"+E$.M""2M3N+5% &7,#&7"+#%\'#%$## "$"# ""# "+)%4&6O&"" %$&# "$%# "$$# "$## "$"# ""# "9*" 38'),o('8! &7,#&7"+$.Q""2Q3R*) ".S""2S3T+% &7,#&7"+%7h+% &7,#&7"+u% &7-,#&7-"+c% &7,#&7"+Q%71+G% &7,#&7"+5%72++%4*6U*$&$" %$*# "$)# "$(# "$\'# "$&# "$%# "$$# "$## "$"# ""# "* "! &7,#&7"+$.Q""2Q3R*) ".S""2S3T+% &7,#&7"+% &7-,#&7-"+% &7,#&7"+%.V""2V3W*) ".X""2X3Y+% &7,#&7"+%.Z""2Z3[+% &7,#&7"+x%7S*# " %+h% &7,#&7"+V%.\\""2\\3]+F% &7,#&7"+4%72+*%4.6^.#*$ %$.# "$-# "$,# "$+# "$*# "$)# "$(# "$\'# "$&# "$%# "$$# "$## "$"# ""# "9*" 3P'),o('8!.`""2`3a+t$ &7+&$,#&7""" "*) ".M""2M3N+O% &7-,#&7-"+=%71*# " %+-%72+#%\'%%$%# "$$# "$## "$"# ""# "9*" 3_'),o('8! &7,#&7"+$.c""2c3d*) ".e""2e3f+i% &7,#&7"+W% &7-,#&7-"+E% &7,#&7"+3%71+)%4&6g&"" %$&# "$%# "$$# "$## "$"# ""# "9*" 3b'),o('8!.i""2i3j*) ".k""2k3l+\\$ &7,#&7"+J%7.*# "7/+:% &7,#&7"+(%4$6m$!!%$$# "$## "$"# ""# "9*" 3h'),o('8! &7,#&7"+2$70+(%4"6o"! %$"# ""# "9*" 3n'),o('8!.q""2q3r*) ".s""2s3t+D$ &7,#&7"+2%70+(%4#6u#! %$## "$"# ""# "9*" 3p'),o('879*" 3v'),o('8!.V""2V3W*) ".X""2X3Y*# " %+V$ &7,#&7"+D%7T+:% &7,#&7"+(%4$6x$!!%$$# "$## "$"# ""# "9*" 3w'),o('8!73*# " %+Z$75*# " %+J%77*# " %+:%79*# " %+*%4$6z$##! %$$# "$## "$"# ""# "9*" 3y'),o('8!.|""2|3}*) ".~""2~3+$ &7,#&7"+o%.""23*) ".""23+S% &7,#&7"+A% &74+&$,#&74""" "+(%4%6%! %$%# "$$# "$## "$"# ""# "9*" 3{'),o('8! &7,#&7"+D$7+:% &7,#&7"+(%4#6#!!%$## "$"# ""# "* "! &7,#&7"+D$7e+:% &7,#&7"+(%4#6#!!%$## "$"# ""# "* "! &7,#&7"+$.E""2E3F+% &7,#&7"+%7+% &7,#&7"+%!.G""2G3H*) ".I""2I3J+?$ &7,#&7"+-%7+#%\'#%$## "$"# ""# "*# " %+]% &7,#&7"+K%.K""2K3L+;% &7,#&7"+)%4)6)"%#%$)# "$(# "$\'# "$&# "$%# "$$# "$## "$"# ""# "*W "! &7,#&7"+D$7+:% &7,#&7"+(%4#6#!!%$## "$"# ""# "9*" 3'),o('8!.""23+<$ &76+&$,#&76""" "+#%\'"%$"# ""# "9*" 3'),o('87_9*" 3'),o('8!.""23*) ".""23+$ &7,#&7"+%.""23*) ".""23+e% &7,#&7"+S% &78+&$,#&78""" "+:% &7,#&7"+(%4&6&!!%$&# "$%# "$$# "$## "$"# ""# "9*" 3'),o('8!.""23*A ".""23*5 ".""23*) ".""23+W$ &7,#&7"+E%7+;% &7,#&7"+)%4$6$"#!%$$# "$## "$"# ""# "*K "!7_*# "7+:$ &7,#&7"+(%4"6"!!%$"# ""# "9*" 3'),o('8!!7:+3$7;*# " %+#%\'"%$"# ""# "*> "!7;+3$7:*# " %+#%\'"%$"# ""# "+\' 4!6!! %9*" 3'),o('8!.""23*) ".""23+V$ &7,#&7"+D%7+:% &7,#&7"+(%4$6$!!%$$# "$## "$"# ""# "9*" 3'),o('8!.""23*) ".""23+V$ &7,#&7"+D%7+:% &7,#&7"+(%4$6$!!%$$# "$## "$"# ""# "9*" 3'),o('8!.""23+$ &7,#&7"+%.Z""2Z3[+% &!.E""2E3F+L$ &7=+&$,#&7=""" "+3%.K""2K3L+#%\'#%$## "$"# ""# "*# "7,c&!.E""2E3F+L$ &7=+&$,#&7=""" "+3%.K""2K3L+#%\'#%$## "$"# ""# "*# "7"+3%.\\""2\\3]+#%\'%%$%# "$$# "$## "$"# ""# "*# " %9*" 3'),o('87*; "7*5 "7*/ "7*) ".""239*" 3'),o('8!!.""23*) ".""23+-$7a+#%\'"%$"# ""# "*# " %+\' 4!6!! %9*" 3'),o('87@9*" 3'),o('8!7$+$ &7,#&7"+%7A+%! &7,#&7"+U$.""23+E% &7,#&7"+3%7@*# " %+#%\'$%$$# "$## "$"# ""# "*# " %+*%4$6$##! %$$# "$## "$"# ""# "9*" 3'),o('87B*G "7C*A "7D*; "7E*5 "7F*/ "7G*) "7H*# "7I9*" 3'),o('8!.""23*) ".""23+$ &7,#&7"+%7+% &7,#&7"+r%!.""23*) ".""23+?$ &7,#&7"+-%7M+#%\'#%$## "$"# ""# "*# " %+)%4%6%"" %$%# "$$# "$## "$"# ""# "9*" 3'),o('8!.""23*) ".""23+x$ &7,#&7"+f%.""23*) ".""23*# " %+D% &7,#&7"+2%7N+(%4%6%! %$%# "$$# "$## "$"# ""# "9*" 3'),o('8!.""23*) ".""23+x$ &7,#&7"+f%.""23*) ".""23*# " %+D% &7,#&7"+2%7N+(%4%6%! %$%# "$$# "$## "$"# ""# "9*" 3'),o('8!.""23*) ".""23+x$ &7,#&7"+f%.""23*) ".""23*# " %+D% &7,#&7"+2%7M+(%4%6%! %$%# "$$# "$## "$"# ""# "9*" 3'),o('8!.""23*) ".""23+r$ &7,#&7"+`%.""23*) ".""23+D% &7,#&7"+2%7P+(%4%6%! %$%# "$$# "$## "$"# ""# "9*" 3'),o('8!.""23*) ".""23+`$ &7,#&7"+N%.""23*) ".""23+2%7P+(%4$6$! %$$# "$## "$"# ""# "9*" 3'),o('8!.""23*) ".""23+r$ &7,#&7"+`%.V""2V3W*) ".X""2X3Y+D% &7,#&7"+2%7T+(%4%6%! %$%# "$$# "$## "$"# ""# "9*" 3'),o('8!!.""23*) ".""23+?$ &7,#&7"+-%7+#%\'#%$## "$"# ""# "*# " %+$ &7,#&7"+%!7J+E$ &7,#&7"+3%7K*# " %+#%\'#%$## "$"# ""# "*# "7K+% &7,#&7"+% &7L,#&7L"+% &7,#&7"+u%.V""2V3W*) ".X""2X3Y+Y% &7,#&7"+G%7T+=% &7,#&7"++%4*6*$)\'%!%$*# "$)# "$(# "$\'# "$&# "$%# "$$# "$## "$"# ""# "9*" 3'),o('8!.""23*) ".""23+2$7O+(%4"6"! %$"# ""# "9*" 3'),o('8!.""23*) ".""23+2$7O+(%4"6"! %$"# ""# "9*" 3'),o('8! &7,#&7"+$.""23*) ".""23+% &7,#&7"+q%7*\\ "!.q""2q3r*) ".s""2s3t+?$ &7,#&7"+-%7+#%\'#%$## "$"# ""# "+(%4$6$! %$$# "$## "$"# ""# "9*" 3'),o('8!.""23*) ".""23+D$ &7,#&7"+2%7+(%4#6#! %$## "$"# ""# "9*" 3'),o('8!7M+\' 4!6x!! %* "!.""23*) ".""23+& 4!6! %*c "!.q""2q3r*) ".s""2s3t+& 4!6! %*@ "!.""23*) ".""23+& 4!6! %9*" 3'),o('8! &7,#&7"+$.Z""2Z3[+x% &7,#&7"+f%7Q+\\% &7,#&7"+J%.\\""2\\3]+:% &7,#&7"+(%4\'6\'!#%$\'# "$&# "$%# "$$# "$## "$"# ""# "9*" 3'),o('8! &7,#&7"+$.Z""2Z3[+x% &7,#&7"+f%7Q+\\% &7,#&7"+J%.\\""2\\3]+:% &7,#&7"+(%4\'6\'!#%$\'# "$&# "$%# "$$# "$## "$"# ""# "9*" 3'),o('8!7S*# " %+$ &!7R+I$.""23*# " %+3%7S*# " %+#%\'#%$## "$"# ""# ",T&!7R+I$.""23*# " %+3%7S*# " %+#%\'#%$## "$"# ""# ""+)%4"6""! %$"# ""# "9*" 3'),o('8! &7,#&7"+$.""23*) ".""23+% &7,#&7"+%7+% &7,#&7"+%.Z""2Z3[+% &7,#&7"+m%7S*# " %+]% &7,#&7"+K%.\\""2\\3]+;% &7,#&7"+)%4+6+"\'#%$+# "$*# "$)# "$(# "$\'# "$&# "$%# "$$# "$## "$"# ""# "9*" 3'),o('8!7j+~$! &7,#&7"+U$.""23+E% &7,#&7"+3%7S*# " %+#%\'$%$$# "$## "$"# ""# "*# " %+)%4"6""! %$"# ""# "9*" 3'),o('8!.Z""2Z3[+f$ &7,#&7"+T%7(+J% &7,#&7"+8%.\\""2\\3]+(%4%6%!"%$%# "$$# "$## "$"# ""# "*w "!.Z""2Z3[+f$ &7,#&7"+T%7U+J% &7,#&7"+8%.\\""2\\3]+(%4%6%!"%$%# "$$# "$## "$"# ""# "9*" 3'),o('8!7V*# " %+$ &7,#&7"+% &!7W+m$ &7,#&7"+[%.""23*# " %+E% &7,#&7"+3%7V*# " %+#%\'%%$%# "$$# "$## "$"# ""# ",x&!7W+m$ &7,#&7"+[%.""23*# " %+E% &7,#&7"+3%7V*# " %+#%\'%%$%# "$$# "$## "$"# ""# ""+)%4#6#"" %$## "$"# ""# "9*" 3'),o('8!7s+l$! &7,#&7"+C$.""23+3%7V*# " %+#%\'#%$## "$"# ""# "*# " %+)%4"6""! %$"# ""# "9*" 3'),o('87\\*G "7X*A "7[*; "7Y*5 "7Z*/ "7]*) "7^*# "7`9*" 3'),o('8! &7,#&7"+`$.""23*) ".""23+D% &7,#&7"+2%7T+(%4$6$! %$$# "$## "$"# ""# "9*" 3'),o('8! &7,#&7"+}$.""23*) ".""23+a% &7,#&7"+O%7+E% &7,#&7"+3%7T+)%4&6&"" %$&# "$%# "$$# "$## "$"# ""# "9*" 3'),o('8!.""23+=$7+3%7T+)%4#6#"! %$## "$"# ""# "9*" 3'),o('8!.""23*) ".""23+D$ &7,#&7"+2%7T+(%4#6#! %$## "$"# ""# "9*" 3'),o('8!7T+$ &! &7,#&7"+[$.""23*) ".""23+?% &7,#&7"+-%7T+#%\'$%$$# "$## "$"# ""# ",n&! &7,#&7"+[$.""23*) ".""23+?% &7,#&7"+-%7T+#%\'$%$$# "$## "$"# ""# ""+)%4"6""! %$"# ""# "9*" 3'),o('8! &7,#&7"+`$.""23*) ".""23+D% &7,#&7"+2%7_+(%4$6$! %$$# "$## "$"# ""# "9*" 3'),o('8! &7,#&7"+$.""23*) ".""23+% &7,#&7"+%.E""2E3F+% &7,#&7"+%7+% &7,#&7"+%.I""2I3J*) ".G""2G3H+g% &7,#&7"+U%7+K% &7,#&7"+9%.K""2K3L+)%4,6,"&"%$,# "$+# "$*# "$)# "$(# "$\'# "$&# "$%# "$$# "$## "$"# ""# "9*" 3'),o('87*) "7*# "7e9*" 3'),o('8! &7,#&7"+`$.""23*) ".""23+D% &7,#&7"+2%7a+(%4$6$! %$$# "$## "$"# ""# "9*" 3'),o('87b*# "7c9*" 3'),o('8! &7,#&7"+$7+% &7,#&7"+m%.Z""2Z3[+]% &7,#&7"+K% &7d,#&7d"+9%.\\""2\\3]+)%4\'6\'"%!%$\'# "$&# "$%# "$$# "$## "$"# ""# "9*" 3'),o('8! &7,#&7"+$7*z "!.E""2E3F+i$ &7,#&7"+W% &7,#&7"+E% &7,#&7"+3%.K""2K3L+#%\'%%$%# "$$# "$## "$"# ""# "+% &7,#&7"+%.Z""2Z3[+% &7,#&7"+% &! &7,#&7"+$.E""2E3F+{% &7,#&7"+i% &7d,#&7d"+W% &7,#&7"+E%.K""2K3L+5% &7,#&7"+#%\'\'%$\'# "$&# "$%# "$$# "$## "$"# ""# "*# "7,&! &7,#&7"+$.E""2E3F+{% &7,#&7"+i% &7d,#&7d"+W% &7,#&7"+E%.K""2K3L+5% &7,#&7"+#%\'\'%$\'# "$&# "$%# "$$# "$## "$"# ""# "*# "7"+K% &7,#&7"+9%.\\""2\\3]+)%4(6("&"%$(# "$\'# "$&# "$%# "$$# "$## "$"# ""# "9*" 3'),o('8! &7,#&7"+b$7*; "7*5 "7*/ "7*) ".""23+:% &7,#&7"+(%4#6#!!%$## "$"# ""# "9*" 3'),o('8!7+3$7f+)%4"6""! %$"# ""# "9*" 3'),o('8!7+& 4!6! %* "!.E""2E3F+$.=""2=3>*) ".?""2?3@*# " %+%7+% &!.""23+-$7+#%\'"%$"# ""# ",>&!.""23+-$7+#%\'"%$"# ""# ""+:%.K""2K3L+*%4%6%##"!%$%# "$$# "$## "$"# ""# "9*" 3'),o('8!7+& 4!6! %* "!.E""2E3F+$7*# "7+% &!.""23+3$7*# "7+#%\'"%$"# ""# ",D&!.""23+3$7*# "7+#%\'"%$"# ""# ""+9%.K""2K3L+)%4$6$""!%$$# "$## "$"# ""# "9*" 3'),o('8!.Z""2Z3[+l$ &7,#&7"+Z%7i*# " %+J% &7,#&7"+8%.\\""2\\3]+(%4%6%!"%$%# "$$# "$## "$"# ""# "9*" 3'),o('8!7j+~$! &7,#&7"+U$.""23+E% &7,#&7"+3%7i*# " %+#%\'$%$$# "$## "$"# ""# "*# " %+)%4"6""! %$"# ""# "9*" 3'),o('8! &7,#&7"+O$7+E% &7,#&7"+3%7l+)%4$6$"" %$$# "$## "$"# ""# "*b "! &7,#&7"+O$7+E% &7,#&7"+3%7m+)%4$6$"" %$$# "$## "$"# ""# "9*" 3'),o('8!7v*# "7w+$ &7,#&7"+%7n+% &! &7,#&7"+$.""23+r% &7,#&7"+`%!7v*# "7w+?$ &7,#&7"+-%7o+#%\'#%$## "$"# ""# "*# " %+#%\'$%$$# "$## "$"# ""# ",&! &7,#&7"+$.""23+r% &7,#&7"+`%!7v*# "7w+?$ &7,#&7"+-%7o+#%\'#%$## "$"# ""# "*# " %+#%\'$%$$# "$## "$"# ""# ""+*%4$6$##! %$$# "$## "$"# ""# "9*" 3'),o('8!7r+$ &7,#&7"+%7o+% &! &7,#&7"+|$.""23+l% &7,#&7"+Z%!7r+?$ &7,#&7"+-%7o+#%\'#%$## "$"# ""# "*# " %+#%\'$%$$# "$## "$"# ""# ",&! &7,#&7"+|$.""23+l% &7,#&7"+Z%!7r+?$ &7,#&7"+-%7o+#%\'#%$## "$"# ""# "*# " %+#%\'$%$$# "$## "$"# ""# ""+*%4$6$##! %$$# "$## "$"# ""# "9*" 3'),o('87l*# " %9*" 3'),o('8!7p+$ &7,#&7"+% &!.""23+?$ &7,#&7"+-%7p+#%\'#%$## "$"# ""# ",P&!.""23+?$ &7,#&7"+-%7p+#%\'#%$## "$"# ""# ""+)%4#6#"" %$## "$"# ""# "9*" 3'),o('8!7q+$ &7,#&7"+% &!.""23+?$ &7,#&7"+-%7q+#%\'#%$## "$"# ""# ",P&!.""23+?$ &7,#&7"+-%7q+#%\'#%$## "$"# ""# ""+)%4#6#"" %$## "$"# ""# "9*" 3'),o('879*" 3'),o('879*" 3'),o('87*4 "!.""23+& 4!6! %9*" 3'),o('8! &7,#&7"+O$7+E% &7,#&7"+3%7t+)%4$6$"" %$$# "$## "$"# ""# "*b "! &7,#&7"+O$7+E% &7,#&7"+3%7u+)%4$6$"" %$$# "$## "$"# ""# "9*" 3'),o('8!7v*# "7w+$ &7,#&7"+%7n+% &! &7,#&7"+p$.""23+`% &7,#&7"+N%!7v*# "7w+-$7o+#%\'"%$"# ""# "*# " %+#%\'$%$$# "$## "$"# ""# ",&! &7,#&7"+p$.""23+`% &7,#&7"+N%!7v*# "7w+-$7o+#%\'"%$"# ""# "*# " %+#%\'$%$$# "$## "$"# ""# ""+*%4$6$##! %$$# "$## "$"# ""# "9*" 3'),o('87k*# " %9*" 3'),o("8!7x+' 4!6!! %9*\" 3"),o('879*" 3'),o('87y9*" 3'),o('8!7z+q$ &!.""23+-$7z+#%\'"%$"# ""# ",>&!.""23+-$7z+#%\'"%$"# ""# ""+)%4"6""! %$"# ""# "9*" 3'),o('8!7|+q$ &!.""23+-$7|+#%\'"%$"# ""# ",>&!.""23+-$7|+#%\'"%$"# ""# ""+)%4"6""! %$"# ""# "9*" 3'),o('8!7~+9$7}*# " %+)%4"6""! %$"# ""# "9*" 3'),o('87{*C "!.""23+2$7{+(%4"6"! %$"# ""# "9*" 3'),o('8.M""2M3N* ".""23* ".""23* "!.Z""2Z3[+$!7+{$!.""23+T$.\\""2\\3]*> "!7+3$.\\""2\\3]+#%\'"%$"# ""# "+#%\'"%$"# ""# "*) ".\\""2\\3]+#%\'"%$"# ""# "*N "!.""23+=$7+3%.\\""2\\3]+#%\'#%$## "$"# ""# "+#%\'"%$"# ""# "9*" 3'),o('87* "!.""23+& 4!6! %*t "!.""23+-$7+#%\'"%$"# ""# "*S "!.E""2E3F+B$7x+8%.K""2K3L+(%4#6#!!%$## "$"# ""# "9*" 3'),o('7* "!.E""2E3F+$!7+k$ &!.""23+-$7+#%\'"%$"# ""# ",>&!.""23+-$7+#%\'"%$"# ""# ""+#%\'"%$"# ""# "*# " %+3%.K""2K3L+#%\'#%$## "$"# ""# "'),o('87*V ".""23*J "!.""23+9$7*) ".""23+#%\'"%$"# ""# "9*" 3'),o('879*" 3'),o('8!7+\' 4!6!! %*# "79*" 3'),o('8!7+\' 4!6!! %*# "79*" 3'),o('8! &7,#&7"+v$.""23+f% &7,#&7"+T%7t+J%.""23+:% &7,#&7"+(%4&6&!"%$&# "$%# "$$# "$## "$"# ""# "9*" 3'),o('8! &7,#&7"+$.""23+x% &7,#&7"+f%7l+\\% &7,#&7"+J%.""23+:% &7,#&7"+(%4\'6\'!#%$\'# "$&# "$%# "$$# "$## "$"# ""# "9*" 3'),o('8! &7,#&7"+$.E""2E3F+% &7,#&7"+u% &7+&$,#&7""" "+\\% &7,#&7"+J%.K""2K3L+:% &7,#&7"+(%4\'6\'!#%$\'# "$&# "$%# "$$# "$## "$"# ""# "9*" 3'),o('8! &7,#&7"+$.E""2E3F+% &7,#&7"+u% &7+&$,#&7""" "+\\% &7,#&7"+J%.K""2K3L+:% &7,#&7"+(%4\'6\'!#%$\'# "$&# "$%# "$$# "$## "$"# ""# "9*" 3'),o('8!! &7,#&7"+?$7+5% &7,#&7"+#%\'#%$## "$"# ""# "*R "! &7,#&7"+?$7+5% &7,#&7"+#%\'#%$## "$"# ""# "+\' 4!6!! %9*" 3'),o('8!! &7,#&7"+?$7+5% &7,#&7"+#%\'#%$## "$"# ""# "*R "! &7,#&7"+?$7+5% &7,#&7"+#%\'#%$## "$"# ""# "+\' 4!6!! %9*" 3'),o('87*# "79*" 3'),o('87*# "79*" 3'),o('8! &7,#&7"+J$7*# "7+:% &7,#&7"+(%4#6#!!%$## "$"# ""# "9*" 3'),o('87*; "7*5 "7*/ "7*) "7*# "79*" 3'),o('879*" 3'),o('8!7+$ &! &7,#&7"+O$.""23+?% &7,#&7"+-%7+#%\'$%$$# "$## "$"# ""# ",b&! &7,#&7"+O$.""23+?% &7,#&7"+-%7+#%\'$%$$# "$## "$"# ""# ""+)%4"6""! %$"# ""# "9*" 3'),o('8!7+$ &! &7,#&7"+O$.""23+?% &7,#&7"+-%7+#%\'$%$$# "$## "$"# ""# ",b&! &7,#&7"+O$.""23+?% &7,#&7"+-%7+#%\'$%$$# "$## "$"# ""# ""+)%4"6""! %$"# ""# "9*" 3'),o('879*" 3'),o('8!7+$ &! &7,#&7"+O$.""23+?% &7,#&7"+-%7+#%\'$%$$# "$## "$"# ""# "* "! &7,#&7"+O$.""23+?% &7,#&7"+-%7+#%\'$%$$# "$## "$"# ""# "* "! &7,#&7"+O$.""23+?% &7,#&7"+-%7+#%\'$%$$# "$## "$"# ""# "* "! &7,#&7"+O$.""23+?% &7,#&7"+-%7+#%\'$%$$# "$## "$"# ""# "* "! &7,#&7"+O$.""23+?% &7,#&7"+-%7+#%\'$%$$# "$## "$"# ""# "* "! &7,#&7"+O$.""23+?% &7,#&7"+-%7+#%\'$%$$# "$## "$"# ""# "* "! &7,#&7"+w$.""23*) ".""23+[%.""23*) ".""23+?% &7,#&7"+-%7g+#%\'%%$%# "$$# "$## "$"# ""# "* "! &7,#&7"+$.""23*) ".""23+%.""23*) ".""23+%.""23*) ".""23+% &7,#&7"+w%.""23*) ".""23+[%.""23*) ".""23+?% &7,#&7"+-%7g+#%\')%$)# "$(# "$\'# "$&# "$%# "$$# "$## "$"# ""# ",&! &7,#&7"+O$.""23+?% &7,#&7"+-%7+#%\'$%$$# "$## "$"# ""# "* "! &7,#&7"+O$.""23+?% &7,#&7"+-%7+#%\'$%$$# "$## "$"# ""# "* "! &7,#&7"+O$.""23+?% &7,#&7"+-%7+#%\'$%$$# "$## "$"# ""# "* "! &7,#&7"+O$.""23+?% &7,#&7"+-%7+#%\'$%$$# "$## "$"# ""# "* "! &7,#&7"+O$.""23+?% &7,#&7"+-%7+#%\'$%$$# "$## "$"# ""# "* "! &7,#&7"+O$.""23+?% &7,#&7"+-%7+#%\'$%$$# "$## "$"# ""# "* "! &7,#&7"+w$.""23*) ".""23+[%.""23*) ".""23+?% &7,#&7"+-%7g+#%\'%%$%# "$$# "$## "$"# ""# "* "! &7,#&7"+$.""23*) ".""23+%.""23*) ".""23+%.""23*) ".""23+% &7,#&7"+w%.""23*) ".""23+[%.""23*) ".""23+?% &7,#&7"+-%7g+#%\')%$)# "$(# "$\'# "$&# "$%# "$$# "$## "$"# ""# ""+)%4"6""! %$"# ""# "9*" 3'),o('879*" 3'),o('8!7+$ &! &7,#&7"+O$.""23+?% &7,#&7"+-%7+#%\'$%$$# "$## "$"# ""# "* "! &7,#&7"+O$.""23+?% &7,#&7"+-%7+#%\'$%$$# "$## "$"# ""# "* "!7*# "7+$! &7,#&7"+O$.M""2M3N+?% &7,#&7"+-%7+#%\'$%$$# "$## "$"# ""# "*b "! &7,#&7"+O$.""23+?% &7,#&7"+-%7+#%\'$%$$# "$## "$"# ""# "*# " %+#%\'"%$"# ""# ",&! &7,#&7"+O$.""23+?% &7,#&7"+-%7+#%\'$%$$# "$## "$"# ""# "* "! &7,#&7"+O$.""23+?% &7,#&7"+-%7+#%\'$%$$# "$## "$"# ""# "* "!7*# "7+$! &7,#&7"+O$.M""2M3N+?% &7,#&7"+-%7+#%\'$%$$# "$## "$"# ""# "*b "! &7,#&7"+O$.""23+?% &7,#&7"+-%7+#%\'$%$$# "$## "$"# ""# "*# " %+#%\'"%$"# ""# ""+)%4"6""! %$"# ""# "9*" 3'),o('8!7+$ &! &7,#&7"+O$.M""2M3N+?% &7,#&7"+-%7+#%\'$%$$# "$## "$"# ""# "*b "! &7,#&7"+O$.""23+?% &7,#&7"+-%7+#%\'$%$$# "$## "$"# ""# ",&! &7,#&7"+O$.M""2M3N+?% &7,#&7"+-%7+#%\'$%$$# "$## "$"# ""# "*b "! &7,#&7"+O$.""23+?% &7,#&7"+-%7+#%\'$%$$# "$## "$"# ""# ""+)%4"6""! %$"# ""# "9*" 3'),o('8!.""23+D$ &7,#&7"+2%7+(%4#6#! %$## "$"# ""# "* "!.""23+D$ &7,#&7"+2%7+(%4#6#! %$## "$"# ""# "*[ "!.""23+D$ &7,#&7"+2%7+(%4#6#! %$## "$"# ""# "*# "79*" 3'),o('87*w "7*q "7*k "!7+\' 4!6!! %*Y "!7+\' 4!6!! %*G "!7+\' 4!6!! %*5 "7*/ "!7+\' 4!6!! %9*" 3'),o('8!.E""2E3F+f$ &7,#&7"+T%7+J% &7,#&7"+8%.K""2K3L+(%4%6%!"%$%# "$$# "$## "$"# ""# "9*" 3'),o('8!.""23*) ".""23+$ &7,#&7"+v%.E""2E3F+f% &7,#&7"+T%7+J% &7,#&7"+8%.K""2K3L+(%4\'6\'!"%$\'# "$&# "$%# "$$# "$## "$"# ""# "* "!.""23*) ".""23+$ &7,#&7"+v%.E""2E3F+f% &7,#&7"+T%7+J% &7,#&7"+8%.K""2K3L+(%4\'6\'!"%$\'# "$&# "$%# "$$# "$## "$"# ""# "* "!.""23*) ".""23+$ &7,#&7"+%.E""2E3F+% &7,#&7"+%7+% &7,#&7"+w%.""23+g% &7,#&7"+U%7+K% &7,#&7"+9%.K""2K3L+)%4+6+"&"%$+# "$*# "$)# "$(# "$\'# "$&# "$%# "$$# "$## "$"# ""# "* "!.""23*) ".""23+$ &7,#&7"+v%.E""2E3F+f% &7,#&7"+T%7+J% &7,#&7"+8%.K""2K3L+(%4\'6\'!"%$\'# "$&# "$%# "$$# "$## "$"# ""# "* "!.""23*) ".""23+$ &7,#&7"+v%.E""2E3F+f% &7,#&7"+T%7+J% &7,#&7"+8%.K""2K3L+(%4\'6\'!"%$\'# "$&# "$%# "$$# "$## "$"# ""# "* "!.""23*) ".""23+$ &7,#&7"+v%.E""2E3F+f% &7,#&7"+T%7+J% &7,#&7"+8%.K""2K3L+(%4\'6\'!"%$\'# "$&# "$%# "$$# "$## "$"# ""# "* "!.""23*) ".""23+$ &7,#&7"+v%.E""2E3F+f% &7,#&7"+T%7+J% &7,#&7"+8%.K""2K3L+(%4\'6\'!"%$\'# "$&# "$%# "$$# "$## "$"# ""# "* "!.""23*) ".""23+$ &7,#&7"+%!.E""2E3F+a$ &7,#&7"+O%7+E% &7,#&7"+3%.K""2K3L+#%\'%%$%# "$$# "$## "$"# ""# "*# "7+(%4#6#! %$## "$"# ""# "* "!.""23*) ".""23+D$ &7,#&7"+2%7g+(%4#6#! %$## "$"# ""# "* "!.""23*) ".""23+$ &7,#&7"+%.E""2E3F+% &7,#&7"+%7+% &7,#&7"+%.""23+% &7,#&7"+%7+% &7,#&7"+x%.""23+h% &7,#&7"+V%7+L% &7,#&7"+:%.K""2K3L+*%4/6/#*&"%$/# "$.# "$-# "$,# "$+# "$*# "$)# "$(# "$\'# "$&# "$%# "$$# "$## "$"# ""# "* "!.""23*) ".""23+$ &7,#&7"+v%.E""2E3F+f% &7,#&7"+T%7+J% &7,#&7"+8%.K""2K3L+(%4\'6\'!"%$\'# "$&# "$%# "$$# "$## "$"# ""# "* "!.""23*) ".""23+$ &7,#&7"+v%.E""2E3F+f% &7,#&7"+T%7+J% &7,#&7"+8%.K""2K3L+(%4\'6\'!"%$\'# "$&# "$%# "$$# "$## "$"# ""# "* "!.""23*) ".""23+$ &7,#&7"+%.E""2E3F+% &7,#&7"+%7+% &7,#&7"+w%.""23+g% &7,#&7"+U%7+K% &7,#&7"+9%.K""2K3L+)%4+6+"&"%$+# "$*# "$)# "$(# "$\'# "$&# "$%# "$$# "$## "$"# ""# "* "!.""23*A ".""23*5 ".""23*) ".""23+$ &7,#&7"+v%.E""2E3F+f% &7,#&7"+T%7+J% &7,#&7"+8%.K""2K3L+(%4\'6\'!"%$\'# "$&# "$%# "$$# "$## "$"# ""# "* "!.""23*) ".""23+$ &0""1!3+,$,)&0""1!3""" "+% &7,#&7"+%.E""2E3F+% &! &7,#&7"+=$7+3%.""23+#%\'#%$## "$"# ""# ",P&! &7,#&7"+=$7+3%.""23+#%\'#%$## "$"# ""# ""+h% &7,#&7"+V%7+L% &7,#&7"+:%.K""2K3L+*%4)6)#\'$"%$)# "$(# "$\'# "$&# "$%# "$$# "$## "$"# ""# "*/ "7*) "7*# "79*" 3'),o('8!.""23*) ".""23+$ &7,#&7"+%.E""2E3F+% &7,#&7"+%7+% &7,#&7"+%.""23+% &7,#&7"+%7+% &7,#&7"+%!.""23+?$ &7,#&7"+-%7+#%\'#%$## "$"# ""# "*# " %+L% &7,#&7"+:%.K""2K3L+*%4-6-#($"%$-# "$,# "$+# "$*# "$)# "$(# "$\'# "$&# "$%# "$$# "$## "$"# ""# "9*" 3'),o('8!.""23*) ".""23+D$ &7,#&7"+2%7T+(%4#6#! %$## "$"# ""# "9*" 3'),o('8!.""23*) ".""23+r$ &7,#&7"+`%.""23*) ".""23+D% &7,#&7"+2%7T+(%4%6%! %$%# "$$# "$## "$"# ""# "9*" 3'),o('8!.""23*) ".""23+$ &7,#&7"+%.E""2E3F+% &7,#&7"+%.=""2=3>*) ".?""2?3@*# " %+% &7,#&7"+s%.M""2M3N*# "7+]% &7,#&7"+K%.K""2K3L+;% &7,#&7"+)%4*6*"%#%$*# "$)# "$(# "$\'# "$&# "$%# "$$# "$## "$"# ""# "* "!.""23*) ".""23+$ &7,#&7"+%.E""2E3F+% &7,#&7"+%.=""2=3>*) ".?""2?3@*# " %+% &7,#&7"+%7+%!.""23+$ &7,#&7"+%.""23+s% &7,#&7"+a%.""23+Q% &7,#&7"+?%7+5% &7,#&7"+#%\'(%$(# "$\'# "$&# "$%# "$$# "$## "$"# ""# "*# " %+L%.K""2K3L+<% &7,#&7"+*%4*6*#%#"%$*# "$)# "$(# "$\'# "$&# "$%# "$$# "$## "$"# ""# "* "!.""23*) ".""23+$ &7,#&7"+%.E""2E3F+% &7,#&7"+%.=""2=3>*) ".?""2?3@*# " %+y% &7,#&7"+g%7+]% &7,#&7"+K%.K""2K3L+;% &7,#&7"+)%4*6*"%#%$*# "$)# "$(# "$\'# "$&# "$%# "$$# "$## "$"# ""# "* "!.""23*) ".""23+$ &7,#&7"+%.E""2E3F+% &7,#&7"+%.=""2=3>*) ".?""2?3@*# " %+y% &7,#&7"+g%7+]% &7,#&7"+K%.K""2K3L+;% &7,#&7"+)%4*6*"%#%$*# "$)# "$(# "$\'# "$&# "$%# "$$# "$## "$"# ""# "* "!.""23*) ".""23+$ &7,#&7"+%.E""2E3F+% &7,#&7"+%.=""2=3>*) ".?""2?3@*# " %+y% &7,#&7"+g%7+]% &7,#&7"+K%.K""2K3L+;% &7,#&7"+)%4*6*"%#%$*# "$)# "$(# "$\'# "$&# "$%# "$$# "$## "$"# ""# "* "!.""23*) ".""23+$ &7,#&7"+%.E""2E3F+% &7,#&7"+%.=""2=3>*) ".?""2?3@*# " %+y% &7,#&7"+g%7+]% &7,#&7"+K%.K""2K3L+;% &7,#&7"+)%4*6*"%#%$*# "$)# "$(# "$\'# "$&# "$%# "$$# "$## "$"# ""# "9*" 3'),o('8!7+9$7f*# " %+)%4"6""! %$"# ""# "9*" 3'),o('8!7+Z$7*> "!.""23+-$7+#%\'"%$"# ""# "*# " %+)%4"6""! %$"# ""# "9*" 3'),o('87*) "7*# "79*" 3'),o('87*) "7*# "79*" 3'),o('87*) "7*# "79*" 3'),o('87*) "7*# "79*" 3'),o('8!.""23*) ".""23+& 4!6! %*@ "!.""23*) ".""23+& 4!6! %9*" 3'),o("8!7+' 4!6!! %*S \"!7+' 4!6!! %*A \"!7+' 4!6!! %*/ \"!7+' 4!6!! %9*\" 3"),o("8!7+' 4!6!! %*/ \"!7+' 4!6!! %9*\" 3"),o("8!7+' 4!6!! %*/ \"!7+' 4!6!! %9*\" 3"),o('8!7+\' 4!6!! %*. "!7+& 4!6! %9*" 3'),o('8!.""23+V$ &0""1!3,)&0""1!3"+8%.""23+(%4#6#!!%$## "$"# ""# "9*" 3'),o('8!7*# " %+8$.""23+(%4"6"!!%$"# ""# "9*" 3'),o('8!7+3$7+)%4"6""! %$"# ""# "9*" 3'),o('8!.""23+2$7+(%4"6"! %$"# ""# "9*" 3'),o('8!.""23+2$7+(%4"6"! %$"# ""# "9*" 3'),o('8!.""23+2$7+(%4"6"! %$"# ""# "9*" 3'),o('8!.""23+$ &0""1!3+,$,)&0""1!3""" "+% &!.""23+H$ &0""1!3+,$,)&0""1!3""" "+#%\'"%$"# ""# ",Y&!.""23+H$ &0""1!3+,$,)&0""1!3""" "+#%\'"%$"# ""# ""+)%4#6#"! %$## "$"# ""# "9*" 3'),o('8! &0""1!3+,$,)&0""1!3""" "+\' 4!6!! %9*" 3'),o('8! &0""1!3+,$,)&0""1!3""" "+X$.""23+H% &0""1!3,)&0""1!3"+*%4#6##"! %$## "$"# ""# "*_ "!.""23+N$ &0""1!3+,$,)&0""1!3""" "+)%4"6""! %$"# ""# "9*" 3'),o('8! &0""1!3+,$,)&0""1!3""" "+c$.""23+S% &0""1!3,)&0""1!3"+5%7++%4$6$$#"! %$$# "$## "$"# ""# "* "!.""23+Y$ &0""1!3+,$,)&0""1!3""" "+4%7+*%4#6##"! %$## "$"# ""# "*Y "! &0""1!3+,$,)&0""1!3""" "+3$7+)%4"6""! %$"# ""# "9*" 3'),o('8!.""23+2$7+(%4"6"! %$"# ""# "9*" 3'),o('8!.""23+2$7+(%4"6"! %$"# ""# "9*" 3'),o('8!.""23+2$7+(%4"6"! %$"# ""# "9*" 3'),o('8!.""23+2$7+(%4"6"! %$"# ""# "9*" 3'),o('8!.""23+2$7+(%4"6"! %$"# ""# "9*" 3'),o('8!.""23+2$7+(%4"6"! %$"# ""# "9*" 3'),o('8!0""1!3+e$0""1!3*# " %+O% &0""1!3+,$,)&0""1!3""" "+*%4#6##"! %$## "$"# ""# "9*" 3'),o('8!.""23+b$ &0""1!3*# "7,/&0""1!3*# "7"+8%.""23+(%4#6#!!%$## "$"# ""# "9*" 3'),o('8!.""23+b$ &0""1!3*# "7,/&0""1!3*# "7"+8%.""23+(%4#6#!!%$## "$"# ""# "9*" 3'),o('8!.""23+b$ &0""1!3*# "7,/&0""1!3*# "7"+8%.""23+(%4#6#!!%$## "$"# ""# "9*" 3'),o('8!.""23+b$ &0""1!3*# "7,/&0""1!3*# "7"+8%.""23+(%4#6#!!%$## "$"# ""# "9*" 3'),o('8!.""23+3$0""1!3+#%\'"%$"# ""# "9*" 3'),o('8!.E""2E3F+I$ &7,#&7"+7%.K""2K3L+\'%4#6# %$## "$"# ""# "9*" 3'),o('80""1!3*G "0""1!3*; "0""1!3*/ "0""1!3*# "79*" 3'),o('8!.""23+A$ &0""1!3,)&0""1!3"+#%\'"%$"# ""# "9*" 3'),o('8!.""23+E$ &7,#&7"+3%.""23+#%\'#%$## "$"# ""# "9*" 3'),o('80""1!3* "0""1!3* "0""1!3* "0""1!3* "0""1!3* "0""1!3*} "0""1!3*q "0""1!3*e "0""1!3*Y "0""1!3*M "0""1!3*A "0""1!3*5 "0""1!3*) "0""1!39*" 3'),o('87*) ".""239*" 3'),o('8!7*) "0""1!3+$ &7*M "0""1!3*A "0""1!3*5 "0""1!3*) "0""1!3,S&7*M "0""1!3*A "0""1!3*5 "0""1!3*) "0""1!3"+)%4"6""! %$"# ""# "9*" 3'),o('87*Y ".""23*M "0""1!3*A "0""1!3*5 "0""1!3*) "0""1!39*" 3'),o('8!7+S$ &7*) ".""23,/&7*) ".""23"+)%4"6""! %$"# ""# "9*" 3'),o('8!7*; "0""1!3*/ ".""23*# "7+w$ &7*; ".""23*/ ".""23*# "7,A&7*; ".""23*/ ".""23*# "7"+)%4"6""! %$"# ""# "9*" 3'),o('87*# "79*" 3'),o('8!!.""23+7$7+-%7+#%\'#%$## "$"# ""# "+\' 4!6!! %9*" 3'),o('80""1!3*5 "0""1!3*) "0""1!39*" 3'),o('8!.""23+$.""23* ".""23* ".""23* ".""23* ".""23* ".""23* ".""23* ".""23* ".E""2E3F* ".K""2K3L* ".M""2M3N* ".""23* ".""23*} ".""23*q ".""23*e ".""23*Y ".""23*M ".""23*A ".""23*5 ".""23*) ".""23+(%4"6"! %$"# ""# "9*" 3')],h=0,v=0,g=0,y={line:1,column:1,seenCR:!1},b=0,m=[],x=0;
if("startRule"in l){if(!(l.startRule in c))throw Error("Can't start parsing from rule \""+l.startRule+'".');p=c[l.startRule]}var k=function(e){for(var t="",r=0;r<e.length;r++)t+="string"==typeof e[r]?e[r]:e[r].join("");return t},$=0,w={},_=function(e,t){w[e]=t},E=function(e){w[null]=e},I=function(e){var t="";if(null==e)return null;for(var r=0;r<e.length;r++)t+=e[r];return t.toUpperCase()};if(s=a(p),s!==u&&h===e.length)return s;throw s!==u&&h<e.length&&n({type:"end",description:"end of input"}),i(null,m,b)}return e(t,Error),{SyntaxError:t,parse:r}}()},{}],45:[function(e,t){var r=(e("./btree").Tree,e("./utils")),n=r,i=e("./lexicon").Lexicon,o=function(e,t){var n=this;r.registerIndexedDB(n),this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,n.dbName=t||"rdfstorejs";var i=n.indexedDB.open(this.dbName+"_lexicon",1);i.onerror=function(t){e(null,Error("Error opening IndexedDB: "+t.target.errorCode))},i.onsuccess=function(t){n.db=t.target.result,e(n)},i.onupgradeneeded=function(e){n.db=e.target.result;var t=n.db.createObjectStore("knownGraphs",{keyPath:"oid"});t.createIndex("uriToken","uriToken",{unique:!0});var r=n.db.createObjectStore("uris",{keyPath:"id",autoIncrement:!0});r.createIndex("uri","uri",{unique:!0});var i=n.db.createObjectStore("blanks",{keyPath:"id",autoIncrement:!0});i.createIndex("label","label",{unique:!0});var o=n.db.createObjectStore("literals",{keyPath:"id",autoIncrement:!0});o.createIndex("literal","literal",{unique:!0})}};o.prototype.registerGraph=function(e,t,r){if(e!=this.defaultGraphOid){var n=this.db.transaction(["knownGraphs"],"readwrite");n.onerror=function(e){r(null,Error(e.target.statusCode))};var i=n.objectStore("knownGraphs"),o=i.add({oid:e,uriToken:t});o.onsuccess=function(){r(!0)}}else r()},o.prototype.registeredGraphs=function(e,t){var r=[],n=this.db.transaction(["knownGraphs"],"readwrite").objectStore("knownGraphs"),i=n.openCursor();i.onsuccess=function(n){var i=n.target.result;i?(r.push(e===!0?i.value.uriToken:i.value.oid),i.continue()):t(r)},i.onerror=function(e){t(null,Error("Error retrieving data from the cursor: "+e.target.errorCode))}},o.prototype.registerUri=function(e,t){var r=this;if(e===this.defaultGraphUri)t(this.defaultGraphOid);else{var n=r.db.transaction(["uris"],"readwrite").objectStore("uris"),i=n.index("uri").get(e);i.onsuccess=function(r){var i=r.target.result;if(i){i.counter++;var o=i.id,a=n.put(i);a.onsuccess=function(){t(o)},a.onerror=function(e){t(null,Error("Error updating the URI data"+e.target.errorCode))}}else{var s=n.add({uri:e,counter:0});s.onsuccess=function(e){t(e.target.result)},s.onerror=function(e){t(null,Error("Error inserting the URI data"+e.target.errorCode))}}},i.onerror=function(e){t(null,Error("Error retrieving the URI data"+e.target.errorCode))}}},o.prototype.resolveUri=function(e,t){if(e===this.defaultGraphUri)t(this.defaultGraphOid);else{var r=this.db.transaction(["uris"]).objectStore("uris"),n=r.index("uri").get(e);n.onsuccess=function(e){t(null!=e.target.result?e.target.result.id:-1)},n.onerror=function(e){t(null,Error("Error retrieving uri data "+e.target.errorCode))}}},o.prototype.resolveUriCost=function(e,t){if(e===this.defaultGraphUri)t(0);else{var r=that.db.transaction(["uris"]).objectStore("uris"),n=r.index("uri").get(e);n.onsuccess=function(e){t(null!=e.target.result?e.target.result.cost:-1)},n.onerror=function(e){t(null,Error("Error retrieving uri data "+e.target.errorCode))}}},o.prototype.registerBlank=function(e){var t=guid(),r=this,n=r.db.transaction(["blanks"],"readwrite").objectStore("blanks"),i=n.add({label:t,counter:0});i.onsuccess=function(t){e(t.target.result)},i.onerror=function(t){e(null,Error("Error inserting the URI data"+t.target.errorCode))}},o.prototype.resolveBlankCost=function(e,t){t(0)},o.prototype.registerLiteral=function(e,t){var r=this,n=r.db.transaction(["literals"],"readwrite").objectStore("literals"),i=n.index("literal").get(e);i.onsuccess=function(r){var i=r.target.result;if(i){i.counter++;var o=i.id,a=n.put(i);a.onsuccess=function(){t(o)},a.onerror=function(e){t(null,Error("Error updating the literal data"+e.target.errorCode))}}else{var s=n.add({literal:e,counter:0});s.onsuccess=function(e){t(e.target.result)},s.onerror=function(e){t(null,Error("Error inserting the literal data"+e.target.errorCode))}}},i.onerror=function(e){t(null,Error("Error retrieving the literal data"+e.target.errorCode))}},o.prototype.resolveLiteral=function(e,t){var r=that.db.transaction(["literals"]).objectStore("literals"),n=r.index("literal").get(e);n.onsuccess=function(e){t(null!=e.target.result?e.target.result.id:-1)},n.onerror=function(e){t(null,Error("Error retrieving literal data "+e.target.errorCode))}},o.prototype.resolveLiteralCost=function(e,t){var r=that.db.transaction(["literals"]).objectStore("literals"),n=r.index("literal").get(e);n.onsuccess=function(e){t(null!=e.target.result?e.target.result.cost:-1)},n.onerror=function(e){t(null,Error("Error retrieving literal data "+e.target.errorCode))}},o.prototype.parseLiteral=function(e){return i.prototype.parseLiteral(e)},o.prototype.parseUri=function(e){return i.prototype.parseUri(e)},o.prototype.retrieve=function(e,t){var r=this;if(e===this.defaultGraphOid)t({token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0});else{var i=r.db.transaction(["uris","literals","blanks"]);n.seq(function(t,n){var o=i.objectStore("uris").get(e);o.onsuccess=function(e){null!=e.target.result?n(null,r.parseUri(e.target.result.uri)):n(null,null)},o.onerror=function(e){n(Error("Error searching in URIs data "+e.target.errorCode))}},function(t,n){if(null==t){var o=i.objectStore("literals").get(e);o.onsuccess=function(e){null!=e.target.result?n(null,r.parseLiteral(e.target.result.literal)):n(null,null)},o.onerror=function(e){n(Error("Error searching in Literals data "+e.target.errorCode))}}else n(null,t)},function(t,n){if(null==t){var o=i.objectStore("blanks").get(e);o.onsuccess=function(e){if(null!=e.target.result){var t="_:"+e.target.result.id;n(null,r.parseLiteral({token:"blank",value:t}))}else n(null,null)},o.onerror=function(e){n(Error("Error searching in blanks data "+e.target.errorCode))}}else n(null,t)})(null,function(e,r){e?t(null,e):t(r)})}},o.prototype.clear=function(e){var t=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri};var r,i=t.db.transaction(["uris","literals","blanks"],"readwrite");n.seq(function(e){r=i.objectStore("uris").clear(),r.onsuccess=function(){e()},r.onerror=function(){e()}},function(e){r=i.objectStore("literals").clear(),r.onsuccess=function(){e()},r.onerror=function(){e()}},function(e){r=i.objectStore("blanks").clear(),r.onsuccess=function(){e()},r.onerror=function(){e()}})(function(){null!=e&&e()})},o.prototype.unregister=function(e,t,r){var i=this;n.seq(function(r){i._unregisterTerm(e.subject.token,t.subject,r)},function(r){i._unregisterTerm(e.predicate.token,t.predicate,r)},function(r){i._unregisterTerm(e.object.token,t.object,r)},function(r){null!=e.graph?i._unregisterTerm(e.graph.token,t.graph,r):r()})(function(){r(!0)})},o.prototype._unregisterTerm=function(e,t,r){var n,i=this,o=i.db.transaction(["uris","literals","blanks","knownGraphs"],"readwrite");if("uri"===e)if(t!=this.defaultGraphOid){var a=function(){var e=o.objectStore("knownGraphs").delete(t);e.onsuccess=function(){r()}},n=o.objectStore("uris").delete(t);n.onsuccess=a()}else r();else if("literal"===e){var n=o.objectStore("literals").delete(t);n.onsuccess=function(){r()}}else if("blank"===e){var n=o.objectStore("blanks").delete(t);n.onsuccess=function(){r()}}else r()},t.exports={Lexicon:o}},{"./btree":38,"./lexicon":42,"./utils":55}],46:[function(e,t){var r=e("./utils"),n=r,i=function(e,t){var i=this;if(0!==arguments){r.registerIndexedDB(i),this.indexMap={},this.indices=["SPOG","GP","OGS","POG","GSP","OS"],this.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]},i.dbName=e.name||"rdfstorejs";var o=i.indexedDB.open(this.dbName+"_db",1);o.onerror=function(e){t(null,Error("Error opening IndexedDB: "+e.target.errorCode))},o.onsuccess=function(e){i.db=e.target.result,t(i)},o.onupgradeneeded=function(e){var t=e.target.result,r=t.createObjectStore(i.dbName,{keyPath:"SPOG"});n.each(i.indices,function(e){"SPOG"!==e&&r.createIndex(e,e,{unique:!1})})}}};i.prototype.index=function(e,t){var r=this;n.each(this.indices,function(t){e[t]=r._genMinIndexKey(e,t)});var i=r.db.transaction([r.dbName],"readwrite");i.oncomplete=function(){},i.onerror=function(e){t(null,Error(e.target.statusCode))};var o=i.objectStore(r.dbName),a=o.add(e);a.onsuccess=function(){t(!0)}},i.prototype.range=function(e,t){var r,n=this,i=n.db.transaction([n.dbName]).objectStore(n.dbName),o=this._indexForPattern(e),a=this._genMinIndexKey(e,o),s=this._genMaxIndexKey(e,o),l=n.IDBKeyRange.bound(a,s,!1,!1),u=[];r="SPOG"===o?i:i.index(o),r.openCursor(l).onsuccess=function(e){var r=e.target.result;r?(u.push(r.value),r.continue()):t(u)}},i.prototype.search=function(e,t){var r=this,n=r.db.transaction([r.dbName]).objectStore(r.dbName),i=this._genMinIndexKey(e,"SPOG"),o=n.get(i);o.onerror=function(e){t(null,Error(e.target.statusCode))},o.onsuccess=function(e){t(null!=e.target.result)}},i.prototype.delete=function(e,t){var r=this,n=r._genMinIndexKey(e,"SPOG"),i=r.db.transaction([r.dbName],"readwrite").objectStore(r.dbName).delete(n);i.onsuccess=function(){t(!0)},i.onerror=function(e){t(null,Error(e.target.statusCode))}},i.prototype._genMinIndexKey=function(e,t){var r=this.componentOrders[t];return n.map(r,function(t){return"string"==typeof e[t]||null==e[t]?"-1":""+e[t]}).join(".")},i.prototype._genMaxIndexKey=function(e,t){for(var r=this.componentOrders[t],i=[],o=!1,a=0;a<r.length;a++){var s=r[a],l=e[s];"string"==typeof l?(o===!1&&(o=!0,0>a-1||(i[a-1]=i[a-1]+1)),i[a]=-1):i[a]=l}return n.map(i,function(e){return""+e}).join(".")},i.prototype._indexForPattern=function(e){for(var t=e.indexKey,r=0;r<this.indices.length;r++)for(var i=this.indices[r],o=this.componentOrders[i],a=0;a<o.length&&n.include(t,o[a])!==!1;a++)if(a==t.length-1)return i;return"SPOG"},i.prototype.clear=function(e){var t,r=this,n=r.db.transaction([r.dbName],"readwrite");t=n.objectStore(r.dbName).clear(),t.onsuccess=function(){e()},t.onerror=function(){e()}},t.exports.QuadBackend=i},{"./utils":55}],47:[function(e,t){var r=e("./quad_index").QuadIndex,n=e("./utils"),i=e("./utils"),o=function(e,t){if(0!==arguments){this.indexMap={},this.treeOrder=e.treeOrder,this.indices=["SPOG","GP","OGS","POG","GSP","OS"],this.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]};var i=this;n.eachSeries(this.indices,function(e,t){new r({order:i.treeOrder,componentOrder:i.componentOrders[e]},function(r){i.indexMap[e]=r,t()})},function(){t(i)})}};o.prototype._indexForPattern=function(e){for(var t=e.indexKey,r=0;r<this.indices.length;r++)for(var n=this.indices[r],o=this.componentOrders[n],a=0;a<o.length&&i.include(t,o[a])!==!1;a++)if(a==t.length-1)return n;return"SPOG"},o.prototype.index=function(e,t){var r=this;n.eachSeries(this.indices,function(t,n){var i=r.indexMap[t];i.insert(e,function(){n()})},function(){t(r)})},o.prototype.range=function(e,t){var r=this._indexForPattern(e),n=this.indexMap[r];n.range(e,function(e){t(e)})},o.prototype.search=function(e,t){var r=this.indexMap.SPOG;r.search(e,function(e){t(null!=e)})},o.prototype.delete=function(e,t){var r=this;n.eachSeries(this.indices,function(t,n){var i=r.indexMap[t];i.delete(e,function(){n()})},function(){t(r)})},o.prototype.clear=function(e){var t=this;n.eachSeries(this.indices,function(e,n){new r({order:t.treeOrder,componentOrder:t.componentOrders[e]},function(r){t.indexMap[e]=r,n()})},function(){e(t)})},t.exports.QuadBackend=o},{"./quad_index":48,"./utils":55}],48:[function(e,t){var r=e("./btree").Tree,n=e("./utils"),i=e("./utils"),o=function(e,t){this.subject=e.subject,this.predicate=e.predicate,this.object=e.object,this.graph=e.graph,this.order=t};o.prototype.comparator=function(e){for(var t=0;t<this.order.length;t++){var r=this.order[t];if(null==e[r])return 0;if(this[r]<e[r])return-1;if(this[r]>e[r])return 1}return 0};var a=function(e){this.subject=e.subject,this.predicate=e.predicate,this.object=e.object,this.graph=e.graph,this.indexKey=[],this.keyComponents={};var t=[],r=[],i=this;n.forEach(["subject","predicate","object","graph"],function(e){"string"==typeof i[e]?(r.push(e),i.keyComponents[e]=null):(t.push(e),i.keyComponents[e]=i[e],i.indexKey.push(e))}),this.order=t.concat(r),this.key=new o(this.keyComponents,this.order)},s=function(e,t){0!=arguments&&(this.componentOrder=e.componentOrder,r.call(this,e.order,function(e){e.comparator=function(t,r){for(var n=0;n<e.componentOrder.length;n++){var i=e.componentOrder[n],o=t[i],a=r[i];if(a>o)return-1;if(o>a)return 1}return 0},e.rangeComparator=function(t,r){for(var n=0;n<e.componentOrder.length;n++){var i=e.componentOrder[n];if(null==r[i]||null==t[i])return 0;if(t[i]<r[i])return-1;if(t[i]>r[i])return 1}return 0},t(e)}))};s.prototype=n.create(r.prototype,{constructor:r}),s.prototype.insert=function(e,t){r.prototype.insert.call(this,e,null,function(e){t(e)})},s.prototype.search=function(e,t){r.prototype.search.call(this,e,function(e){t(e)},!0)},s.prototype.range=function(e,t){this._rangeTraverse(this,this.root,e,t)},s.prototype._rangeTraverse=function(e,t,r,n){var o=r.key,a=[],s=[t];i.whilst(function(){return s.length>0},function(t){for(var r=s.shift(),n=0;n<r.numberActives&&-1===e.rangeComparator(r.keys[n].key,o);)n++;if(r.isLeaf===!0){for(var l=n;l<r.numberActives&&0===e.rangeComparator(r.keys[l].key,o);)a.push(r.keys[l].key),l++;t()}else e._diskRead(r.children[n],function(l){s.push(l);var u=n;i.whilst(function(){return u<r.numberActives&&0===e.rangeComparator(r.keys[u].key,o)},function(t){a.push(r.keys[u].key),u++,e._diskRead(r.children[u],function(e){s.push(e),t()})},function(){t()})})},function(){n(a)})},t.exports={QuadIndex:s,Pattern:a,NodeKey:o}},{"./btree":38,"./utils":55}],49:[function(e,t){var r=e("./abstract_query_tree").AbstractQueryTree,n=e("./abstract_query_tree").NonSupportedSparqlFeatureError,i=e("./utils"),o=e("./quad_index"),a=e("./query_plan").QueryPlan,s=e("./query_filters").QueryFilters,l=e("./rdf_model"),u=e("./rdf_loader").RDFLoader,c=e("./graph_callbacks").CallbacksBackend,p=e("./utils"),f=e("./utils"),d=function(e){0!=arguments.length&&(this.backend=e.backend,this.lexicon=e.lexicon,this.eventsOnBatchLoad=e.eventsOnBatchLoad||!1,this.defaultPrefixes={},this.abstractQueryTree=new r,this.rdfLoader=new u(e.communication),this.callbacksBackend=new c(this),this.customFns=e.customFns||{})};d.prototype.setCustomFunctions=function(e){this.customFns=e},d.prototype.registerNsInEnvironment=function(e,t){var r=[];null!=e&&null!=e.prefixes&&(r=e.prefixes);var n={};for(var i in this.defaultPrefixes)n[i]=this.defaultPrefixes[i];for(var o=0;o<r.length;o++){var a=r[o];"prefix"===a.token&&(n[a.prefix]=a.local)}t.namespaces=n,t.base=null!=e&&e.base&&"object"==typeof e.base?e.base.value:null},d.prototype.applyModifier=function(e,t){if("DISTINCT"==e){for(var r={},n=[],i=0;i<t.length;i++){var o=t[i],a="";for(var s in o){var l=o[s];null==l?a=a+s+"null":"literal"==l.token?(null!=l.value&&(a+=l.value),null!=l.lang&&(a+=l.lang),null!=l.type&&(a+=l.type)):a=l.value?a+s+l.value:a+s+l}null==r[a]&&(n.push(o),r[a]=!0)}return n}return t},d.prototype.applyLimitOffset=function(e,t,r){return null==t&&null==e?r:(null==e&&(e=0),t=null==t?r.length:e+t,r.slice(e,t))},d.prototype.applySingleOrderBy=function(e,t,r,n,i){var o=[],a=this;p.eachSeries(e,function(e,i){s.collect(e.expression,[t],r,n,a,function(e){o.push(e[0].value),i()})},function(){i({binding:t,value:o})})},d.prototype.applyOrderBy=function(e,t,r,n,i){var o=this,a=[];null!=e&&e.length>0?p.eachSeries(t,function(t,i){o.applySingleOrderBy(e,t,r,n,function(e){a.push(e),i()})},function(){a.sort(function(t,r){return o.compareFilteredBindings(t,r,e,n)});for(var t=[],r=0;r<a.length;r++)t.push(a[r].binding);i(t)}):i(t)},d.prototype.compareFilteredBindings=function(e,t,r,n){for(var i=!1,o=0;!i;){if(o==e.value.length)return 0;var a,l=r[o].direction;if(null!=e.value[o]||null!=t.value[o]){if(null==e.value[o])a={value:!1};else if(null==t.value[o])a={value:!0};else{if("blank"===e.value[o].token&&"blank"===t.value[o].token){o++;continue}if("blank"===e.value[o].token)a={value:!1};else if("blank"===t.value[o].token)a={value:!0};else if("uri"===e.value[o].token&&"uri"===t.value[o].token){if(1==s.runEqualityFunction(e.value[o],t.value[o],[],this,n).value){o++;continue}a=s.runTotalGtFunction(e.value[o],t.value[o],[])}else if("uri"===e.value[o].token)a={value:!1};else if("uri"===t.value[o].token)a={value:!0};else if("literal"===e.value[o].token&&"literal"===t.value[o].token&&null==e.value[o].type&&null==t.value[o].type){if(1==s.runEqualityFunction(e.value[o],t.value[o],[],this,n).value){o++;continue}a=s.runTotalGtFunction(e.value[o],t.value[o],[])}else if("literal"===e.value[o].token&&null==e.value[o].type)a={value:!1};else if("literal"===t.value[o].token&&null==t.value[o].type)a={value:!0};else{if(1==s.runEqualityFunction(e.value[o],t.value[o],[],this,n).value){o++;continue}a=s.runTotalGtFunction(e.value[o],t.value[o],[])}}return 1==a.value?"ASC"===l?1:-1:"ASC"===l?-1:1}o++}},d.prototype.removeDefaultGraphBindings=function(e,t){for(var r=[],n={},i=0;i<t.named.length;i++)n[t.named[i].oid]=!0;for(i=0;i<t.implicit.length;i++)null==n[t.implicit[i].oid]&&r.push(t.implicit[i].oid);var o=[];for(i=0;i<e.length;i++){var a=e[i],s=!1;for(var l in a){for(var u=0;u<n.length;u++)if(a[l]===n[u]){s=!0;break}if(s)break}s||o.push(a)}return o},d.prototype.aggregateBindings=function(e,t,r,n,i){this.copyDenormalizedBindings(t,n.outCache,function(t){for(var o={},a=0;a<e.length;a++){var l=s.runAggregator(e[a],t,this,r,n);e[a].alias?o[e[a].alias.value]=l:o[e[a].value.value]=l}i(o)})},d.prototype.projectBindings=function(e,t,r){if("*"===e[0].kind)return t;for(var n=[],i=0;i<t.length;i++){for(var o=t[i],a={},l=!0,u=0;u<e.length;u++)if("variable"==e[u].token&&"aliased"!=e[u].kind)a[e[u].value.value]=o[e[u].value.value];else if("variable"==e[u].token&&"aliased"==e[u].kind){var c=s.runFilter(e[u].expression,o,this,r,{blanks:{},outCache:{}});if(s.isEbvError(c)){l=!1;break}a[e[u].alias.value]=c}l===!0&&n.push(a)}return n},d.prototype.resolveNsInEnvironment=function(e,t){var r=t.namespaces;return r[e]},d.prototype.normalizeTerm=function(e,t,r,n){if("uri"===e.token){var o=i.lexicalFormBaseUri(e,t);null==o?n(null):r?this.lexicon.registerUri(o,n):this.lexicon.resolveUri(o,n)}else if("literal"===e.token){var a=i.lexicalFormLiteral(e,t);r?this.lexicon.registerLiteral(a,n):this.lexicon.resolveLiteral(a,n)}else if("blank"===e.token){var s=e.value,l=t.blanks[s];null!=l?n(l):r?this.lexicon.registerBlank(function(e){t.blanks[s]=e,n(e)}):this.lexicon.resolveBlank(function(e){t.blanks[s]=e,n(e)})}else n("var"===e.token?e.value:null)},d.prototype.normalizeDatasets=function(e,t,r){var n=this;p.eachSeries(e,function(e,r){e.value===n.lexicon.defaultGraphUri?(e.oid=n.lexicon.defaultGraphOid,r()):n.normalizeTerm(e,t,!1,function(t){null!=t&&(e.oid=t),r()})},function(){r(!0)})},d.prototype.normalizeQuad=function(e,t,r,n){var o=null,a=null,s=null,l=null,u=this,c=!1;p.seq(function(n){if(null==e.graph||e.graph.value===u.lexicon.defaultGraphUri)l=0,n();else{var o=i.lexicalFormBaseUri(e.graph,t);u.normalizeTerm(e.graph,t,r,function(t){null!=t?(l=t,r===!0&&"var"!=e.graph.token?u.lexicon.registerGraph(t,o,function(){n()}):n()):(c=!0,n())})}},function(n){c===!1?u.normalizeTerm(e.subject,t,r,function(e){null!=e?(o=e,n()):(c=!0,n())}):n()},function(n){c===!1?u.normalizeTerm(e.predicate,t,r,function(e){null!=e?(a=e,n()):(c=!0,n())}):n()},function(n){c===!1?u.normalizeTerm(e.object,t,r,function(e){null!=e?(s=e,n()):(c=!0,n())}):n()})(function(){n(c===!0?null:{subject:o,predicate:a,object:s,graph:l})})},d.prototype.denormalizeBindingsList=function(e,t,r){var n=this,i=[];p.eachSeries(e,function(e,r){n.denormalizeBindings(e,t,function(e){i.push(e),r()})},function(){r(i)})},d.prototype.copyDenormalizedBindings=function(e,t,r){var n=this,i=[];p.eachSeries(e,function(e,r){var o={},a=f.keys(e);p.eachSeries(a,function(r,i){var a=e[r];if(null==a)o[r]=null,i();else if("object"==typeof a)o[r]=a,i();else{var s=t[a];null!=s?(o[r]=s,i()):n.lexicon.retrieve(a,function(e){t[a]=e,o[r]=e,i()})}},function(){i.push(o),r()})},function(){r(i)})},d.prototype.denormalizeBindings=function(e,t,r){var n=f.keys(e),i=t.outCache,o=this;p.eachSeries(n,function(r,n){var a=e[r];null==a?(e[r]=null,n()):null!=i[a]?(e[r]=i[a],n()):o.lexicon.retrieve(a,function(i){e[r]=i,"blank"===i.token&&(t.blanks[i.value]=a),n()})},function(){r(e)})},d.prototype.execute=function(e,t,r,n){e=i.normalizeUnicodeLiterals(e);var o=this.abstractQueryTree.parseQueryString(e);if(null==o)t(!1,"Error parsing query string");else if("query"===o.token&&"update"==o.kind){this.callbacksBackend.startGraphModification();var a=this;this.executeUpdate(o,function(e,r){a.lexicon.updateAfterWrite&&a.lexicon.updateAfterWrite(),e?(a.callbacksBackend.cancelGraphModification(),t(e,r)):a.callbacksBackend.endGraphModification(function(){t(e,r)})})}else"query"===o.token&&"query"==o.kind&&this.executeQuery(o,t,r,n)},d.prototype.executeQuery=function(e,t,r,n){var i=e.prologue,o=e.units,a=this,s={blanks:{},outCache:{}};this.registerNsInEnvironment(i,s);var u=a.abstractQueryTree.parseExecutableUnit(o[0]);"select"===u.kind?this.executeSelect(u,s,r,n,function(e,r){null==e?"object"==typeof r&&r.denorm===!0?t(null,r.bindings):a.denormalizeBindingsList(r,s,function(e){t(null,e)}):t(e)}):"ask"===u.kind?(u.projection=[{token:"variable",kind:"*"}],this.executeSelect(u,s,r,n,function(e,r){null==e?r.length>0?t(null,!0):t(null,!1):t(e)})):"construct"===u.kind&&(u.projection=[{token:"variable",kind:"*"}],a=this,this.executeSelect(u,s,r,n,function(e,r){null==e?a.denormalizeBindingsList(r,s,function(e){if(null!=e){var r=new l.Graph;null==u.template&&(u.template={triplesContext:u.pattern});for(var n=1,i=[],o=0;o<e.length;o++){for(var c=e[o],p=0;p<i.length;p++)delete i[p].valuetmp;for(var p=0;p<u.template.triplesContext.length;p++){for(var f=["subject","predicate","object"],d=u.template.triplesContext[p],h=0;h<f.length;h++){var v=f[h];if("blank"===d[v].token)if(d[v].valuetmp&&null!=d[v].valuetmp);else{var g="_:b"+n;n++,d[v].valuetmp=g,i.push(d[v])}}var y=l.buildRDFResource(d.subject,c,a,s),h=l.buildRDFResource(d.predicate,c,a,s),b=l.buildRDFResource(d.object,c,a,s);if(null!=y&&null!=h&&null!=b){var m=new l.Triple(y,h,b);r.add(m)}}}t(null,r)}else t(Error("Error denormalizing bindings."))}):t(e)}))},d.prototype.executeSelect=function(e,t,r,n,i){if("select"===e.kind||"ask"===e.kind||"construct"===e.kind||"modify"===e.kind){var o=e.projection,a=e.dataset,s=e.modifier,l=e.limit,u=e.offset,c=e.order,f=this;(null!=r||null!=n)&&(a.implicit=r||[],a.named=n||[]),null!=a.implicit&&0===a.implicit.length&&null!=a.named&&0===a.named.length&&a.implicit.push(this.lexicon.defaultGraphUriTerm),f.normalizeDatasets(a.implicit.concat(a.named),t,function(){try{f.executeSelectUnit(o,a,e.pattern,t,function(r){if(null!=r){if(null!=e.group&&""===e.group){for(var n=!1,d=0;d<e.projection.length;d++)if(null!=e.projection[d].expression&&"aggregate"===e.projection[d].expression.expressionType){n=!0;break}n===!0&&(e.group="singleGroup")}e.group&&""!=e.group?f.checkGroupSemantics(e.group,o)?f.groupSolution(r,e.group,a,t,function(e){var r=[];p.eachSeries(e,function(e,n){f.aggregateBindings(o,e,a,t,function(e){r.push(e),n()})},function(){i(null,{bindings:r,denorm:!0})})}):i(Error("Incompatible Group and Projection variables")):f.applyOrderBy(c,r,a,t,function(e){var t=f.projectBindings(o,e,a),r=f.applyModifier(s,t),n=f.applyLimitOffset(u,l,r),c=f.removeDefaultGraphBindings(n,a);i(null,c)})}else i(Error("Error executing SELECT query."))})}catch(r){console.log(r),i(r)}})}else i(Error("Cannot execute "+e.kind+" query as a select query"))},d.prototype.groupSolution=function(e,t,r,n,i){var o=[],a=[],l=!1,u=this;"singleGroup"===t?i([e]):p.eachSeries(e,function(e,i){var c=!0;p.eachSeries(t,function(t,i){var a=null;if("var"===t.token)a=t.value,0==l&&o.push(a),i();else if("aliased_expression"===t.token){if(a=t.alias.value,0==l&&o.push(a),"var"===t.expression.primaryexpression)e[t.alias.value]=e[t.expression.value.value];else{var p=u.copyDenormalizedBindings([e],n.outCache),f=s.runFilter(t.expression,p[0],u,r,n);s.isEbvError(f)?c=!1:(null!=f.value&&(f.value=""+f.value),e[t.alias.value]=f)}i()}else u.copyDenormalizedBindings([e],n.outCache,function(r){var p=s.runFilter(t,r[0],u,n);s.isEbvError(p)?c=!1:(e["groupCondition"+env._i]=p,a="groupCondition"+env._i,0==l&&o.push(a)),i()})},function(){0==l&&(l=!0),c===!0&&a.push(e),i()})},function(){for(var e={},t={},r=0,n=0;n<a.length;n++){for(var s=a[n],l="",u=0;u<o.length;u++){var c=s[o[u]];l+="object"==typeof c?c.value:c}null==e[l]?(t[l]=r,e[l]=[s]):e[l].push(s)}var p=[];for(var f in e)p.push(e[f]);i(p)})},d.prototype.executeSelectUnit=function(e,t,r,i,o){if("BGP"===r.kind)this.executeAndBGP(e,t,r,i,o);else if("UNION"===r.kind)this.executeUNION(e,t,r.value,i,o);else if("JOIN"===r.kind)this.executeJOIN(e,t,r,i,o);else if("LEFT_JOIN"===r.kind)this.executeLEFT_JOIN(e,t,r,i,o);else if("FILTER"===r.kind){var a=this;this.executeSelectUnit(e,t,r.value,i,function(e){null!=e?s.checkFilters(r,e,!1,t,i,a,o):o([])})}else{if("EMPTY_PATTERN"!==r.kind)throw new n(r.kind);o([])}},d.prototype.executeUNION=function(e,t,r,n,i){var o,l,u=r[0],c=r[1],f=null;if(2!=r.length)throw"SPARQL algebra UNION with more than two components";var d=this;p.seq(function(r){try{d.executeSelectUnit(e,t,u,n,function(e){o=e,r()})}catch(i){f=i,r()}},function(r){if(null==f)try{d.executeSelectUnit(e,t,c,n,function(e){l=e,r()})}catch(i){f=i,r()}else r()})(function(){if(null!=f)i(f);else{var e=a.unionBindings(o,l);s.checkFilters(r,e,!1,t,n,d,i)}})},d.prototype.executeAndBGP=function(e,t,r,n,i){var o=this;a.executeAndBGPsDPSize(r.value,t,this,n,function(e){null!=e?s.checkFilters(r,e,!1,t,n,o,i):i(null)})},d.prototype.executeLEFT_JOIN=function(e,t,r,n,i){var o,l,u=r.lvalue,c=r.rvalue,f=null,d=null,h=null,v=this;p.seq(function(r){try{v.executeSelectUnit(e,t,u,n,function(e){f=e,r()})}catch(i){h=i,r()}},function(r){if(null!=h)r();else try{v.executeSelectUnit(e,t,c,n,function(e){d=e,r()})}catch(i){h=i,r()}})(function(){if(null!=h)i(h);else{var e=a.leftOuterJoinBindings(f,d);s.checkFilters(r,e,!0,t,n,v,function(e){if(f.length>1&&d.length>1){var t=[],r={};for(var n in f[0])r[n]=!0;for(n in d[0])1!=r[n]&&t.push(n);o=[],l={};for(var a=0;a<e.length;a++)if(e[a].__nullify__===!0){for(var s=0;s<t.length;s++)e[a].bindings[t[s]]=null;var u=[],c=[];for(var n in e[a].bindings)null!=e[a].bindings[n]&&(u.push(n+e[a].bindings[n]),u.sort(),c.push(u.join("")));if(null==l[u.join("")]){for(s=0;s<c.length;s++)l[c[s]]=!0;o.push(e[a].bindings)}}else{o.push(e[a]);var u=[],c=[];for(var n in e[a])u.push(n+e[a][n]),u.sort(),l[u.join("")]=!0}i(o)}else i(e)})}})},d.prototype.executeJOIN=function(e,t,r,n,i){var o=r.lvalue,l=r.rvalue,u=null,c=null,f=null,d=this;p.seq(function(r){try{d.executeSelectUnit(e,t,o,n,function(e){u=e,r()})}catch(i){f=i,r()}},function(r){if(null!=f)r();else try{d.executeSelectUnit(e,t,l,n,function(e){c=e,r()})}catch(i){f=i,r()}})(function(){var e=null;if(null!=f)i(f);else if(0===u.length||0===c.length)i([]);else{var p={},h=[];for(var v in u[0])p[v]=!1;for(var v in c[0])p[v]===!1&&h.push(v);e=0==h.length?a.joinBindings(u,c):d.abstractQueryTree.treeWithUnion(o)||d.abstractQueryTree.treeWithUnion(l)?a.joinBindings(u,c):a.joinBindings2(h,u,c),s.checkFilters(r,e,!1,t,n,d,i)}})},d.prototype.rangeQuery=function(e,t,r){var n=this;n.normalizeQuad(e,t,!1,function(e){null!=e?n.backend.range(new o.Pattern(e),function(e){r(null==e||0==e.length?[]:e)}):r(null)})},d.prototype.executeUpdate=function(e,t){var r=e.prologue,n=e.units,o=this,a={blanks:{},outCache:{}};this.registerNsInEnvironment(r,a);for(var s=0;s<n.length;s++){var l=o.abstractQueryTree.parseExecutableUnit(n[s]);if("insertdata"===l.kind){var u=null;p.eachSeries(l.quads,function(e,t){null===u?o._executeQuadInsert(e,a,function(e){null!=e&&(u=e),t()}):t()},function(){null===u?t(null,!0):t(u)})}else if("deletedata"===l.kind){var u=null;p.eachSeries(l.quads,function(e,t){null===u?o._executeQuadDelete(e,a,function(e){null!=e&&(u=e),t()}):t()},function(){null===u?t(null,!0):t(u)})}else if("modify"===l.kind)this._executeModifyQuery(l,a,t);else if("create"===l.kind)t(!0);else if("load"===l.kind){var c={uri:i.lexicalFormBaseUri(l.sourceGraph,a)};null!=l.destinyGraph&&(c={uri:i.lexicalFormBaseUri(l.destinyGraph,a)});var o=this;this.rdfLoader.load(l.sourceGraph.value,c,function(e,r){e?t(!1,"error batch loading quads"):o.batchLoad(r,function(e){t(null!=e,e||"error batch loading quads")})})}else if("drop"===l.kind)this._executeClearGraph(l.destinyGraph,a,t);else{if("clear"!==l.kind)throw Error("not supported execution unit");this._executeClearGraph(l.destinyGraph,a,t)}}},d.prototype.batchLoad=function(e,t){var r=0,n={},i=this;this.eventsOnBatchLoad&&this.callbacksBackend.startGraphModification();var a=function(e,t,r,o){var a,e;e[t].uri||"uri"===e[t].token?i.lexicon.registerUri(e[t].uri||e[t].value,function(n){null!=e[t].uri&&(e[t]={token:"uri",value:e[t].uri},delete e[t].uri),r[t]=n,o()}):e[t].literal||"literal"===e[t].token?i.lexicon.registerLiteral(e[t].literal||e[t].value,function(n){null!=e[t].literal&&(e[t]=i.lexicon.parseLiteral(e[t].literal),delete e[t].literal),r[t]=n,o()}):(a=n[e[t].blank||e[t].value],null==a?i.lexicon.registerBlank(function(i){n[e[t].blank||e[t].value]=i,null==e[t].token&&(e[t].token="blank",e[t].value=e[t].blank,delete e[t].blank),r[t]=i,o()}):(null==e[t].token&&(e[t].token="blank",e[t].value=e[t].blank,delete e[t].blank),r[t]=a,o()))};p.eachSeries(e,function(e,t){var n={};p.eachSeries(["subject","predicate","object","graph"],function(t,r){a(e,t,n,r)},function(){var a=e;e=n;var s=new o.NodeKey(e);i.backend.search(s,function(n){n?t():i.backend.index(s,function(n){n&&(i.eventsOnBatchLoad&&i.callbacksBackend.nextGraphModification(c.added,[a,e]),r+=1),t()})})})},function(){null!=i.lexicon.updateAfterWrite&&i.lexicon.updateAfterWrite();var e=function(){t(r)};i.eventsOnBatchLoad?i.callbacksBackend.endGraphModification(e()):e()})},d.prototype._executeModifyQuery=function(e,t,r){var n=this,i=!0,o=Error("Error executing modify query"),a=null,s=["subject","predicate","object","graph"];e.insert=null==e.insert?[]:e.insert,e.delete=null==e.delete?[]:e.delete,p.seq(function(r){var s=[],l=[];if(null!=e.with&&s.push(e.with),null!=e.using){l=[];for(var u=0;u<e.using.length;u++){var c=e.using[u];"named"===c.kind?l.push(c.uri):s.push(c.uri)}}e.dataset={},e.projection=[{token:"variable",kind:"*"}],n.executeSelect(e,t,s,l,function(e,s){return e?(o=e,i=!1,r()):void n.denormalizeBindingsList(s,t,function(e){null!=e?a=e:(o=Error("Error denormalizing bindings list"),i=!1),r()})})},function(r){var o=e.with;if(i){for(var l=[],u=0;u<e.delete.length;u++)for(var c=e.delete[u],f=0;f<a.length;f++){for(var d={},h=a[f],v=0;v<s.length;v++){var g=s[v];"graph"==g&&null==c[g]?d.graph=o:d[g]="var"===c[g].token?h[c[g].value]:c[g]}l.push(d)}p.eachSeries(l,function(e,r){n._executeQuadDelete(e,t,function(){r()})},function(){r()})}else r()},function(r){var o=e.with;if(i){for(var l=[],u=0;u<e.insert.length;u++)for(var c=e.insert[u],f=0;f<a.length;f++){for(var d={},h=a[f],v=0;v<s.length;v++){var g=s[v];
"graph"==g&&null==c[g]?d.graph=o:d[g]="var"===c[g].token?h[c[g].value]:c[g]}l.push(d)}p.eachSeries(l,function(e,r){n._executeQuadInsert(e,t,function(){r()})},function(){r()})}else r()})(function(){r(i?null:o)})},d.prototype._executeQuadInsert=function(e,t,r){var n,i=this,a=!1,s=null;p.seq(function(r){i.normalizeQuad(e,t,!0,function(e){null!=e?n=e:(a=!0,s="Error normalizing quad."),r()})},function(t){if(a===!1){var r=new o.NodeKey(n);i.backend.search(r,function(o){o===!0?t():i.backend.index(r,function(){i.callbacksBackend.nextGraphModification(c.added,[e,n]),t()})})}else t()})(function(){a?r(Error(s)):r(null,!0)})},d.prototype._executeQuadDelete=function(e,t,r){var n,i,a,s=this,l=!1;p.seq(function(r){s.normalizeQuad(e,t,!0,function(e){null!=e?n=e:(l=!0,i="Error normalizing quad."),r()})},function(e){l===!1?(a=new o.NodeKey(n),s.backend.delete(a,function(){e()})):e()},function(t){l===!1?s.lexicon.unregister(e,a,function(){s.callbacksBackend.nextGraphModification(c.deleted,[e,n]),t()}):t()})(function(){l?r(Error(i)):r(null,!0)})},d.prototype._executeClearGraph=function(e,t,r){var n=this;if("default"===e)this.execute("DELETE { ?s ?p ?o } WHERE { ?s ?p ?o }",r);else if("named"===e)n.lexicon.registeredGraphs(!0,function(e){if(null!=e){var t=!1;p.eachSeries(e,function(e,r){t?r():n.execute("DELETE { GRAPH <"+e+"> { ?s ?p ?o } } WHERE { GRAPH <"+e+"> { ?s ?p ?o } }",function(e){t=!e,r()})},function(){r(!t)})}else r(!1,"Error deleting named graphs")});else if("all"===e){var n=this;this.execute("CLEAR DEFAULT",function(e,t){e?r(!1,t):n.execute("CLEAR NAMED",r)})}else if("uri"==e.token){var o=i.lexicalFormBaseUri(e,t);null!=o?(this.callbacksBackend.ongoingModification=!0,this.execute("DELETE { GRAPH <"+o+"> { ?s ?p ?o } } WHERE { GRAPH <"+o+"> { ?s ?p ?o } }",function(e){n.callbacksBackend.ongoingModification=!1,r(e)})):r(!1,"wrong graph URI")}else r(!1,"wrong graph URI")},d.prototype.checkGroupSemantics=function(e,t){if("singleGroup"===e)return!0;for(var r={},n=0;n<e.length;n++){var i=e[n];"var"===i.token?r[i.value]=!0:"aliased_expression"===i.token&&(r[i.alias.value]=!0)}for(n=0;n<t.length;n++){var o=t[n];if("var"===o.kind){if(null==r[o.value.value])return!1}else if("aliased"===o.kind&&o.expression&&"var"===o.expression.primaryexpression&&null==r[o.expression.value.value])return!1}return!0},d.prototype.computeCosts=function(e,t,r){for(var n=0;n<e.length;n++)e[n]._cost=this.quadCost(e[n],t);r(e)},d.prototype.quadCost=function(){return 1},d.prototype.registerDefaultNamespace=function(e,t){this.defaultPrefixes[e]=t},t.exports={QueryEngine:d}},{"./abstract_query_tree":37,"./graph_callbacks":40,"./quad_index":48,"./query_filters":50,"./query_plan":51,"./rdf_loader":52,"./rdf_model":53,"./utils":55}],50:[function(e,t){var r=e("./utils"),n=r,i=e("./utils"),o={},a="http://www.w3.org/2001/XMLSchema#";o.checkFilters=function(e,t,r,n,a,s,l){var u=[];e.filter&&"function"!=typeof e.filter&&(u=e.filter);var c=[];return null==u||0===u.length||null!=e.length?l(t):void i.eachSeries(u,function(e,l){o.run(e.value,t,r,n,a,s,function(e){var r=[];i.eachSeries(e,function(e,t){null!=e.__nullify__?c.push(e):r.push(e),t()},function(){t=r,l()})})},function(){l(t.concat(c))})},o.boundVars=function(e){if(null==e.expressionType)throw console.log("ERROR"),console.log(e),"Cannot find bound expressions in a no expression token";var t=e.expressionType;if("relationalexpression"==t){var r=e.op1,n=e.op2;return o.boundVars(r)+o.boundVars(n)}if("conditionalor"==t||"conditionaland"==t){for(var i=[],a=0;a<e.operands;a++)i=i.concat(o.boundVars(e.operands[a]));return i}if("builtincall"==t){if(null==e.args)return[];for(var s=[],a=0;a<e.args.length;a++)s=s.concat(o.boundVars(e.args[a]));return s}if("multiplicativeexpression"==t){for(var s=o.boundVars(e.factor),a=0;a<e.factors.length;a++)s=s.concat(o.boundVars(e.factors[a].expression));return s}if("additiveexpression"==t){for(var s=o.boundVars(e.summand),a=0;a<e.summands.length;a++)s=s.concat(o.boundVars(e.summands[a].expression));return s}if("regex"==t){var s=o.boundVars(e.expression1);return s.concat(o.boundVars(e.expression2))}return"unaryexpression"==t?o.boundVars(e.expression):"atomic"==t?"var"==e.primaryexpression?[e.value]:[]:void 0},o.run=function(e,t,r,n,i,a,s){a.copyDenormalizedBindings(t,i.outCache,function(l){for(var u=[],c=0;c<t.length;c++){var p=l[c],f=o.runFilter(e,p,a,n,i),f=o.ebv(f);if(o.isEbvError(f)){if(r){var d={__nullify__:!0,bindings:t[c]};u.push(d)}}else if(f===!0)u.push(t[c]);else if(r){var d={__nullify__:!0,bindings:t[c]};u.push(d)}}s(u)})},o.collect=function(e,t,r,n,i,a){i.copyDenormalizedBindings(t,n.outCache,function(s){for(var l=[],u=0;u<s.length;u++){var c=s[u],p=o.runFilter(e,c,i,r,n);l.push({binding:t[u],value:p})}return a(l)})},o.runDistinct=function(){},o.runAggregator=function(e,t,n,i,s){if(null==t||0===t.length)return o.ebvError();if("variable"===e.token&&"var"==e.kind)return t[0][e.value.value];if("variable"===e.token&&"aliased"===e.kind){if("atomic"===e.expression.expressionType&&"var"===e.expression.primaryexpression)return t[0][e.expression.value.value];if("aggregate"===e.expression.expressionType){if("max"===e.expression.aggregateType){for(var l=null,u=0;u<t.length;u++){var c=t[u],p=o.runFilter(e.expression.expression,c,n,i,s);o.isEbvError(p)||(null===l?l=p:o.runLtFunction(l,p).value===!0&&(l=p))}return null===l?o.ebvError():l}if("min"===e.expression.aggregateType){for(var f=null,u=0;u<t.length;u++){var c=t[u],p=o.runFilter(e.expression.expression,c,n,i,s);o.isEbvError(p)||(null===f?f=p:o.runGtFunction(f,p).value===!0&&(f=p))}return null===f?o.ebvError():f}if("count"===e.expression.aggregateType){var d={},h=0;if("*"===e.expression.expression)if(null!=e.expression.distinct&&""!=e.expression.distinct)for(var u=0;u<t.length;u++){var c=t[u],v=r.hashTerm(c);null==d[v]&&(d[v]=!0,h++)}else h=t.length;else for(var u=0;u<t.length;u++){var c=t[u],p=o.runFilter(e.expression.expression,c,n,i,s);if(!o.isEbvError(p))if(null!=e.expression.distinct&&""!=e.expression.distinct){var v=r.hashTerm(p);null==d[v]&&(d[v]=!0,h++)}else h++}return{token:"literal",type:a+"integer",value:""+h}}if("avg"===e.expression.aggregateType){for(var d={},g={token:"literal",type:a+"integer",value:"0"},h=0,u=0;u<t.length;u++){var c=t[u],p=o.runFilter(e.expression.expression,c,n,i,s);if(!o.isEbvError(p))if(null!=e.expression.distinct&&""!=e.expression.distinct){var v=r.hashTerm(p);null==d[v]&&(d[v]=!0,o.isNumeric(p)&&(g=o.runSumFunction(g,p),h++))}else o.isNumeric(p)&&(g=o.runSumFunction(g,p),h++)}var y=o.runDivFunction(g,{token:"literal",type:a+"integer",value:""+h});return y.value=""+y.value,y}if("sum"===e.expression.aggregateType){for(var d={},g={token:"literal",type:a+"integer",value:"0"},u=0;u<t.length;u++){var c=t[u],p=o.runFilter(e.expression.expression,c,n,i,s);if(!o.isEbvError(p))if(null!=e.expression.distinct&&""!=e.expression.distinct){var v=r.hashTerm(p);null==d[v]&&(d[v]=!0,o.isNumeric(p)&&(g=o.runSumFunction(g,p)))}else o.isNumeric(p)&&(g=o.runSumFunction(g,p))}return g.value=""+g.value,g}var p=o.runFilter(aggregate.expression,t[0],i,{blanks:{},outCache:{}});return p}}},o.runFilter=function(e,t,n,i,a){if(null!=e.expressionType){var s=e.expressionType;if("relationalexpression"==s){var l=o.runFilter(e.op1,t,n,i,a),u=o.runFilter(e.op2,t,n,i,a);return o.runRelationalFilter(e,l,u,t,n,i,a)}if("conditionalor"==s)return o.runOrFunction(e,t,n,i,a);if("conditionaland"==s)return o.runAndFunction(e,t,n,i,a);if("additiveexpression"==s)return o.runAddition(e.summand,e.summands,t,n,i,a);if("builtincall"==s)return o.runBuiltInCall(e.builtincall,e.args,t,n,i,a);if("multiplicativeexpression"==s)return o.runMultiplication(e.factor,e.factors,t,n,i,a);if("unaryexpression"==s)return o.runUnaryExpression(e.unaryexpression,e.expression,t,n,i,a);if("irireforfunction"==s)return o.runIriRefOrFunction(e.iriref,e.args,t,n,i,a);if("regex"==s)return o.runRegex(e.text,e.pattern,e.flags,t,n,i,a);if("custom"==s)return o.runBuiltInCall(e.name,e.args,t,n,i,a);if("atomic"==s)return"var"==e.primaryexpression?t[e.value.value]:"object"!=typeof e.value?e.value:null==e.value.type||"object"!=typeof e.value.type?e.value:(e.value.type=r.lexicalFormBaseUri(e.value.type,a),e.value);throw"Unknown filter expression type"}throw"Cannot find bound expressions in a no expression token"},o.isRDFTerm=function(e){return null==e?!1:e.token&&"literal"==e.token||e.token&&"uri"==e.token||e.token&&"blank"==e.token?!0:!1},o.RDFTermEquality=function(e,t,n,i){return"literal"===e.token&&"literal"===t.token?e.lang==t.lang&&e.type==t.type&&e.value==t.value?!0:null!=e.type&&null!=t.type?o.ebvError():o.isSimpleLiteral(e)&&null!=t.type?o.ebvError():o.isSimpleLiteral(t)&&null!=e.type?o.ebvError():!1:"uri"===e.token&&"uri"===t.token?r.lexicalFormBaseUri(e,i)==r.lexicalFormBaseUri(t,i):"blank"===e.token&&"blank"===t.token?e.value==t.value:!1},o.isInteger=function(e){return null==e?!1:"literal"===e.token&&(e.type==a+"integer"||e.type==a+"decimal"||e.type==a+"double"||e.type==a+"nonPositiveInteger"||e.type==a+"negativeInteger"||e.type==a+"long"||e.type==a+"int"||e.type==a+"short"||e.type==a+"byte"||e.type==a+"nonNegativeInteger"||e.type==a+"unsignedLong"||e.type==a+"unsignedInt"||e.type==a+"unsignedShort"||e.type==a+"unsignedByte"||e.type==a+"positiveInteger")?!0:!1},o.isFloat=function(e){return null==e?!1:"literal"===e.token&&e.type==a+"float"?!0:!1},o.isDecimal=function(e){return null==e?!1:"literal"===e.token&&e.type==a+"decimal"?!0:!1},o.isDouble=function(e){return null==e?!1:"literal"===e.token&&e.type==a+"double"?!0:!1},o.isNumeric=function(e){return null==e?!1:"literal"===e.token&&(e.type==a+"integer"||e.type==a+"decimal"||e.type==a+"float"||e.type==a+"double"||e.type==a+"nonPositiveInteger"||e.type==a+"negativeInteger"||e.type==a+"long"||e.type==a+"int"||e.type==a+"short"||e.type==a+"byte"||e.type==a+"nonNegativeInteger"||e.type==a+"unsignedLong"||e.type==a+"unsignedInt"||e.type==a+"unsignedShort"||e.type==a+"unsignedByte"||e.type==a+"positiveInteger")?!0:!1},o.isSimpleLiteral=function(e){return e&&"literal"==e.token&&null==e.type&&null==e.lang?!0:!1},o.isXsdType=function(e,t){return t&&"literal"==t.token?t.type==a+""+e:!1},o.ebv=function(e){if(null==e||o.isEbvError(e))return o.ebvError();if(e.token&&"literal"===e.token){if(e.type==a+"integer"||e.type==a+"decimal"||e.type==a+"double"||e.type==a+"nonPositiveInteger"||e.type==a+"negativeInteger"||e.type==a+"long"||e.type==a+"int"||e.type==a+"short"||e.type==a+"byte"||e.type==a+"nonNegativeInteger"||e.type==a+"unsignedLong"||e.type==a+"unsignedInt"||e.type==a+"unsignedShort"||e.type==a+"unsignedByte"||e.type==a+"positiveInteger"){var t=parseFloat(e.value);return isNaN(t)?!1:0!=parseFloat(e.value)}return e.type===a+"boolean"?"true"===e.value||e.value===!0||"True"===e.value:e.type===a+"string"?""!=e.value:e.type===a+"dateTime"?null!=new Date(e.value):o.isEbvError(e)?e:null==e.type?""!=e.value?!0:!1:o.ebvError()}return e.value===!0},o.effectiveBooleanValue=o.ebv,o.ebvTrue=function(){var e={token:"literal",type:a+"boolean",value:!0};return e},o.ebvFalse=function(){var e={token:"literal",type:a+"boolean",value:!1};return e},o.ebvError=function(){var e={token:"literal",type:"https://github.com/antoniogarrote/js-tools/types#error",value:null};return e},o.isEbvError=function(e){return"object"==typeof e&&null!=e?"https://github.com/antoniogarrote/js-tools/types#error"===e.type:!1},o.ebvBoolean=function(e){return o.isEbvError(e)?e:e===!0?o.ebvTrue():o.ebvFalse()},o.runRelationalFilter=function(e,t,r,n,i,a,s){var l=e.operator;if("="===l)return o.runEqualityFunction(t,r,n,i,a,s);if("!="===l){var u=o.runEqualityFunction(t,r,n,i,a,s);return o.isEbvError(u)?u:(u.value=!u.value,u)}if("<"===l)return o.runLtFunction(t,r,n);if(">"===l)return o.runGtFunction(t,r,n);if("<="===l)return o.runLtEqFunction(t,r,n);if(">="===l)return o.runGtEqFunction(t,r,n);throw"Error applying relational filter, unknown operator"},o.effectiveTypeValue=function(e){if("literal"!=e.token)throw console.log("not implemented yet"),console.log(e),"value not supported in operations yet";if(e.type==a+"integer"){var t=parseInt(e.value);return t}if(e.type==a+"decimal"){var t=parseFloat(e.value);return t}if(e.type==a+"float"){var t=parseFloat(e.value);return t}if(e.type==a+"double"){var t=parseFloat(e.value);return t}if(e.type==a+"nonPositiveInteger"){var t=parseFloat(e.value);return t}if(e.type==a+"negativeInteger"){var t=parseInt(e.value);return t}if(e.type==a+"long"){var t=parseInt(e.value);return t}if(e.type==a+"int"){var t=parseInt(e.value);return t}if(e.type==a+"short"){var t=parseInt(e.value);return t}if(e.type==a+"byte"){var t=parseInt(e.value);return t}if(e.type==a+"nonNegativeInteger"){var t=parseInt(e.value);return t}if(e.type==a+"unsignedLong"){var t=parseInt(e.value);return t}if(e.type==a+"unsignedInt"){var t=parseInt(e.value);return t}if(e.type==a+"unsignedShort"){var t=parseInt(e.value);return t}if(e.type==a+"unsignedByte"){var t=parseInt(e.value);return t}if(e.type==a+"positiveInteger"){var t=parseInt(e.value);return t}if(e.type!=a+"date"&&e.type!=a+"dateTime")return e.type==a+"boolean"?e.value===!0||"true"===e.value||"1"===e.value||1===e.value||e.value===!0?!0:e.value===!1||"false"===e.value||"0"===e.value||0===e.value||e.value===!1?!1:void 0:e.type==a+"string"?null===e.value||void 0===e.value?void 0:""+e.value:null==e.type?e.value:e.value;try{var n=r.parseISO8601(e.value);return n}catch(i){return null}},o.runOrFunction=function(e,t,r,n,i){for(var a=null,s=0;s<e.operands.length;s++){var l=o.runFilter(e.operands[s],t,r,n,i);0==o.isEbvError(l)&&(l=o.ebv(l)),null==a?a=l:o.isEbvError(l)?a=o.isEbvError(a)?o.ebvError():a===!0?!0:o.ebvError():l===!0?a=!0:o.isEbvError(a)&&(a=o.ebvError())}return o.ebvBoolean(a)},o.runAndFunction=function(e,t,r,n,i){for(var a=null,s=0;s<e.operands.length;s++){var l=o.runFilter(e.operands[s],t,r,n,i);0==o.isEbvError(l)&&(l=o.ebv(l)),null==a?a=l:o.isEbvError(l)?a=o.isEbvError(a)?o.ebvError():a===!0?o.ebvError():!1:l===!0?o.isEbvError(a)&&(a=o.ebvError()):a=!1}return o.ebvBoolean(a)},o.runEqualityFunction=function(e,t,n,i,a,s){if(o.isEbvError(e)||o.isEbvError(t))return o.ebvError();if(o.isNumeric(e)&&o.isNumeric(t)){var l=o.effectiveTypeValue(e),u=o.effectiveTypeValue(t);return o.ebvBoolean(isNaN(l)||isNaN(u)?o.RDFTermEquality(e,t,i,s):l==u)}if((o.isSimpleLiteral(e)||o.isXsdType("string",e))&&(o.isSimpleLiteral(t)||o.isXsdType("string",t)))return o.ebvBoolean(o.effectiveTypeValue(e)==o.effectiveTypeValue(t));if(o.isXsdType("boolean",e)&&o.isXsdType("boolean",t))return o.ebvBoolean(o.effectiveTypeValue(e)==o.effectiveTypeValue(t));if((o.isXsdType("dateTime",e)||o.isXsdType("date",e))&&(o.isXsdType("dateTime",t)||o.isXsdType("date",t))){if(o.isXsdType("dateTime",e)&&o.isXsdType("date",t))return o.ebvFalse();if(o.isXsdType("date",e)&&o.isXsdType("dateTime",t))return o.ebvFalse();var c=r.compareDateComponents(e.value,t.value);return null!=c?0==c?o.ebvTrue():o.ebvFalse():o.ebvError()}return o.isRDFTerm(e)&&o.isRDFTerm(t)?o.ebvBoolean(o.RDFTermEquality(e,t,i,s)):o.ebvFalse()},o.runGtFunction=function(e,t){if(o.isEbvError(e)||o.isEbvError(t))return o.ebvError();if(o.isNumeric(e)&&o.isNumeric(t))return o.ebvBoolean(o.effectiveTypeValue(e)>o.effectiveTypeValue(t));if(o.isSimpleLiteral(e)&&o.isSimpleLiteral(t))return o.ebvBoolean(o.effectiveTypeValue(e)>o.effectiveTypeValue(t));if(o.isXsdType("string",e)&&o.isXsdType("string",t))return o.ebvBoolean(o.effectiveTypeValue(e)>o.effectiveTypeValue(t));if(o.isXsdType("boolean",e)&&o.isXsdType("boolean",t))return o.ebvBoolean(o.effectiveTypeValue(e)>o.effectiveTypeValue(t));if((o.isXsdType("dateTime",e)||o.isXsdType("date",e))&&(o.isXsdType("dateTime",t)||o.isXsdType("date",t))){if(o.isXsdType("dateTime",e)&&o.isXsdType("date",t))return o.ebvFalse();if(o.isXsdType("date",e)&&o.isXsdType("dateTime",t))return o.ebvFalse();var n=r.compareDateComponents(e.value,t.value);return null!=n?1==n?o.ebvTrue():o.ebvFalse():o.ebvError()}return o.ebvFalse()},o.runTotalGtFunction=function(e,t){return o.isEbvError(e)||o.isEbvError(t)?o.ebvError():o.isNumeric(e)&&o.isNumeric(t)||o.isSimpleLiteral(e)&&o.isSimpleLiteral(t)||o.isXsdType("string",e)&&o.isSimpleLiteral("string",t)||o.isXsdType("boolean",e)&&o.isSimpleLiteral("boolean",t)||o.isXsdType("dateTime",e)&&o.isSimpleLiteral("dateTime",t)?o.runGtFunction(e,t,[]):e.token&&"uri"===e.token&&t.token&&"uri"===t.token?o.ebvBoolean(e.value>t.value):e.token&&"literal"===e.token&&t.token&&"literal"===t.token?o.ebvBoolean(""+e.value+e.type+e.lang>""+t.value+t.type+t.lang):e.token&&"blank"===e.token&&t.token&&"blank"===t.token?o.ebvBoolean(e.value>t.value):e.value&&t.value?o.ebvBoolean(e.value>t.value):o.ebvTrue()},o.runLtFunction=function(e,t){if(o.isEbvError(e)||o.isEbvError(t))return o.ebvError();if(o.isNumeric(e)&&o.isNumeric(t))return o.ebvBoolean(o.effectiveTypeValue(e)<o.effectiveTypeValue(t));if(o.isSimpleLiteral(e)&&o.isSimpleLiteral(t))return o.ebvBoolean(o.effectiveTypeValue(e)<o.effectiveTypeValue(t));if(o.isXsdType("string",e)&&o.isXsdType("string",t))return o.ebvBoolean(o.effectiveTypeValue(e)<o.effectiveTypeValue(t));if(o.isXsdType("boolean",e)&&o.isXsdType("boolean",t))return o.ebvBoolean(o.effectiveTypeValue(e)<o.effectiveTypeValue(t));if((o.isXsdType("dateTime",e)||o.isXsdType("date",e))&&(o.isXsdType("dateTime",t)||o.isXsdType("date",t))){if(o.isXsdType("dateTime",e)&&o.isXsdType("date",t))return o.ebvFalse();if(o.isXsdType("date",e)&&o.isXsdType("dateTime",t))return o.ebvFalse();var n=r.compareDateComponents(e.value,t.value);return null!=n?-1==n?o.ebvTrue():o.ebvFalse():o.ebvError()}return o.ebvFalse()},o.runGtEqFunction=function(e,t){if(o.isEbvError(e)||o.isEbvError(t))return o.ebvError();if(o.isNumeric(e)&&o.isNumeric(t))return o.ebvBoolean(o.effectiveTypeValue(e)>=o.effectiveTypeValue(t));if(o.isSimpleLiteral(e)&&o.isSimpleLiteral(t))return o.ebvBoolean(o.effectiveTypeValue(e)>=o.effectiveTypeValue(t));if(o.isXsdType("string",e)&&o.isXsdType("string",t))return o.ebvBoolean(o.effectiveTypeValue(e)>=o.effectiveTypeValue(t));if(o.isXsdType("boolean",e)&&o.isXsdType("boolean",t))return o.ebvBoolean(o.effectiveTypeValue(e)>=o.effectiveTypeValue(t));if((o.isXsdType("dateTime",e)||o.isXsdType("date",e))&&(o.isXsdType("dateTime",t)||o.isXsdType("date",t))){if(o.isXsdType("dateTime",e)&&o.isXsdType("date",t))return o.ebvFalse();if(o.isXsdType("date",e)&&o.isXsdType("dateTime",t))return o.ebvFalse();var n=r.compareDateComponents(e.value,t.value);return null!=n?-1!=n?o.ebvTrue():o.ebvFalse():o.ebvError()}return o.ebvFalse()},o.runLtEqFunction=function(e,t){if(o.isEbvError(e)||o.isEbvError(t))return o.ebvError();if(o.isNumeric(e)&&o.isNumeric(t))return o.ebvBoolean(o.effectiveTypeValue(e)<=o.effectiveTypeValue(t));if(o.isSimpleLiteral(e)&&o.isSimpleLiteral(t))return o.ebvBoolean(o.effectiveTypeValue(e)<=o.effectiveTypeValue(t));if(o.isXsdType("string",e)&&o.isXsdType("string",t))return o.ebvBoolean(o.effectiveTypeValue(e)<=o.effectiveTypeValue(t));if(o.isXsdType("boolean",e)&&o.isXsdType("boolean",t))return o.ebvBoolean(o.effectiveTypeValue(e)<=o.effectiveTypeValue(t));if((o.isXsdType("dateTime",e)||o.isXsdType("date",e))&&(o.isXsdType("dateTime",t)||o.isXsdType("date",t))){if(o.isXsdType("dateTime",e)&&o.isXsdType("date",t))return o.ebvFalse();if(o.isXsdType("date",e)&&o.isXsdType("dateTime",t))return o.ebvFalse();var n=r.compareDateComponents(e.value,t.value);return null!=n?1!=n?o.ebvTrue():o.ebvFalse():o.ebvError()}return o.ebvFalse()},o.runAddition=function(e,t,r,n,i,a){var s=o.runFilter(e,r,n,i,a);if(o.isEbvError(s))return o.ebvError();var l=s;if(o.isNumeric(s)){for(var u=0;u<t.length;u++){var c=o.runFilter(t[u].expression,r,n,i,a);if(!o.isNumeric(c))return o.ebvFalse();"+"===t[u].operator?l=o.runSumFunction(l,c):"-"===t[u].operator&&(l=o.runSubFunction(l,c))}return l}return o.ebvFalse()},o.runSumFunction=function(e,t){if(o.isEbvError(e)||o.isEbvError(t))return o.ebvError();var r=o.effectiveTypeValue(e)+o.effectiveTypeValue(t);return o.isDouble(e)||o.isDouble(t)?{token:"literal",type:a+"double",value:r}:o.isFloat(e)||o.isFloat(t)?{token:"literal",type:a+"float",value:r}:o.isDecimal(e)||o.isDecimal(t)?{token:"literal",type:a+"decimal",value:r}:{token:"literal",type:a+"integer",value:r}},o.runSubFunction=function(e,t){if(o.isEbvError(e)||o.isEbvError(t))return o.ebvError();var r=o.effectiveTypeValue(e)-o.effectiveTypeValue(t);return o.isDouble(e)||o.isDouble(t)?{token:"literal",type:a+"double",value:r}:o.isFloat(e)||o.isFloat(t)?{token:"literal",type:a+"float",value:r}:o.isDecimal(e)||o.isDecimal(t)?{token:"literal",type:a+"decimal",value:r}:{token:"literal",type:a+"integer",value:r}},o.runMultiplication=function(e,t,r,n,i,a){var s=o.runFilter(e,r,n,i,a);if(o.isEbvError(s))return s;var l=s;if(o.isNumeric(s)){for(var u=0;u<t.length;u++){var c=o.runFilter(t[u].expression,r,n,i,a);if(o.isEbvError(c))return s;if(!o.isNumeric(c))return o.ebvFalse();"*"===t[u].operator?l=o.runMulFunction(l,c):"/"===t[u].operator&&(l=o.runDivFunction(l,c))}return l}return o.ebvFalse()},o.runMulFunction=function(e,t){if(o.isEbvError(e)||o.isEbvError(t))return o.ebvError();var r=o.effectiveTypeValue(e)*o.effectiveTypeValue(t);return o.isDouble(e)||o.isDouble(t)?{token:"literal",type:a+"double",value:r}:o.isFloat(e)||o.isFloat(t)?{token:"literal",type:a+"float",value:r}:o.isDecimal(e)||o.isDecimal(t)?{token:"literal",type:a+"decimal",value:r}:{token:"literal",type:a+"integer",value:r}},o.runDivFunction=function(e,t){if(o.isEbvError(e)||o.isEbvError(t))return o.ebvError();var r=o.effectiveTypeValue(e)/o.effectiveTypeValue(t);return o.isDouble(e)||o.isDouble(t)?{token:"literal",type:a+"double",value:r}:o.isFloat(e)||o.isFloat(t)?{token:"literal",type:a+"float",value:r}:o.isDecimal(e)||o.isDecimal(t)?{token:"literal",type:a+"decimal",value:r}:{token:"literal",type:a+"integer",value:r}},o.runBuiltInCall=function(e,t,r,i,a,s){if("notexists"===e||"exists"===e){var l=n.clone(t[0],!0),u=i.abstractQueryTree.parseSelect({pattern:l},r);u=i.abstractQueryTree.bind(u.pattern,r);var c=i.executeSelectUnit([{kind:"*"}],a,u,s);return o.ebvBoolean("exists"===e?0!==c.length:0===c.length)}for(var p=[],f=0;f<t.length;f++)if("var"===t[f].token)p.push(t[f]);else{var d=o.runFilter(t[f],r,i,a,s);if(o.isEbvError(d))return d;p.push(d)}if("str"===e)return"literal"===p[0].token?{token:"literal",type:null,value:""+p[0].value}:"uri"===p[0].token?{token:"literal",type:null,value:p[0].value}:o.ebvFalse();if("lang"===e)return"literal"===p[0].token?null!=p[0].lang?{token:"literal",value:""+p[0].lang}:{token:"literal",value:""}:o.ebvError();if("datatype"===e){if("literal"===p[0].token){var h=p[0];return null!=h.type?"string"==typeof h.type?{token:"uri",value:h.type,prefix:null,suffix:null}:h.type:null==h.lang?{token:"uri",value:"http://www.w3.org/2001/XMLSchema#string",prefix:null,suffix:null}:o.ebvError()}return o.ebvError()}if("isliteral"===e)return"literal"===p[0].token?o.ebvTrue():o.ebvFalse();if("isblank"===e)return"blank"===p[0].token?o.ebvTrue():o.ebvFalse();if("isuri"===e||"isiri"===e)return"uri"===p[0].token?o.ebvTrue():o.ebvFalse();if("sameterm"===e){var v=p[0],g=p[1],y=o.RDFTermEquality(v,g,i,s);return o.isEbvError(y)&&(y=!1),o.ebvBoolean(y)}if("langmatches"===e){var b=p[0],m=p[1];return"literal"===b.token&&"literal"===m.token?"*"===m.value&&""!=b.value?o.ebvTrue():o.ebvBoolean(0===b.value.toLowerCase().indexOf(m.value.toLowerCase())):o.ebvError()}if("bound"===e){var x=p[0].value;return null==x?o.ebvError():null!=r[x]?o.ebvTrue():o.ebvFalse()}if(null!=i.customFns[e])return i.customFns[e](o,p);throw"Builtin call "+e+" not implemented yet"},o.runUnaryExpression=function(e,t,r,n,i,a){var s=o.runFilter(t,r,n,i,a);if(o.isEbvError(s))return s;if("!"===e){var l=o.ebv(s);return o.isEbvError(l)?o.ebvFalse():(l=!l,o.ebvBoolean(l))}if("+"===e)return o.isNumeric(s)?s:o.ebvError();if("-"===e){if(o.isNumeric(s)){var u={};for(var c in s)u[c]=s[c];return u.value=-u.value,u}return o.ebvError()}},o.runRegex=function(e,t,r,n,i,a,s){if(null==e)return o.ebvError();if(e=o.runFilter(e,n,i,a,s),null==t)return o.ebvError();if(t=o.runFilter(t,n,i,a,s),null!=r&&(r=o.runFilter(r,n,i,a,s)),null==t||"literal"!==t.token||null!=r&&"literal"!==r.token)return o.ebvError();if(t=t.value,r=null==r?null:r.value,null!=e&&"var"==e.token){if(null==n[e.value])return o.ebvError();e=n[e.value]}else{if(null==e||"literal"!==e.token)return o.ebvError();if(null!=e.type&&!o.isXsdType("string",e))return o.ebvError();e=e.value}var l;return l=null==r?RegExp(t):RegExp(t,r.toLowerCase()),l.exec(e)?o.ebvTrue():o.ebvFalse()},o.normalizeLiteralDatatype=function(e,t,n){return null==e.value.type||"object"!=typeof e.value.type?e:(e.value.type=r.lexicalFormBaseUri(e.value.type,n),e)},o.runIriRefOrFunction=function(e,t,n,i,s,l){if(null==t)return e;for(var u=[],c=0;c<t.length;c++)u.push(o.runFilter(t[c],n,i,s,l));var p=r.lexicalFormBaseUri(e,l);if(p==a+"integer"||p==a+"decimal"||p==a+"double"||p==a+"nonPositiveInteger"||p==a+"negativeInteger"||p==a+"long"||p==a+"int"||p==a+"short"||p==a+"byte"||p==a+"nonNegativeInteger"||p==a+"unsignedLong"||p==a+"unsignedInt"||p==a+"unsignedShort"||p==a+"unsignedByte"||p==a+"positiveInteger"){var f=u[0];if("literal"!==f.token)return o.ebvError();if(f=o.normalizeLiteralDatatype(f,i,l),f.type==a+"integer"||f.type==a+"decimal"||f.type==a+"double"||f.type==a+"nonPositiveInteger"||f.type==a+"negativeInteger"||f.type==a+"long"||f.type==a+"int"||f.type==a+"short"||f.type==a+"byte"||f.type==a+"nonNegativeInteger"||f.type==a+"unsignedLong"||f.type==a+"unsignedInt"||f.type==a+"unsignedShort"||f.type==a+"unsignedByte"||f.type==a+"positiveInteger")return f.type=p,f;if("http://www.w3.org/2001/XMLSchema#boolean"==f.type)return 1==o.ebv(f)?(f.type=p,f.value=1):(f.type=p,f.value=0),f;if("http://www.w3.org/2001/XMLSchema#float"==f.type||"http://www.w3.org/2001/XMLSchema#double"==f.type)return f.type=p,f.value=parseInt(f.value),f;if("http://www.w3.org/2001/XMLSchema#string"!=f.type&&null!=f.type)return o.ebvError();if(f.value.split(".").length>2)return o.ebvError();if(f.value.split("-").length>2)return o.ebvError();if(f.value.split("/").length>2)return o.ebvError();if(f.value.split("+").length>2)return o.ebvError();if(p==a+"decimal"&&(-1!=f.value.indexOf("e")||-1!=f.value.indexOf("E")))return o.ebvError();if(!(p!=a+"int"&&p!=a+"integer"||-1==f.value.indexOf("e")&&-1==f.value.indexOf("E")&&-1==f.value.indexOf(".")))return o.ebvError();try{return f.value=parseInt(parseFloat(f.value)),isNaN(f.value)?o.ebvError():(f.type=p,f)}catch(d){return o.ebvError()}}else{if(p==a+"boolean"){var f=u[0];return"literal"===f.token&&null==f.type?"true"===f.value||"1"===f.value?o.ebvTrue():"false"===f.value||"0"===f.value?o.ebvFalse():o.ebvError():"literal"===f.token?o.isEbvError(f)?f:o.ebvBoolean(f):o.ebvError()}if(p==a+"string"){var f=u[0];return"literal"===f.token?(f=o.normalizeLiteralDatatype(f,i,l),f.type==a+"integer"||f.type==a+"decimal"||f.type==a+"double"||f.type==a+"nonPositiveInteger"||f.type==a+"negativeInteger"||f.type==a+"long"||f.type==a+"int"||f.type==a+"short"||f.type==a+"byte"||f.type==a+"nonNegativeInteger"||f.type==a+"unsignedLong"||f.type==a+"unsignedInt"||f.type==a+"unsignedShort"||f.type==a+"unsignedByte"||f.type==a+"positiveInteger"||f.type==a+"float"?(f.type=p,f.value=""+f.value,f):f.type==a+"string"?f:f.type==a+"boolean"?(o.ebv(f)?(f.type=p,f.value="true"):(f.type=p,f.value="false"),f):f.type==a+"dateTime"||f.type==a+"date"?(f.type=p,"string"!=typeof f.value&&(f.value=r.iso8601(f.value)),f):null==f.type?(f.value=""+f.value,f.type=p,f):o.ebvError()):"uri"===f.token?{token:"literal",value:r.lexicalFormBaseUri(f,l),type:p,lang:null}:o.ebvError()}if(p==a+"dateTime"||p==a+"date"){if(f=u[0],f.type==a+"dateTime"||f.type==a+"date")return f;if(f.type!=a+"string"&&null!=f.type)return o.ebvError();try{return f.value=r.iso8601(r.parseISO8601(f.value)),f.type=p,f}catch(d){return o.ebvError()}}else{if(p!=a+"float")return o.ebvError();var f=u[0];if("literal"!==f.token)return o.ebvError();if(f=o.normalizeLiteralDatatype(f,i,l),"http://www.w3.org/2001/XMLSchema#decimal"==f.type||"http://www.w3.org/2001/XMLSchema#int"==f.type)return f.type=p,f.value=parseFloat(f.value),f;if("http://www.w3.org/2001/XMLSchema#boolean"==f.type)return 1==o.ebv(f)?(f.type=p,f.value=1):(f.type=p,f.value=0),f;if("http://www.w3.org/2001/XMLSchema#float"==f.type||"http://www.w3.org/2001/XMLSchema#double"==f.type)return f.type=p,f.value=parseFloat(f.value),f;if("http://www.w3.org/2001/XMLSchema#string"==f.type)try{return f.value=parseFloat(f.value),isNaN(f.value)?o.ebvError():(f.type=p,f)}catch(d){return o.ebvError()}else{if(null!=f.type)return o.ebvError();if(f.value.split(".").length>2)return o.ebvError();if(f.value.split("-").length>2)return o.ebvError();if(f.value.split("/").length>2)return o.ebvError();if(f.value.split("+").length>2)return o.ebvError();try{return f.value=parseFloat(f.value),isNaN(f.value)?o.ebvError():(f.type=p,f)}catch(d){return o.ebvError()}}}}},t.exports={QueryFilters:o}},{"./utils":55}],51:[function(e,t){var r=e("./utils"),n=e("./utils"),i={};i.variablesInBGP=function(e){var t=e.variables;if(t)return t;var r=e.value||e;t=[];for(var n in r)r[n]&&"var"===r[n].token?t.push(r[n].value):r[n]&&"blank"===r[n].token&&t.push("blank:"+r[n].value);return e.variables=t,t},i.connected=function(e,t){for(var r="/"+e.vars.join("/")+"/",n=0;n<t.vars.length;n++)if(-1!=r.indexOf("/"+t.vars[n]+"/"))return!0;return!1};var o=function(e,t){for(var r={},n=0;n<e.lenght;n++)r[e[n]]=1;for(n=0;n<t.length;n++){var i=r[t[n]]||0;i++,r[t[n]]=i}var o=[];for(var a in r)2==r[a]&&o.push(r[a]);return o};i.variablesIntersectionBGP=function(e,t){return o(i.variablesInBGP(e),i.variablesInBGP(t))},i.executeAndBGPsGroups=function(e){for(var t={},n={},o=0,a=function(e,t){for(var r=0;r<e.length;r++){var n="/"+e[r]+"/";if(-1!=t.indexOf(n))return!0}return!1},s=function(e,r,i,o){var a=[],s="",l="";for(var u in r)s+=u,a=a.concat(t[u]),l+=n[u];l=l+f.join("/")+"/",a.push(e),i[s]=a,o[s]=l},l=0;l<e.length;l++){var u=e[l],c={},p={},f=i.variablesInBGP(u),d={};for(var h in n)a(f,n[h])?d[h]=!0:(c[h]=t[h],p[h]=n[h]);0===r.size(d)?(c["g"+o]=[u],p["g"+o]="/"+f.join("/")+"/",o++):s(u,d,c,p),t=c,n=p}return r.values(t)},i.intersectionSize=function(e,t){for(var r=t.i.split("_"),n=0;n<r.length;n++)if(""!=r[n]&&-1!=e.i.indexOf("_"+r[n]+"_"))return 1;return 0},i.createJoinTree=function(e,t){for(var n="/"+e.vars.join("/")+"/",i=e.vars.concat([]),o=[],a=0;a<t.vars.length;a++)-1!=n.indexOf("/"+t.vars[a]+"/")?o.push(0==t.vars[a].indexOf("_:")?"blank:"+t.vars[a]:t.vars[a]):i.push(t.vars[a]);for(var s=t.i.split("_"),l=e.i.split("_"),u={},a=0;a<s.length;a++)""!=s[a]&&(u[s[a]]=!0);for(var a=0;a<l.length;a++)""!=l[a]&&(u[l[a]]=!0);var c=r.keys(u);return{left:e,right:t,cost:e.cost+t.cost,i:"_"+c.sort().join("_")+"_",vars:i,join:o}},i.executeBushyTree=function(e,t,r,n,o){null==e.left?i.executeEmptyJoinBGP(e.right,t,r,n,o):null==e.right?i.executeEmptyJoinBGP(e.left,t,r,n,o):i.executeBushyTree(e.left,t,r,n,function(a){null!=a?i.executeBushyTree(e.right,t,r,n,function(t){o(null!=t?i.joinBindings2(e.join,a,t):null)}):o(null)})},i.executeAndBGPsDPSize=function(e,t,r,o,a){var s=i.executeAndBGPsGroups(e),l=[];n.eachSeries(s,function(e,t){r.computeCosts(e,o,function(e){var r={},n={},o={},a=1,s=null,u={};o[1]=[];for(var c=0;c<e.length;c++){var p=[];delete e[c].variables;for(var f in e[c])"_cost"!=f&&("var"===e[c][f].token?p.push(e[c][f].value):"blank"===e[c][f].token&&p.push(e[c][f].value));n["_"+c+"_"]={left:e[c],right:null,cost:e[c]._cost,i:"_"+c+"_",vars:p};var d={left:e[c],right:null,cost:e[c]._cost,i:"_"+c+"_",vars:p};r["_"+c+"_"]=d,delete e[c]._cost,u["_"+c+"_"]=!0,o[1].push("_"+c+"_"),(null==s||s.cost>d.cost)&&(s=d)}for(var h=2;h<=e.length;h++)for(var v=1;h>v;v++)for(var g=h-v,y=o[""+v]||[],b=o[""+g]||[],c=0;c<y.length;c++)for(var m=0;m<b.length;m++)if(y[c]!==b[m]){var x=n[y[c]],k=n[b[m]];if(0==i.intersectionSize(x,k)&&i.connected(x,k)){a=h;var $=r[x.i],w=r[k.i],_=i.createJoinTree($,w);if(!u[_.i]){u[_.i]=!0;var E=_.cost+1;
null!=r[_.i]&&(E=r[_.i].cost);var I=o[h]||[];I.push(_.i),n[_.i]=_,o[h]=I,E>_.cost&&(a===h&&(s=_),r[_.i]=_)}}}l.push(s),t()})},function(){var e=null;n.eachSeries(l,function(n,a){i.executeBushyTree(n,t,r,o,function(t){t?null==e?(e=t,a()):(e=i.crossProductBindings(e,t),a()):a("Error executing bushy tree")})},function(t){t?a(null,t):a(e)})})},i.executeEmptyJoinBGP=function(e,t,r,n,o){return i.executeBGPDatasets(e,t,r,n,o)},i.executeBGPDatasets=function(e,t,r,o,a){var s={};if(null==e.graph){var l=[];n.eachSeries(t.implicit,function(t,n){null==s[t.oid]?(s[t.oid]=!0,e.graph=t,r.rangeQuery(e,o,function(t){t=i.buildBindingsFromRange(t,e),l.push(t),n()})):n()},function(){var e=i.unionManyBindings(l);a(e)})}else if("var"===e.graph.token){var u=e.graph.value,l=[];n.eachSeries(t.named,function(t,n){null==s[t.oid]&&(s[t.oid]=!0,e.graph=t,null!=l?r.rangeQuery(e,o,function(r){if(null!=r){r=i.buildBindingsFromRange(r,e);for(var o=0;o<r.length;o++)r[o][u]=t.oid;l.push(r)}else l=null;n()}):n())},function(){if(null==l)a(null);else{var e=i.unionManyBindings(l);a(e)}})}else r.rangeQuery(e,o,function(t){null!=t?(t=i.buildBindingsFromRange(t,e),a(t)):a(null)})},i.buildBindingsFromRange=function(e,t){i.variablesInBGP(t);var r=t.value||t,n={};for(c in r)r[c]&&"var"===r[c].token?n[c]=r[c].value:r[c]&&"blank"===r[c].token&&(n[c]="blank:"+r[c].value);var o=[];if(null!=e)for(var a=0;a<e.length;a++){var s={},l=e[a],u=!1;for(var c in n){var p=l[c];if(null!=s[n[c]]&&s[n[c]]!==p){u=!0;break}s[n[c]]=p}u||o.push(s)}return o},i.areCompatibleBindings=function(e,t){for(var r in e)if(null!=t[r]&&t[r]!=e[r])return!1;return!0},i.mergeBindings=function(e,t){var r={};for(var n in e)r[n]=e[n];for(var n in t)r[n]=t[n];return r},i.joinBindings2=function(e,t,r){for(var n,o,a,s,l,u={},c=[],p=0;p<t.length;p++){n=t[p],l=u;for(var f=0;f<e.length;f++)o=e[f],a=n[o],f==e.length-1?(s=l[a]||[],s.push(n),l[a]=s):(s=l[a]||{},l[a]=s,l=s)}for(var p=0;p<r.length;p++){n=r[p],l=u;for(var f=0;f<e.length;f++)if(o=e[f],a=n[o],null!=l[a])if(f==e.length-1)for(var d=0;d<l[a].length;d++)c.push(i.mergeBindings(l[a][d],n));else l=l[a]}return c},i.joinBindings=function(e,t){for(var r=[],n=0;n<e.length;n++)for(var o=e[n],a=0;a<t.length;a++){var s=t[a];i.areCompatibleBindings(o,s)&&r.push(i.mergeBindings(o,s))}return r},i.augmentMissingBindings=function(e,t){for(var r in t)null==e[r]&&(e[r]=null);return e},i.leftOuterJoinBindings=function(e,t){for(var r=[],n=0;n<e.length;n++){for(var o=e[n],a=!1,s=0;s<t.length;s++){var l=t[s];i.areCompatibleBindings(o,l)&&(a=!0,r.push(i.mergeBindings(o,l)))}a===!1&&(i.augmentMissingBindings(o,l),r.push(o))}return r},i.crossProductBindings=function(e,t){for(var r=[],n=0;n<e.length;n++)for(var o=e[n],a=0;a<t.length;a++){var s=t[a];r.push(i.mergeBindings(o,s))}return r},i.unionBindings=function(e,t){return e.concat(t)},i.unionManyBindings=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];t=i.unionBindings(t,n)}return t},t.exports={QueryPlan:i}},{"./utils":55}],52:[function(e,t){var r=e("./network_transport").NetworkTransport,n=e("./rvn3_parser").RVN3Parser,i=e("./jsonld_parser").JSONLDParser,o=e("./utils"),a=function(e){if(this.precedences=["text/turtle","text/n3","application/ld+json","application/json"],this.parsers={"text/turtle":n.parser,"text/n3":n.parser,"application/ld+json":i.parser,"application/json":i.parser},"undefined"!=typeof RDFXMLParser&&(this.precedences.push("application/rdf+xml"),this.parsers["application/rdf+xml"]=RDFXMLParser.parser),null!=e)for(var t in e.parsers)this.parsers[t]=e.parsers[t];if(e&&null!=e.precedences){this.precedences=e.precedences;for(var t in e.parsers)o.include(this.precedences,t)||this.precedences.push(t)}this.acceptHeaderValue="";for(var r=0;r<this.precedences.length;r++)this.acceptHeaderValue=0!=r?this.acceptHeaderValue+","+this.precedences[r]:this.acceptHeaderValue+this.precedences[r]};a.prototype.registerParser=function(e,t){this.parsers[e]=t,this.precedences.push(e)},a.prototype.unregisterParser=function(e){delete this.parsers[e];for(var t=[],r=0;r<this.precedences.length;r++)this.precedences[r]!=e&&t.push(this.precedences[r]);this.precedences=t},a.prototype.setAcceptHeaderPrecedence=function(e){this.precedences=e},a.prototype.load=function(e,t,n){var i=this;r.load(e,this.acceptHeaderValue,function(r,o){if(r)n(r);else{var a=o.headers["Content-Type"]||o.headers["content-type"],s=o.data;if(null!=a){a=a.split(";")[0];for(var l in i.parsers)if(-1!=l.indexOf("/")){var u=l.split("/");if("*"===u[1]){if(-1!=a.indexOf(u[0]))return i.tryToParse(i.parsers[l],t,s,{documentURI:e},n)}else{if(-1!=a.indexOf(l))return i.tryToParse(i.parsers[l],t,s,{documentURI:e},n);if(-1!=a.indexOf(u[1]))return i.tryToParse(i.parsers[l],t,s,{documentURI:e},n)}}else if(-1!=a.indexOf(l))return i.tryToParse(i.parsers[l],t,s,{documentURI:e},n);n(Error("Unknown media type : "+a))}else n(Error("Uknown media type"))}})},a.prototype.loadFromFile=function(t,r,n,i){try{var o=this,a=e("fs");a.readFile(n.split("file:/")[1],function(e,a){if(e)i(e);else{var a=a.toString("utf8");o.tryToParse(t,r,a,{documentURI:n},i)}})}catch(s){i(s)}},a.prototype.tryToParse=function(e,t,r,n,i){try{"string"==typeof r&&(r=o.normalizeUnicodeLiterals(r)),e.parse(r,t,n,i)}catch(a){console.log(a.message),console.log(a.stack),i(a)}},t.exports={RDFLoader:a}},{"./jsonld_parser":41,"./network_transport":43,"./rvn3_parser":54,"./utils":55,fs:1}],53:[function(e,t){var r=e("./utils"),n=e("./query_filters").QueryFilters,i={};i.defaultContext={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",owl:"http://www.w3.org/2002/07/owl#",xsd:"http://www.w3.org/2001/XMLSchema#",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",cal:"http://www.w3.org/2002/12/cal/ical#",vcard:"http://www.w3.org/2006/vcard/ns# ",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",cc:"http://creativecommons.org/ns#",sioc:"http://rdfs.org/sioc/ns#",doap:"http://usefulinc.com/ns/doap#",com:"http://purl.org/commerce#",ps:"http://purl.org/payswarm#",gr:"http://purl.org/goodrelations/v1#",sig:"http://purl.org/signature#",ccard:"http://purl.org/commerce/creditcard#"},i.UrisMap=function(){this.defaultNs="",this.interfaceProperties=["get","remove","set","setDefault","addAll","resolve","shrink"]},i.UrisMap.prototype.values=function(){var e={};for(var t in this)r.include(this.interfaceProperties,t)||"function"==typeof this[t]||"defaultNs"===t||"interfaceProperties"===t||(e[t]=this[t]);return e},i.UrisMap.prototype.get=function(e){if(-1!=e.indexOf(" "))throw"Prefix must not contain any whitespaces";return this[e]},i.UrisMap.prototype.remove=function(e){if(-1!=e.indexOf(" "))throw"Prefix must not contain any whitespaces";return delete this[e],null},i.UrisMap.prototype.set=function(e,t){if(-1!=e.indexOf(" "))throw"Prefix must not contain any whitespaces";this[e]=t},i.UrisMap.prototype.setDefault=function(e){this.defaultNs=e},i.UrisMap.prototype.addAll=function(e,t){for(var n in e)r.include(this.interfaceProperties,n)||(null!=this[n]?t===!0&&(this[n]=e[n]):this[n]=e[n]);return this},i.UrisMap.prototype.resolve=function(e){var t=e.split(":"),r=t[0],n=t[1];return""===r?null==this.defaultNs?null:this.defaultNs+n:null!=this[r]?this[r]+n:null},i.UrisMap.prototype.shrink=function(e){for(var t in this){var r=this[t];if(0===e.indexOf(r)&&""!==r&&"defaultNs"!=t){var n=e.split(r)[1];return t+":"+n}}return e},i.Profile=function(){this.prefixes=new i.UrisMap,this.terms=new i.UrisMap},i.Profile.prototype.importProfile=function(e,t){this.prefixes.addAll(e.prefixes,t),this.terms.addAll(e.terms,t)},i.Profile.prototype.resolve=function(e){return-1!=e.indexOf(":")?this.prefixes.resolve(e):null!=this.terms[e]?this.terms.resolve(e):null},i.Profile.prototype.setDefaultPrefix=function(e){this.prefixes.setDefault(e)},i.Profile.prototype.setDefaultVocabulary=function(e){this.terms.setDefault(e)},i.Profile.prototype.setPrefix=function(e,t){this.prefixes.set(e,t)},i.Profile.prototype.setTerm=function(e,t){this.terms.set(e,t)},i.RDFEnvironment=function(){i.Profile.call(this),this.blankNodeCounter=0;var e=this;this.filters={s:function(e){return function(t){return t.subject.equals(e)}},p:function(e){return function(t){return t.predicate.equals(e)}},o:function(e){return function(t){return t.object.equals(e)}},sp:function(e,t){return function(r){return r.subject.equals(e)&&r.predicate.equals(t)}},so:function(e,t){return function(r){return r.subject.equals(e)&&r.object.equals(t)}},po:function(e,t){return function(r){return r.predicate.equals(e)&&r.object.equals(t)}},spo:function(e,t,r){return function(n){return n.subject.equals(e)&&n.predicate.equals(t)&&n.object.equals(r)}},describes:function(e){return function(t){return t.subject.equals(e)||t.object.equals(e)}},type:function(t){var r=e.resolve("rdf:type");return function(e){return e.predicate.equals(r)&&e.object.equals(t)}}};for(var t in i.defaultContext)this.prefixes.set(t,i.defaultContext[t])},i.RDFEnvironment.prototype=r.create(i.Profile.prototype,{constructor:i.RDFEnvironment}),i.RDFEnvironment.prototype.createBlankNode=function(){var e=new i.BlankNode(this.blankNodeCounter);return this.blankNodeCounter++,e},i.RDFEnvironment.prototype.createNamedNode=function(e){var t=this.resolve(e);return new i.NamedNode(null!=t?t:e)},i.RDFEnvironment.prototype.createLiteral=function(e,t,r){return null!=r?new i.Literal(e,t,""+r):new i.Literal(e,t,r)},i.RDFEnvironment.prototype.createTriple=function(e,t,r){return new i.Triple(e,t,r)},i.RDFEnvironment.prototype.createGraph=function(e){var t=new i.Graph;if(null!=e)for(var r=0;r<e.length;r++)t.add(e[r]);return t},i.RDFEnvironment.prototype.createAction=function(e,t){return function(r){return e(r)?t(r):r}},i.RDFEnvironment.prototype.createProfile=function(e){if(e===!0)return new i.RDFEnvironment.Profile;var t=new i.RDFEnvironment.Profile;return t.importProfile(this),t},i.RDFEnvironment.prototype.createTermMap=function(e){if(e===!0)return new i.UrisMap;var t=this.terms.values(),r=new i.UrisMap;for(var n in t)r[n]=t[n];return r},i.RDFEnvironment.prototype.createPrefixMap=function(e){if(e===!0)return new i.UrisMap;var t=this.prefixes.values(),r=new i.UrisMap;for(var n in t)r[n]=t[n];return r},i.RDFNode=function(e){this.interfaceName=e,this.attributes=["interfaceName","nominalValue"]},i.RDFNode.prototype.equals=function(e){if(null==e.interfaceName)return this.valueOf()==e;for(var t in this.attributes){var r=this.attributes[t];if(this[r]!=e[r])return!1}return!0},i.BlankNode=function(e){i.RDFNode.call(this,"BlankNode"),this.nominalValue="_:"+e,this.bnodeId=e},i.BlankNode.prototype=r.create(i.RDFNode.prototype,{constructor:i.BlankNode}),i.BlankNode.prototype.toString=function(){return this.nominalValue},i.BlankNode.prototype.toNT=function(){return this.nominalValue},i.BlankNode.prototype.valueOf=function(){return this.nominalValue},i.Literal=function(e,t,r){i.RDFNode.call(this,"Literal"),this.nominalValue=e,null!=t?this.language=t:null!=r&&(this.datatype=r)},i.Literal.prototype=r.create(i.RDFNode.prototype,{constructor:i.Literal}),i.Literal.prototype.toString=function(){var e='"'+this.nominalValue+'"';return null!=this.language?e=e+"@"+this.language:(null!=this.datatype||this.type)&&(e=e+"^^<"+(this.datatype||this.type)+">"),e},i.Literal.prototype.toNT=function(){return""+this},i.Literal.prototype.valueOf=function(){return n.effectiveTypeValue({token:"literal",type:this.type||this.datatype,value:this.nominalValue,language:this.language})},i.NamedNode=function(e){i.RDFNode.call(this,"NamedNode"),this.nominalValue=null!=e.value?e.value:e},i.NamedNode.prototype=r.create(i.RDFNode.prototype,{constructor:i.NamedNode}),i.NamedNode.prototype.toString=function(){return this.nominalValue},i.NamedNode.prototype.toNT=function(){return"<"+this+">"},i.NamedNode.prototype.valueOf=function(){return this.nominalValue},i.Triple=function(e,t,r){this.subject=e,this.predicate=t,this.object=r},i.Triple.prototype.equals=function(e){return this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)},i.Triple.prototype.toString=function(){return this.subject.toNT()+" "+this.predicate.toNT()+" "+this.object.toNT()+" . \r\n"},i.Graph=function(){this.triples=[],this.duplicates={},this.actions=[],this.length=0},i.Graph.prototype.add=function(e){for(var t=0;t<this.actions.length;t++)e=this.actions[t](e);var r=""+e.subject+(""+e.predicate)+(""+e.object);return this.duplicates[r]||(this.duplicates[r]=!0,this.triples.push(e)),this.length=this.triples.length,this},i.Graph.prototype.addAction=function(e,t){if(this.actions.push(e),1==t)for(var r=0;r<this.triples.length;r++)this.triples[r]=e(this.triples[r]);return this},i.Graph.prototype.addAll=function(e){for(var t=e.toArray(),r=0;r<t.length;r++)this.add(t[r]);return this.length=this.triples.length,this},i.Graph.prototype.remove=function(e){for(var t=null,r=0;r<this.triples.length;r++)if(this.triples[r].equals(e)){var n=""+e.subject+(""+e.predicate)+(""+e.object);delete this.duplicates[n],t=r;break}return null!=t&&this.triples.splice(t,1),this.length=this.triples.length,this},i.Graph.prototype.toArray=function(){return this.triples},i.Graph.prototype.some=function(e){for(var t=0;t<this.triples.length;t++)if(e(this.triples[t],this)===!0)return!0;return!1},i.Graph.prototype.every=function(e){for(var t=0;t<this.triples.length;t++)if(e(this.triples[t],this)===!1)return!1;return!0},i.Graph.prototype.filter=function(e){for(var t=new i.Graph,r=0;r<this.triples.length;r++)e(this.triples[r],this)===!0&&t.add(this.triples[r]);return t},i.Graph.prototype.forEach=function(e){for(var t=0;t<this.triples.length;t++)e(this.triples[t],this)},i.Graph.prototype.merge=function(){for(var e=new i.Graph,t=0;t<this.triples.length;t++)e.add(this.triples[t]);return e},i.Graph.prototype.match=function(e,t,r,n){for(var o=new i.Graph,a=0,s=0;s<this.triples.length;s++){var l=this.triples[s];if((null==e||l.subject.equals(e))&&(null==t||l.predicate.equals(t))&&(null==r||l.object.equals(r))){if(null!=n&&a>=n)return o;a++,o.add(l)}}return o},i.Graph.prototype.removeMatches=function(e,t,r){for(var n=[],i=0;i<this.triples.length;i++){var o=this.triples[i];(null==e||o.subject.equals(e))&&(null==t||o.predicate.equals(t))&&(null==r||o.object.equals(r))&&n.push(o)}for(var i=0;i<n.length;i++)this.remove(n[i]);return this},i.Graph.prototype.toNT=function(){var e="";return this.forEach(function(t){e+=""+t}),e},i.buildRDFResource=function(e,t,r,n){if("blank"===e.token)return i.buildBlankNode(e,t,r,n);if("literal"===e.token)return i.buildLiteral(e,t,r,n);if("uri"===e.token)return i.buildNamedNode(e,t,r,n);if("var"===e.token){var o=t[e.value];return null!=o?i.buildRDFResource(o,t,r,n):null}return null},i.buildBlankNode=function(e){return null!=e.valuetmp&&(e.value=e.valuetmp),0===e.value.indexOf("_:")&&(e.value=e.value.split("_:")[1]),new i.BlankNode(e.value)},i.buildLiteral=function(e){return new i.Literal(e.value,e.lang,e.type)},i.buildNamedNode=function(e,t,r,n){if(null!=e.value)return new i.NamedNode(e);if(null!=e.prefix){var o=r.resolveNsInEnvironment(e.prefix,n);return e.value=o+e.suffix,new i.NamedNode(e)}return new i.NamedNode(e)},i.rdf=new i.RDFEnvironment,t.exports=i},{"./query_filters":50,"./utils":55}],54:[function(e,t){function r(e){switch(e[0]){case'"':if(e.indexOf("^^")>0){var t=e.split("^^");return{literal:t[0]+"^^<"+t[1]+">"}}return{literal:e};case"_":return{blank:e.replace("b","")};default:return{token:"uri",value:e,prefix:null,suffix:null}}}var n=e("../node_modules/n3/lib/N3Parser"),i={};i.parser={async:!0,parse:function(e,t,i,o){o||(o=i,i=t,t=null),t&&"string"==typeof t&&(t={token:"uri",value:t,prefix:null,suffix:null}),i&&i.baseURI&&(i.documentIRI=i.baseURI);var a=[];new n(i).parse(e,function(e,n){e?o(e):n?a.push({subject:r(n.subject),predicate:r(n.predicate),object:r(n.object),graph:t}):o(!1,a)})},resetBlankNodeIds:function(){n._resetBlankNodeIds()}},t.exports={RVN3Parser:i}},{"../node_modules/n3/lib/N3Parser":36}],55:[function(_dereq_,module,exports){(function(process){function guid(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}var nextTick=function(){var e=null;"undefined"!=typeof window?e=window:void 0!==process&&(e=process);var t=void 0!==e&&e.setImmediate,r=void 0!==e&&e.postMessage&&e.addEventListener;if(t)return function(t){return e.setImmediate(t)};if("undefined"!==e&&e.nextTick&&"function"==typeof _dereq_)return _dereq_("timers")&&_dereq_("timers").setImmediate?_dereq_("timers").setImmediate:e.nextTick;if(r){var n=[];return e.addEventListener("message",function(t){var r=t.source;if((r===e||null===r)&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)){var i=n.shift();i()}},!0),function(t){n.push(t),e.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),hashTerm=function(e){try{if(null==e)return"";if("uri"===e.token)return"u"+e.value;if("blank"===e.token)return"b"+e.value;if("literal"===e.token){var t="l"+e.value;return t+=e.type||"",t+=e.lang||""}}catch(r){if("object"==typeof e){var n="";for(p in e)n=n+p+e[p];return n}return e}},lexicalFormBaseUri=function(e,t){var r=null;if(t=t||{},null==e.value){var n=e.prefix,i=e.suffix,o=t.namespaces[n];r=null!=o?o+i:n+":"+i}else r=e.value;return null===r?null:(-1==r.indexOf(":")&&(r=(t.base||"")+r),r)},parseISO8601=function(e){return Date.parse(e)};Date.prototype.toISOString||!function(){function e(e){return 10>e?"0"+e:e}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}();var iso8601=function(e){return e.toISOString()},compareDateComponents=function(e,t){var r=parseISO8601(e),n=parseISO8601(t);return r==n?0:n>r?-1:1},lexicalFormLiteral=function(e,t){var r=e.value,n=e.lang,i=e.type,o=null;if(null!=r&&null!=i&&"string"!=typeof i){var a=i.value;if(null==a){var s=i.prefix,l=i.suffix,u=t.namespaces[s];e.type=u+l,a=u+l}o=-1!=a.indexOf("hexBinary")?'"'+e.value.toLowerCase()+'"^^<'+a+">":'"'+e.value+'"^^<'+a+">"}else o=null==n&&null==i?'"'+r+'"':null==i?'"'+r+'"@'+n:-1!=i.indexOf("hexBinary")?'"'+e.value.toLowerCase()+'"^^<'+i+">":'"'+e.value+'"^^<'+i+">";return o},normalizeUnicodeLiterals=function(string){for(var escapedUnicode=string.match(/\\u[0-9abcdefABCDEF]{4,4}/g)||[],dups={},i=0;i<escapedUnicode.length;i++)null==dups[escapedUnicode[i]]&&(dups[escapedUnicode[i]]=!0,string=string.replace(RegExp("\\"+escapedUnicode[i],"g"),eval("'"+escapedUnicode[i]+"'")));return string},registerIndexedDB=function(e){if("undefined"==typeof window){var t=_dereq_("sqlite3"),r=_dereq_("indexeddb-js"),n=new t.Database(":memory:"),i=r.makeScope("sqlite3",n);e.indexedDB=i.indexedDB,e.IDBKeyRange=i.IDBKeyRange}else window.indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,window.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange||window.msIDBKeyRange,window.indexedDB?(e.indexedDB=window.indexedDB,e.IDBKeyRange=window.IDBKeyRange):callback(null,Error("The browser does not support IndexDB."))},hashTerm=function(e){try{if(null==e)return"";if("uri"===e.token)return"u"+e.value;if("blank"===e.token)return"b"+e.value;if("literal"===e.token){var t="l"+e.value;return t+=e.type||"",t+=e.lang||""}}catch(r){if("object"==typeof e){var n="";for(p in e)n=n+p+e[p];return n}return e}},reject=function(e,t){for(var r=[],n=0;n<e.length;n++)t(e[n])&&r.push(e[n]);return r},include=function(e,t){for(var r=0;r<e.length;r++)if(e[r]===t)return!0;return!1},each=function(e,t){if(e.forEach)e.forEach(t);else for(var r=0;r<e.length;r++)t(e[r])},map=function(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r[n]=t(e[n]);return r},keys=function(e){var t=[];for(var r in e)t.push(r);return t},values=function(e){var t=[];for(var r in e)t.push(e[r]);return t},size=function(e){if(e.length)return e.length;var t=0;for(var r in e)t++;return t},clone=function(e){return JSON.parse(JSON.stringify(e))},isObject=function(e){var t=typeof e;return"function"==t||e&&"object"==t||!1},create=function(){function e(){}return function(t){if(isObject(t)){e.prototype=t;var r=new e;e.prototype=null}return r||e()}}(),whilst=function(e,t,r){e()?t(function(n){return n?r(n):void whilst(e,t,r)}):r()},eachSeries=function(e,t,r){if(r=r||function(){},!e.length)return r();var n=0,i=function(){t(e[n],function(t){t?(r(t),r=function(){}):(n+=1,n<e.length?i():r())})};i()},reduce=function(e,t,r,n){eachSeries(e,function(e,n){r(t,e,function(e,r){t=r,n(e)})},function(e){n(e,t)})},seq=function(){var e=arguments;return function(){var t=this,r=Array.prototype.slice.call(arguments),n=r.pop();reduce(e,r,function(e,r,n){r.apply(t,e.concat([function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);n(e,t)}]))},function(e,r){n.apply(t,[e].concat(r))})}};module.exports={nextTick:nextTick,hasTerm:hashTerm,lexicalFormBaseUri:lexicalFormBaseUri,parseISO8601:parseISO8601,compareDateComponents:compareDateComponents,iso8601:iso8601,normalizeUnicodeLiterals:normalizeUnicodeLiterals,lexicalFormLiteral:lexicalFormLiteral,registerIndexedDB:registerIndexedDB,guid:guid,hashTerm:hashTerm,keys:keys,values:values,size:size,map:map,each:each,forEach:each,include:include,reject:reject,remove:reject,clone:clone,create:create,whilst:whilst,eachSeries:eachSeries,seq:seq}}).call(this,_dereq_("1YiZ5S"))},{"1YiZ5S":13,timers:26}]},{},[39])(39)});